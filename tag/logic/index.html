<!DOCTYPE html>
<html lang="en-US" class="no-js no-svg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">

<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<meta name='robots' content='noindex, follow' />

	<!-- This site is optimized with the Yoast SEO plugin v18.7 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>logic Archives - Coert Vonk</title>
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="logic Archives - Coert Vonk" />
	<meta property="og:url" content="https://coertvonk.com/tag/logic" />
	<meta property="og:site_name" content="Coert Vonk" />
	<meta name="twitter:card" content="summary" />
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://coertvonk.com/#/schema/person/5eeda746b43b88312a0621fdc226c70e","name":"Coert Vonk","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https://coertvonk.com/#/schema/person/image/","url":"http://1.gravatar.com/avatar/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g","contentUrl":"http://1.gravatar.com/avatar/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g","caption":"Coert Vonk"},"logo":{"@id":"https://coertvonk.com/#/schema/person/image/"},"description":"Passionately curious and stubbornly persistent. Enjoys to inspire and consult with others to exchange the poetry of logical ideas.","sameAs":["https://coertvonk.com"]},{"@type":"WebSite","@id":"https://coertvonk.com/#website","url":"https://coertvonk.com/","name":"Coert Vonk","description":"Embedded Software Engineer","publisher":{"@id":"https://coertvonk.com/#/schema/person/5eeda746b43b88312a0621fdc226c70e"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://coertvonk.com/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"CollectionPage","@id":"https://coertvonk.com/tag/logic#webpage","url":"https://coertvonk.com/tag/logic","name":"logic Archives - Coert Vonk","isPartOf":{"@id":"https://coertvonk.com/#website"},"breadcrumb":{"@id":"https://coertvonk.com/tag/logic#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://coertvonk.com/tag/logic"]}]},{"@type":"BreadcrumbList","@id":"https://coertvonk.com/tag/logic#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Vonk Family","item":"https://coertvonk.com/"},{"@type":"ListItem","position":2,"name":"logic"}]}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='http://ajax.googleapis.com/' />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link href='https://fonts.gstatic.com' crossorigin rel='preconnect' />
		<!-- This site uses the Google Analytics by ExactMetrics plugin v7.5.1 - Using Analytics tracking - https://www.exactmetrics.com/ -->
							<script src="https://www.googletagmanager.com/gtag/js?id=UA-86942534-1"  data-cfasync="false" data-wpfc-render="false" async></script>
			<script data-cfasync="false" data-wpfc-render="false">
				var em_version = '7.5.1';
				var em_track_user = true;
				var em_no_track_reason = '';
				
								var disableStrs = [
										'ga-disable-G-EN4Z6WHGH4',
															'ga-disable-UA-86942534-1',
									];

				/* Function to detect opted out users */
				function __gtagTrackerIsOptedOut() {
					for ( var index = 0; index < disableStrs.length; index++ ) {
						if ( document.cookie.indexOf( disableStrs[ index ] + '=true' ) > -1 ) {
							return true;
						}
					}

					return false;
				}

				/* Disable tracking if the opt-out cookie exists. */
				if ( __gtagTrackerIsOptedOut() ) {
					for ( var index = 0; index < disableStrs.length; index++ ) {
						window[ disableStrs[ index ] ] = true;
					}
				}

				/* Opt-out function */
				function __gtagTrackerOptout() {
					for ( var index = 0; index < disableStrs.length; index++ ) {
						document.cookie = disableStrs[ index ] + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
						window[ disableStrs[ index ] ] = true;
					}
				}

				if ( 'undefined' === typeof gaOptout ) {
					function gaOptout() {
						__gtagTrackerOptout();
					}
				}
								window.dataLayer = window.dataLayer || [];

				window.ExactMetricsDualTracker = {
					helpers: {},
					trackers: {},
				};
				if ( em_track_user ) {
					function __gtagDataLayer() {
						dataLayer.push( arguments );
					}

					function __gtagTracker( type, name, parameters ) {
						if (!parameters) {
							parameters = {};
						}

						if (parameters.send_to) {
							__gtagDataLayer.apply( null, arguments );
							return;
						}

						if ( type === 'event' ) {
															parameters.send_to = exactmetrics_frontend.v4_id;
								var hookName = name;
								if ( typeof parameters[ 'event_category' ] !== 'undefined' ) {
									hookName = parameters[ 'event_category' ] + ':' + name;
								}

								if ( typeof ExactMetricsDualTracker.trackers[ hookName ] !== 'undefined' ) {
									ExactMetricsDualTracker.trackers[ hookName ]( parameters );
								} else {
									__gtagDataLayer( 'event', name, parameters );
								}
							
															parameters.send_to = exactmetrics_frontend.ua;
								__gtagDataLayer( type, name, parameters );
													} else {
							__gtagDataLayer.apply( null, arguments );
						}
					}
					__gtagTracker( 'js', new Date() );
					__gtagTracker( 'set', {
						'developer_id.dNDMyYj' : true,
											} );
										__gtagTracker( 'config', 'G-EN4Z6WHGH4', {"forceSSL":"true"} );
															__gtagTracker( 'config', 'UA-86942534-1', {"forceSSL":"true"} );
										window.gtag = __gtagTracker;											(function () {
							/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
							/* ga and __gaTracker compatibility shim. */
							var noopfn = function () {
								return null;
							};
							var newtracker = function () {
								return new Tracker();
							};
							var Tracker = function () {
								return null;
							};
							var p = Tracker.prototype;
							p.get = noopfn;
							p.set = noopfn;
							p.send = function (){
								var args = Array.prototype.slice.call(arguments);
								args.unshift( 'send' );
								__gaTracker.apply(null, args);
							};
							var __gaTracker = function () {
								var len = arguments.length;
								if ( len === 0 ) {
									return;
								}
								var f = arguments[len - 1];
								if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
									if ( 'send' === arguments[0] ) {
										var hitConverted, hitObject = false, action;
										if ( 'event' === arguments[1] ) {
											if ( 'undefined' !== typeof arguments[3] ) {
												hitObject = {
													'eventAction': arguments[3],
													'eventCategory': arguments[2],
													'eventLabel': arguments[4],
													'value': arguments[5] ? arguments[5] : 1,
												}
											}
										}
										if ( 'pageview' === arguments[1] ) {
											if ( 'undefined' !== typeof arguments[2] ) {
												hitObject = {
													'eventAction': 'page_view',
													'page_path' : arguments[2],
												}
											}
										}
										if ( typeof arguments[2] === 'object' ) {
											hitObject = arguments[2];
										}
										if ( typeof arguments[5] === 'object' ) {
											Object.assign( hitObject, arguments[5] );
										}
										if ( 'undefined' !== typeof arguments[1].hitType ) {
											hitObject = arguments[1];
											if ( 'pageview' === hitObject.hitType ) {
												hitObject.eventAction = 'page_view';
											}
										}
										if ( hitObject ) {
											action = 'timing' === arguments[1].hitType ? 'timing_complete' : hitObject.eventAction;
											hitConverted = mapArgs( hitObject );
											__gtagTracker( 'event', action, hitConverted );
										}
									}
									return;
								}

								function mapArgs( args ) {
									var arg, hit = {};
									var gaMap = {
										'eventCategory': 'event_category',
										'eventAction': 'event_action',
										'eventLabel': 'event_label',
										'eventValue': 'event_value',
										'nonInteraction': 'non_interaction',
										'timingCategory': 'event_category',
										'timingVar': 'name',
										'timingValue': 'value',
										'timingLabel': 'event_label',
										'page' : 'page_path',
										'location' : 'page_location',
										'title' : 'page_title',
									};
									for ( arg in args ) {
																				if ( ! ( ! args.hasOwnProperty(arg) || ! gaMap.hasOwnProperty(arg) ) ) {
											hit[gaMap[arg]] = args[arg];
										} else {
											hit[arg] = args[arg];
										}
									}
									return hit;
								}

								try {
									f.hitCallback();
								} catch ( ex ) {
								}
							};
							__gaTracker.create = newtracker;
							__gaTracker.getByName = newtracker;
							__gaTracker.getAll = function () {
								return [];
							};
							__gaTracker.remove = noopfn;
							__gaTracker.loaded = true;
							window['__gaTracker'] = __gaTracker;
						})();
									} else {
										console.log( "" );
					( function () {
							function __gtagTracker() {
								return null;
							}
							window['__gtagTracker'] = __gtagTracker;
							window['gtag'] = __gtagTracker;
					} )();
									}
			</script>
				<!-- / Google Analytics by ExactMetrics -->
		<style id='global-styles-inline-css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('index.html');--wp--preset--duotone--grayscale: url('index.html');--wp--preset--duotone--purple-yellow: url('index.html');--wp--preset--duotone--blue-red: url('index.html');--wp--preset--duotone--midnight: url('index.html');--wp--preset--duotone--magenta-yellow: url('index.html');--wp--preset--duotone--purple-green: url('index.html');--wp--preset--duotone--blue-orange: url('index.html');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='cookie-law-info-css'  href='../../wp-content/plugins/cookie-law-info/public/css/cookie-law-info-public.css' media='all' />
<link rel='stylesheet' id='cookie-law-info-gdpr-css'  href='../../wp-content/plugins/cookie-law-info/public/css/cookie-law-info-gdpr.css' media='all' />
<link rel='stylesheet' id='UserAccessManagerLoginForm-css'  href='../../wp-content/plugins/user-access-manager/assets/css/uamLoginForm.css' media='screen' />
<link rel='stylesheet' id='parent-style-css'  href='../../wp-content/themes/twentyseventeen/style.css' media='all' />
<link rel='stylesheet' id='twentyseventeen-fonts-css'  href='https://fonts.googleapis.com/css?family=Libre+Franklin%3A300%2C300i%2C400%2C400i%2C600%2C600i%2C800%2C800i&#038;subset=latin%2Clatin-ext&#038;display=fallback' media='all' />
<link rel='stylesheet' id='twentyseventeen-style-css'  href='../../wp-content/themes/twentyseventeen-child-cvonk/style.css' media='all' />
<link rel='stylesheet' id='twentyseventeen-block-style-css'  href='../../wp-content/themes/twentyseventeen/assets/css/blocks.css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyseventeen-ie8-css'  href='https://coertvonk.com/wp-content/themes/twentyseventeen/assets/css/ie8.css' media='all' />
<![endif]-->
<link rel='stylesheet' id='fancybox-css'  href='../../wp-content/plugins/easy-fancybox/css/jquery.fancybox.min.css' media='screen' />
<style id='fancybox-inline-css'>
#fancybox-content{border-color:#fff;}
</style>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js' id='jquery-js'></script>
<script src='../../wp-content/plugins/google-analytics-dashboard-for-wp/assets/js/frontend-gtag.min.js' id='exactmetrics-frontend-script-js'></script>
<script data-cfasync="false" data-wpfc-render="false" id='exactmetrics-frontend-script-js-extra'>var exactmetrics_frontend = {"js_events_tracking":"true","download_extensions":"zip,mp3,mpeg,pdf,docx,pptx,xlsx,rar","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/coertvonk.com","hash_tracking":"false","ua":"UA-86942534-1","v4_id":"G-EN4Z6WHGH4"};</script>
<script id='cookie-law-info-js-extra'>
var Cli_Data = {"nn_cookie_ids":[],"cookielist":[],"non_necessary_cookies":[],"ccpaEnabled":"1","ccpaRegionBased":"","ccpaBarEnabled":"","strictlyEnabled":["necessary","obligatoire"],"ccpaType":"ccpa_gdpr","js_blocking":"1","custom_integration":"","triggerDomRefresh":"","secure_cookies":""};
var cli_cookiebar_settings = {"animate_speed_hide":"500","animate_speed_show":"500","background":"#FFF","border":"#b1a6a6c2","border_on":"","button_1_button_colour":"#61a229","button_1_button_hover":"#4e8221","button_1_link_colour":"#fff","button_1_as_button":"1","button_1_new_win":"","button_2_button_colour":"#333","button_2_button_hover":"#292929","button_2_link_colour":"#444","button_2_as_button":"","button_2_hidebar":"1","button_3_button_colour":"#dedfe0","button_3_button_hover":"#b2b2b3","button_3_link_colour":"#333333","button_3_as_button":"1","button_3_new_win":"","button_4_button_colour":"#dedfe0","button_4_button_hover":"#b2b2b3","button_4_link_colour":"#333333","button_4_as_button":"1","button_7_button_colour":"#61a229","button_7_button_hover":"#4e8221","button_7_link_colour":"#fff","button_7_as_button":"1","button_7_new_win":"","font_family":"inherit","header_fix":"","notify_animate_hide":"1","notify_animate_show":"","notify_div_id":"#cookie-law-info-bar","notify_position_horizontal":"right","notify_position_vertical":"bottom","scroll_close":"","scroll_close_reload":"","accept_close_reload":"","reject_close_reload":"","showagain_tab":"","showagain_background":"#fff","showagain_border":"#000","showagain_div_id":"#cookie-law-info-again","showagain_x_position":"100px","text":"#333333","show_once_yn":"","show_once":"10000","logging_on":"","as_popup":"","popup_overlay":"1","bar_heading_text":"","cookie_bar_as":"banner","popup_showagain_position":"bottom-right","widget_position":"left"};
var log_object = {"ajax_url":"https:\/\/coertvonk.com\/wp-admin\/admin-ajax.php"};
</script>
<script src='../../wp-content/plugins/cookie-law-info/public/js/cookie-law-info-public.js' id='cookie-law-info-js'></script>
<script id='cookie-law-info-ccpa-js-extra'>
var ccpa_data = {"opt_out_prompt":"Do you really wish to opt out?","opt_out_confirm":"Confirm","opt_out_cancel":"Cancel"};
</script>
<script src='../../wp-content/plugins/cookie-law-info/admin/modules/ccpa/assets/js/cookie-law-info-ccpa.js' id='cookie-law-info-ccpa-js'></script>
<script src='../../wp-content/plugins/svg-support/js/min/svgs-inline-min.js' id='bodhi_svg_inline-js'></script>
<script id='bodhi_svg_inline-js-after'>
cssTarget="img.style-svg";ForceInlineSVGActive="false";
</script>
<!--[if lt IE 9]>
<script src='https://coertvonk.com/wp-content/themes/twentyseventeen/assets/js/html5.js' id='html5-js'></script>
<![endif]-->
<link rel="https://api.w.org/" href="../../wp-json/index.html" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/tags/475" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php@rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.9.3" />

<!-- Bad Behavior 2.2.24 run time: 2.705 ms -->
<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><link rel="icon" href="../../wp-content/uploads/cropped-cropped-site-logo-1-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/cropped-cropped-site-logo-1-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/cropped-cropped-site-logo-1-180x180.png" />
<meta name="msapplication-TileImage" content="https://coertvonk.com/wp-content/uploads/cropped-cropped-site-logo-1-270x270.png" />
</head>

<body class="archive tag tag-logic tag-475 wp-custom-logo wp-embed-responsive group-blog hfeed has-header-image page-one-column colors-light">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="index.html#content">Skip to content</a>

	<header id="masthead" class="site-header" role="banner">

		<div class="custom-header">

		<div class="custom-header-media">
			<div id="wp-custom-header" class="wp-custom-header"><img src="../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS.jpg" width="2000" height="1466" alt="" srcset="https://coertvonk.com/wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS.jpg 2000w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-400x293.jpg 400w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-768x563.jpg 768w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-1024x751.jpg 1024w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-250x183.jpg 250w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-300x220.jpg 300w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-350x257.jpg 350w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-500x367.jpg 500w, ../../wp-content/uploads/cropped-IMG_20170303_113335-EFFECTS-750x550.jpg 750w" sizes="100vw" /></div>		</div>

	<div class="site-branding">
	<div class="wrap">

		<a href="../../index.html" class="custom-logo-link" rel="home"><img width="333" height="250" src="../../wp-content/uploads/cropped-site-logo.png" class="custom-logo" alt="Coert Vonk" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a>
		<div class="site-branding-text">
							<p class="site-title"><a href="../../index.html" rel="home">Coert Vonk</a></p>
			
							<p class="site-description">Embedded Software Engineer</p>
					</div><!-- .site-branding-text -->

		
	</div><!-- .wrap -->
</div><!-- .site-branding -->

</div><!-- .custom-header -->

					<div class="navigation-top">
				<div class="wrap">
					<nav id="site-navigation" class="main-navigation" aria-label="Top Menu">
	<button class="menu-toggle" aria-controls="top-menu" aria-expanded="false">
		<svg class="icon icon-bars" aria-hidden="true" role="img"> <use href="#icon-bars" xlink:href="#icon-bars"></use> </svg><svg class="icon icon-close" aria-hidden="true" role="img"> <use href="#icon-close" xlink:href="#icon-close"></use> </svg>Menu	</button>

	<div class="menu-main-container"><ul id="top-menu" class="menu"><li id="menu-item-30562" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-30562"><a href="../../category/inquiries.1.html">Inquiries<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
<ul class="sub-menu">
	<li id="menu-item-30563" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-30563"><a href="../../category/inquiries/computer-math.html">How do computers do math?</a></li>
	<li id="menu-item-30564" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-30564"><a href="../../category/inquiries/how-cpu-work.html">How does a CPU work?</a></li>
	<li id="menu-item-31448" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-31448"><a href="../../category/inquiries/presentations.html">Presentations</a></li>
</ul>
</li>
<li id="menu-item-21324" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-21324"><a href="../../category/math.1.html">Math<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
<ul class="sub-menu">
	<li id="menu-item-21327" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-21327"><a href="../../category/math/pre-calc.html">Precalculus</a></li>
	<li id="menu-item-21329" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-21329"><a href="../../category/math/calculus.html">Calculus</a></li>
	<li id="menu-item-27992" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-27992"><a href="../../category/math/multivariable-calculus.1.html">Multivariable calculus<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
	<ul class="sub-menu">
		<li id="menu-item-27998" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-27998"><a href="../../category/math/multivariable-calculus/linear-algebra.html">Linear Algebra</a></li>
		<li id="menu-item-28886" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28886"><a href="../../category/math/multivariable-calculus/in-the-plane.html">Line integrals (in the plane)</a></li>
		<li id="menu-item-28887" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28887"><a href="../../category/math/multivariable-calculus/in-space.html">Surface integrals (in space)</a></li>
	</ul>
</li>
</ul>
</li>
<li id="menu-item-29237" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-29237"><a href="../../category/physics.1.html">Physics<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
<ul class="sub-menu">
	<li id="menu-item-29169" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-29169"><a href="../../category/physics/electromagnetism.1.html">Electromagnetism<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
	<ul class="sub-menu">
		<li id="menu-item-29758" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-29758"><a href="../../category/physics/electromagnetism/electricity.html">Electricity</a></li>
		<li id="menu-item-29762" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-29762"><a href="../../category/physics/electromagnetism/magnetism.html">Magnetism</a></li>
	</ul>
</li>
	<li id="menu-item-20900" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-20900"><a href="../../category/physics/lfz-transforms.1.html">LFZ transforms<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
	<ul class="sub-menu">
		<li id="menu-item-29570" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-29570"><a href="../../category/physics/lfz-transforms/foundations.html">Foundations</a></li>
		<li id="menu-item-29572" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-29572"><a href="../../category/physics/lfz-transforms/laplace.html">Laplace transform</a></li>
		<li id="menu-item-29573" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-29573"><a href="../../category/physics/lfz-transforms/fourier.html">Fourier transform</a></li>
		<li id="menu-item-29571" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-29571"><a href="../../category/physics/lfz-transforms/z.html">Z-transform</a></li>
	</ul>
</li>
	<li id="menu-item-20902" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-20902"><a href="../../category/physics/rlc-filters.1.html">RLC filters<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
	<ul class="sub-menu">
		<li id="menu-item-31034" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-31034"><a href="../../category/physics/rlc-filters/rc-low-pass-filter.html">RC low-pass filter</a></li>
		<li id="menu-item-31064" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-31064"><a href="../../category/physics/rlc-filters/rlc-low-pass-filter.html">RLC low-pass filter</a></li>
		<li id="menu-item-31065" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-31065"><a href="../../category/physics/rlc-filters/rlc-resonator.html">RLC resonator</a></li>
		<li id="menu-item-31497" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-31497"><a href="../../category/physics/rlc-filters/rl-high-pass-filter.html">RL high-pass filter</a></li>
	</ul>
</li>
</ul>
</li>
<li id="menu-item-20894" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-20894"><a href="../../category/sw.1.html">Software<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
<ul class="sub-menu">
	<li id="menu-item-21859" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-21859"><a href="../../category/sw/filters-sw.html">Discrete filters</a></li>
	<li id="menu-item-20898" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20898"><a href="../../category/sw/embedded.1.html">Embedded</a></li>
	<li id="menu-item-32747" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-32747"><a href="../../category/sw/arduino.1.html">Arduino</a></li>
	<li id="menu-item-20901" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20901"><a href="../../category/sw/networking.html">Networking (IP)</a></li>
	<li id="menu-item-20905" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20905"><a href="../../category/sw/application.html">Application</a></li>
	<li id="menu-item-20895" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20895"><a href="../../category/sw/hp41.1.html">Calculator (HP-41)</a></li>
</ul>
</li>
<li id="menu-item-20893" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-20893"><a href="../../category/hw.1.html">Hardware<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
<ul class="sub-menu">
	<li id="menu-item-20899" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20899"><a href="../../category/hw/logic.html">Logic (Verilog)</a></li>
	<li id="menu-item-30787" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-30787"><a href="../../category/hw/building-math-circuits.html">Building math circuits</a></li>
	<li id="menu-item-30807" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-30807"><a href="../../category/hw/math-talk.html">Math talk</a></li>
	<li id="menu-item-21331" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-21331"><a href="../../category/hw/parts.html">Parts</a></li>
</ul>
</li>
<li id="menu-item-20913" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-20913"><a href="../../category/other.1.html">Other<svg class="icon icon-angle-down" aria-hidden="true" role="img"> <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use> </svg></a>
<ul class="sub-menu">
	<li id="menu-item-20903" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20903"><a href="../../category/sw/app/3d-modeling.html">3D Modeling</a></li>
	<li id="menu-item-20906" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20906"><a href="../../category/other/ramblings.html">Ramblings</a></li>
	<li id="menu-item-20897" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20897"><a href="../../category/other/videoediting.html">Video Editing</a></li>
	<li id="menu-item-32743" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-32743"><a href="../../category/other/american-robin.html">American Robin</a></li>
</ul>
</li>
</ul></div>
	</nav><!-- #site-navigation -->
				</div><!-- .wrap -->
			</div><!-- .navigation-top -->
		
	</header><!-- #masthead -->
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-86942534-1"></script>
	<script>
	 window.dataLayer = window.dataLayer || [];
	 function gtag(){dataLayer.push(arguments);}
	 gtag('js', new Date());	 
	 gtag('config', 'UA-86942534-1');
	</script>
	
	
	<div class="site-content-contain">
		<div id="content" class="site-content">

<div class="wrap">

			<header class="page-header">
			<h1 class="page-title">logic</h1>		</header><!-- .page-header -->
	
	<div id="primary" class="content-area">
		<main id="main" class="site-main">

					
<article id="post-15932" class="post-15932 post type-post status-publish format-standard has-post-thumbnail hentry category-logic tag-ide tag-logic tag-verilog wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html" rel="bookmark">Starting with Altera</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html" rel="bookmark"><time class="entry-date published" datetime="2016-10-13T09:30:21-07:00">2016-10-13</time><time class="updated" datetime="2022-05-03T13:00:33-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html">
				<img width="200" height="200" src="../../wp-content/uploads/spi-ne0-nano3.jpg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="" loading="lazy" srcset="../../wp-content/uploads/spi-ne0-nano3.jpg 200w, ../../wp-content/uploads/spi-ne0-nano3-100x100.jpg 100w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    A short introduction to compiling, simulating and uploading using the Altera Quartus development environment for the Cyclone IV on a DE0-Nano board.
</p>
<p>A (relatively) short introduction to compiling, simulating and uploading using the Altera Quartus development environment for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Terasic Altera Cyclone IV DE0-Nano</a> under Windows 10.  An <a href="../../hw/logic/ise-spartan6-lx9-12604.1.html">equivalent tutorial</a> is available for the reader who prefers Xilinx based boards.</p>
<h2>Install the FPGA Design Suite</h2>
<p>Start by installing the free Quartus Prime Lite, this includes the IDE and required tool chain to create configuration files for the Altera FPGA.</p>
<ol>
<li>Install Quartus Prime Lite 21.1 (>16.1)
<ul>
<li>Download the Quartus Prime Lite Edition from <a href="https://www.intel.com/content/www/us/en/collections/products/fpga/software/downloads.html?edition=lite&#038;s=Newest">altera.com</a></li>
<li>Unpack <code>Quartus-lite-21.1.0.842-windows.tar</code>; run the <code>setup.bat</code> and install to a path without spaces in the name (e.g. <code>C:\intelFPGA_lite\21.1</code>)</li>
<li>Include device support for <em>Cyclone IV</em> and<em> Questa &#8211; Intel FPGA Starter Edition (was: ModelSim-Altera Starter Edition).</em></li>
<li>Select <em>USB Blaster II driver (JTAG)</em> installation</li>
<li>Run the Quartus Prime software
    </ul>
</li>
<li>Run the Quartus Prime 21.1 Device Installer
<ul>
<li>install <em>Cyclone IV</em> and <em>ModelSim-Altera Starter</em> support</li>
</ul>
</li>
</ol>
<p>The USB Blaster driver needs some finishing up</p>
<ol>
<li>Use a USB cable to connect your computer to the NE0-Nano board</li>
<li>Go in Window&#8217;s Device Manager
<ul>
<li>Right-click <em>Other devices » USB-Blaster » Update Driver Software</em></li>
<li>Browse my computer for driver software at <code>C:\intelFPGA_lite\21.1<br />
      </code></li>
</ul>
</li>
</ol>
<h2>Install Board Support for DE0-Nano</h2>
<p>The Terasic board support for DE0-Nano includes examples, user manual and the Terasic System Builder tool.</p>
<ul>
<li>Download DE0-Nano CD-ROM from <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;CategoryNo=165&#038;No=593&#038;PartNo=4">terasic.com.tw</a> and unzip to a directory of your liking (e.g. <code>C:\intelFPGA_lite\DE0-Nano</code>)</li>
</ul>
<p>Note that its Control Panel fails with <em>Load DLL (TERASIC_JTAG_DRIVE.dll)</em> under 64-bit Windows.  No biggie, we do not need it.</p>
<h2 id="beforeyoustart">Before you start</h2>
<blockquote><p>The simulator doesn&#8217;t play well with UNC paths (e.g. network shares). It triggers numerous errors and may cause timing simulations to disregard delays. Keeping the files on the server is fine, for as long as you access them through a symbolic link.  To create a symbolic link, change to your home directory and create a symbolic link to your file server (in an elevated Power-Shell window do <code>cd ~ ; New-Item -ItemType SymbolicLink -Path "Hardware.sym" -Target "\\server\path\to\files"</code>).</p></blockquote>
<p>If you add the symbolic link to Explorer&#8217;s <em>Quick Access</em>, it will resolve the link first.  To work around this, first create a regular directory and add that to the Quick Access. Then replace that directory with the symbolic link.</p>
<p>A few last tip before you take off:</p>
<p style="padding-left: 30px;">Stay clear of absolute path names.  Not only do they cause havoc when moving a project to a new directory, but they also confuse the simulator.  If the ellipsis (<code>…</code>) file selector returns an absolute path, simply edit it to make the file relative to the project directory.  E.g. change <code>\C:\Users\you\path\project.v</code> to <code>project.v</code>.  If you want to quickly change all absolute paths, I suggest closing Quartus and pulling <code>.qsf</code> into an text editor (e.g. <code>emacs</code>).</p>
<p style="padding-left: 30px;">Lastly, store the files on a local drive.  It makes the process of compiling much faster.</p>
<h2>Build a circuit</h2>
<p>Terasic advises to start with their System Builder to reduce the risk of damaging the board by incorrect I/O settings.  I will throw this caution to the wind and use an example Quartus Setting file instead</p>
<p>Start Quartus Prime and create a new project</p>
<ul>
<li>File » New <span style="text-decoration: underline;">Project Wizard</span>
<ul>
<li>Choose a working directory (.<code>c:\users\you\whatever\example1</code>); project name = <code>example1</code></li>
<li>Project type = Empty Project</li>
<li>do not add files</li>
<li>Family = <code>Cyclone IV E</code>; name filter = <code>EP4CE22F17C6</code>; click the only device that matches</li>
<li>Finish, accepting the default EDA Tools Settings</li>
</ul>
</li>
</ul>
<p>Start with a Verilog HDL module that tests if inputs are equal (File » New » Design file > Verilog HDL, and later save it as <code>eq1.v</code>)</p>
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 1ps
module eq1( input i0, input i1, output eq ); 
    wire p0, p1; // internal signal declaration
    assign eq = p0 | p1; 
    assign p0 = ~i0 & ~i1;
    assign p1 = i0 & i1; 
endmodule</pre>
<p>Add a Verilog HDL module (File » New » Design file > Verilog HDL, and later save it as <code>eq2.v</code>)</p>
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 1ps
module eq2( input [1:0] a, input [1:0] b, output aeqb ); 
    wire e0, e1; // internal signal declaration
    eq1 eq_bit0_unit(.i0(a[0]), .i1(b[0]), .eq(e0));
    eq1 eq_bit1_unit(.i0(a[1]), .i1(b[1]), .eq(e1));
    assign aeqb = e0 & e1; // a and b are equal if individual bits are equal
endmodule</pre>
<p>For the top level, we will use a schematic.  Create a symbol file (<code>eq2.sym</code>) for the <code>eq2</code> module so we can reference it in the schematic.</p>
<ul>
<li>File » Create/Update » Create Symbol Files for Current File</li>
</ul>
<p>Create the top level schematic</p>
<ul>
<li>File » New » Design file » Block Diagram/Schematic</li>
<li>File » Save as » <code>example1.bdf</code></li>
<li>Make sure that this top-level module has the same name as its source file and is the same name as your project name.</li>
<li>Update the block diagram (<code>.bdf</code>)
<ul>
<li>select the block diagram tab</li>
<li>place the new symbol
<ul>
<li>double-click the canvas</li>
<li>expand the project directory and select the <code>eq2.sym</code> file that we just created</li>
<li>place the symbol in the block diagram</li>
</ul>
</li>
<li>add inputs
<ul>
<li>double-click the canvas</li>
<li>expand the libraries directory and select &#8220;primitive » pin » input&#8221;</li>
<li>place the pin so that it touches input <code>a</code></li>
<li>change the pin name to <code>SWITCH[1..0]</code></li>
<li>copy and paste the input pin, and place it so that it touches input <code>b</code></li>
<li>change the pin name to <code>SWITCH[3..2]</code></li>
</ul>
</li>
<li>add output
<ul>
<li>double-click the canvas</li>
<li>expand the libraries directory and select &#8220;primitive » pin » output&#8221;</li>
<li>place it so it touches output <code>aeqb</code> (a equals b)</li>
<li>change the pin name to <code>LED[0]</code></li>
</ul>
</li>
</ul>
</li>
<li>Last, but not least: Mark this file as the top-level module
<ul>
<li>Right-click the file name, and select &#8220;Set as Top-Level Entry&#8221;</li>
</ul>
</li>
</ul>
<p>Compile</p>
<ul>
<li>Processing » Start » Start Analysis &#038; Elaboration</li>
</ul>
<h2>Implementation Constraints</h2>
<p>Time to constrain the implementation by specifying the input and output pins along with timing requirements.</p>
<h3>External pins assignments</h3>
<ul>
<li>Assignments » Pin Planner
<ul>
<li>This will show the five I/O pins</li>
<li>Don&#8217;t worry about the Fitter Location, it is just whatever the fitter chose last time</li>
<li>Double-click the Location field next each of the pin names to add the pin numbers (based on Table 3-2 and 3-3 in the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;CategoryNo=139&#038;No=593&#038;PartNo=4">Terasic board&#8217;s user manual</a>)<br />
	<code>  LED[0]     PIN_A15</code><br />
	<code>  SWITCH[3]  PIN_M15</code><br />
	<code>  SWITCH[2]  PIN_B9</code><br />
	<code>  SWITCH[1]  PIN_T8</code><br />
	<code>  SWITCH[0]  PIN_M1</code></li>
<li>Change the I/O standard to <code>3.3V_LVTTL</code> based on the same user manual (change the first one, then copy and paste)</li>
</ul>
</li>
</ul>
<p>You should end up with something like</p>
<div class="align-center">
<figure><a class="hide-anchor fancybox" href="../../wp-content/uploads/altera-intro-pins.png"><img  title="" class="aligncenter size-full wp-image-16299" src="../../wp-content/uploads/altera-intro-pins.png" alt="altera-intro-pins" width="1031" srcset="https://coertvonk.com/wp-content/uploads/altera-intro-pins.png 1031w, ../../wp-content/uploads/altera-intro-pins-400x47.png 400w, ../../wp-content/uploads/altera-intro-pins-768x90.png 768w, ../../wp-content/uploads/altera-intro-pins-1024x120.png 1024w, ../../wp-content/uploads/altera-intro-pins-250x29.png 250w, ../../wp-content/uploads/altera-intro-pins-300x35.png 300w, ../../wp-content/uploads/altera-intro-pins-350x41.png 350w, ../../wp-content/uploads/altera-intro-pins-500x59.png 500w, ../../wp-content/uploads/altera-intro-pins-750x88.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a><figcaption>Pin assignments</figcaption></figure>
</div>
<p>If you plan to branch out, I suggest downloading and importing the settings file (<code>.qsf</code>) with pin assignments from <a href="https://www.intel.com/content/www/us/en/developer/articles/technical/fpga-academic-boards.html#de0-nano">university.altera.com</a>.</p>
<h3>Timing requirements</h3>
<p>For most design you will want to specify timing requirements.  For our simple example however we will not do this.</p>
<p>For the record, to request specific timing requirements (default time quest) you would create Synopsys Design Constraints (File » New SCD File) and save it with the same base name as the top level file (e.g. <code>example1.sdc</code>).  For our example it just contains some comments as a reminder.</p>
<pre class="brush: plain; gutter: true; title: ; toolbar: false; notranslate" title="">#create_clock -period 20.000 -name CLOCK_50
#derive_pll_clocks
#derive_clock_uncertainty</pre>
<p style="text-align: right;">For more info, refer to Altera&#8217;s class <a href="https://www.intel.com/content/www/us/en/support/programmable/support-resources/overview.html">Constraining Source Synchronous Interfaces</a>.</p>
<h2>Synthesize and upload to FPGA</h2>
<p>Before moving ahead, I like to shorten the path names in the Quartus Settings file (<code>.qsf</code>).  This prevents problems when you move the project and especially when you have it stored on a file server.  As we will see later, the ModelSim simulator doesn&#8217;t support UNC path names, but will honor relative paths even when the projects is on a file server.</p>
<ul>
<li>Assignments » Settings
<ul>
<li>Remove the files (<code>.bdf, .v, .sdc</code>)</li>
<li>Add the files back in.  After selecting each file using the ellipsis (<em>…</em>) file selector, edit the resulting path name to exclude the path and press <em>Add</em>.</li>
</ul>
</li>
<li>Project Navigator
<ul>
<li>Right-click <code>example1.v</code> and choose <em>Set as Top-Level Entry</em></li>
</ul>
</li>
<li>Alternatively, you can close Quartus and pull the <code>.qsf</code> file in a text editor (e.g. Emacs) and shorten the path names (<code>*_FILE</code>) at the end of the file.</li>
</ul>
<p>Let us move ahead and generate the binary SRAM Object File (<code>.sof</code>).  This is the configuration file to be uploaded to the FPGA</p>
<ul>
<li>Click <em>Compile Design</em> in the <em>Tasks</em> window, or press the <em>Play</em> button in the toolbar.
<ul>
<li>The Compilation Report tab shows the result</li>
<li>Correct any critical warnings or errors</li>
</ul>
</li>
</ul>
<p>This would be <em>the</em> moment to do a timing analysis and/or simulation.  However, at this point I&#8217;m simply too curious to see if it works just out of the box, so let&#8217;s give it a shot.</p>
<p>Connect the DE0-Nano board with a USB cable and upload the configuration file to the FPGA SRAM. (Alternately <a href="https://unboxnbeyond.wordpress.com/2013/05/11/configuring-de0-nano-epcs64-flash-device/">upload to Flash</a>)</p>
<ul>
<li>Quartus Prime Lite » Tools » Programmer (or double-click Program Device in the task list)
<ul>
<li>Click Hardware Setup, and select <em>USB-Blaster [USB-0]</em></li>
<li>Click Add File, and select your SRAM object file (<code>.sof</code>) in the <code>output_files</code> directory</li>
<li>Click Start</li>
<li>Save as <code>example1.cdf</code>, so it opens with these settings next time</li>
<li>Great!  We did it, the design is now on the FPGA (until we remove the power)</li>
</ul>
</li>
</ul>
<h2>Give it a spin</h2>
<p>With the FPGA configured, time has come to test it</p>
<ul>
<li>Input is through the DIP switches (<code>SWITCH</code>) on the bottom-left of the board.</li>
<li>Output is the right LED (<code>LED[0]</code>) located at the top of the board.</li>
<li>We expect the LED to be &#8220;on&#8221; when switch positions <code>0</code> and <code>1</code> are identical to positions <code>2</code> and <code>3</code>.</li>
</ul>
<p>If you prefer bigger switches, you can wire up a breadboard to the GPIO-0 connector.</p>
<ul>
<li>V<sub>CC</sub>3p3 and Ground are available on the 40-pin expansion header at respectively pin 29 and 12 (or 30) as specified in the board manual.</li>
<li><code><img loading="lazy" class="alignright wp-image-16304 " src="../../wp-content/uploads/welldone.jpg" alt="welldone" width="108" height="130">GPIO_00, 01, 02, 03</code> are on FPGA BGA pins at respectively <code>D3, C3, A2, A3</code> and on the 40-pin expansion header at respectively pin <code>2, 4, 5</code> and <code>6</code>.</li>
<li>Modify the user constraints file accordingly.</li>
</ul>
<p>Give yourself a pat on the back; you have achieved something new today!</p>
<h2>Timing Analysis</h2>
<p>With the first hurdle cleared, we are going to take a closer look at the circuit. The first step will analyze the delays in the circuit to determine the conditions under which the circuit operates reliably.  We will follow up with a functional and timing simulation.</p>
<p>If you just want to the timing information on the port-to-port path, you can use</p>
<ul>
<li>Task » Reports » Custom Reports » Report Timing
<ul>
<li>From » click <code>...</code>
<ul>
<li>Collection = <code>get_ports</code>; List; select <code>SWITCH[0]</code> through <code>SWITCH[3]</code>; click &#8216;<code>></code>&#8216;</li>
</ul>
</li>
<li>To » click <code>...</code>
<ul>
<li>Collection = <code>get_ports</code>; List; select <code>LED[0]</code>; click &#8216;<code>></code>&#8216;</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>To place timing constraints on the port-to-port paths:</p>
<ul>
<li>Tools » TimeQuest Timing Analyzer
<ul>
<li>Tasks » Update Timing Netlist ; double-click
<ul>
<li>Constraints » Set Maximum Delay</li>
<li>From » click <code>...</code>
<ul>
<li>Collection = <code>get_ports</code>; List; select <code>SWITCH[0]</code> through <code>SWITCH[3]</code>; click &#8216;<code>></code>&#8216;</li>
</ul>
</li>
<li>To » click <code>...</code>
<ul>
<li>Collection = <code>get_ports</code>; List; select <code>LED[0]</code>; click &#8216;<code>></code>&#8216;</li>
</ul>
</li>
<li>Delay value = 100 ns (more or less random value)</li>
<li>Run</li>
</ul>
</li>
<li>Constraints » Write SDC File to <code>example1.sdc</code></li>
<li>Task » Reports » Custom Reports » Report Timing
<ul>
<li>no need to specify the path, just click <code>Report Timing</code></li>
<li>this reveals a Data Delay of about 6.7 ns.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>If you want Quartus to meet more stringent restrains, you need to specify these and recompile.  This will direct Quartus to seek an implementation that meets these constraints.  However, in this case we only specified restraints because we&#8217;re interested in the values.  [<a href="https://community.intel.com/t5/FPGA-Wiki/The-board-support-package-of-Cyclone-V-GT-Development-Kit/ta-p/735548">TimeQuest User Guide</a>]</p>
<h2>Functional Simulation</h2>
<p><img loading="lazy" class="alignright wp-image-16344" src="../../wp-content/uploads/functional.png" alt="functional" width="69" height="69" srcset="https://coertvonk.com/wp-content/uploads/functional.png 128w, ../../wp-content/uploads/functional-100x100.png 100w" sizes="(max-width: 69px) 100vw, 69px" />The Verilog HDL (<code>.v</code>) instructions are compiled (Analysis and Synthesis) into Register Transfer Logic (RTL) netlists, called Compiler Database Files (<code>.cdb</code>). As the name implies, data is moved through gates and register, typically subject to some clocking condition.  A functional simulation tests the circuit at this RTL level.  As such it will simulate the functionality, but not the propagation delays.</p>
<p>Altera Quartus ships bundled with their flavor of ModelSim that lets you draw waveforms for the signals going to the module under test.  You can then save these waveforms as a wave.do file or HDL test bench.  For this example we to skip the step of drawing waveforms, and jump straight to using test benches.</p>
<p>Start by creating a test bench (<code>eq2_tb.v</code>) that instantiate module under test and drive its inputs.  As before, you should remove the path from the file name (Assignments » Settings » Files).</p>
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 100ps
`default_nettype none

module eq2_tb;
  reg [1:0] a;  // inputs
  reg [1:0] b; 
  wire aeqb;  // output
 
  // Instantiate the Device Under Test (UUT)
  eq2 dut ( .a(a), 
            .b(b), 
            .aeqb(aeqb) );
  initial begin
    a = 0;  // initialize inputs
    b = 0;
 
    #100;  // wait 100 ns for global reset to finish (Xilinx only?)
         
    // stimulus starts here
    a = 2'b00; b = 2'b00; #10 $display("%b", aeqb);
    a = 2'b01; b = 2'b00; #10 $display("%b", aeqb);
    a = 2'b01; b = 2'b11; #10 $display("%b", aeqb);
    a = 2'b10; b = 2'b10; #10 $display("%b", aeqb);
    a = 2'b10; b = 2'b00; #10 $display("%b", aeqb);
    a = 2'b11; b = 2'b11; #10 $display("%b", aeqb);
    a = 2'b11; b = 2'b01; #10 $display("%b", aeqb);
    #200 $stop;
   end
endmodule</pre>
<p>Configure Quartus to create a script that compiles the test bench and modules for ModelSim</p>
<ul>
<li>Assignments » Settings » EDA Tool Settings » Simulation » Compile test bench
<ul>
<li>New</li>
<li>Test bench name = <code>Functional test bench</code></li>
<li>Top level module in test bench = <code>eq2_tb</code></li>
<li>File name  = <code>eq2_tb.v, eq1.v, eq2.v</code> (name the test bench and all the modules that ModelSim needs to compile). After selecting each file using the ellipsis (<em>…</em>) file selector, edit the resulting path name to exclude the project path, then press <em>Add.</em></li>
</ul>
</li>
</ul>
<p>If things don&#8217;t go your way, please check:</p>
<ul>
<li>I strongly suggest putting the test bench in a separate file, when doing timing simulations.  This keeps ModelSim from using the <code>.v</code> file instead of the <code>.vo</code> file what causes propagation delays not to show in timing simulations.</li>
<li>(sdfcomp-7)<em> Failed to open SDF file &#8220;whatever.sdo&#8221; in read mode</em> is most likely caused by the files residing on a UNC path. Refer to the quote at the <a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html#beforeyoustart">beginning of this article</a>.</li>
<li><em>(sdfcomp-14) Failed to open &#8220;modelsim.ini&#8221; specified by the MODELSIM environment variable</em> is also most likely caused by the files residing on a UNC path. Refer to the quote at the <a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html#beforeyoustart">beginning of this article</a>.</li>
<li>When you get <em>error deleting &#8220;msim_transcript&#8221; permission denied</em>, close ModelSim first before starting it.</li>
<li>Errors like <em>Instantiation of &#8216;cycloneive_io_obuf&#8217; failed. The design unit was not found </em>indicate that the global libraries <code>altera_ver</code> or<code> cycloneive_ver</code> were not included in Assignments » Settings » Libraries.</li>
<li>Keep in mind that the <a href="https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file">Windows filename limit</a> (260) may be exceeded.</li>
<li>To prevent <em>Warning: (vsim-WLF-5000) WLF file currently in use: vsim.wlf</em>, quit ModelSim and delete <code>simulation/modelsim/sim.wlf</code> and <code>simulation/modelsim/wlft*</code>.</li>
</ul>
<p>Compile the circuit to RTL netlists</p>
<ul>
<li>Processing » Start » Start Analysis &#038; Elaboration</li>
</ul>
<p>Start the simulation</p>
<ul>
<li>Tools » Simulation Tool » RTL Simulation</li>
<li>Select signals of interest
<ul>
<li>Objects » select the signals of interest » Add Wave (or the green circle with the + sign)</li>
<li>In the text field in the toolbar, change the simulation time from <code>1 ps</code> to <code>200 ns</code> and click the <em>run</em> button to the right (or type <code>run 1 us </code>at the command prompt)</li>
<li>Undock the Wave Window (icon on the far top right of the window).  In case the Wave Window is hidden, use Windows » Wave.</li>
<li>Click &#8220;zoom full&#8221; and observe the simulated waveforms.</li>
</ul>
</li>
</ul>
<p>You should see something like</p>
<div class="align-center">
<figure><a class="hide-anchor fancybox" href="../../wp-content/uploads/snip.png"><img class="size-full wp-image-16337" src="../../wp-content/uploads/snip.png" alt="own work" width="851" srcset="https://coertvonk.com/wp-content/uploads/snip.png 851w, ../../wp-content/uploads/snip-400x56.png 400w, ../../wp-content/uploads/snip-768x108.png 768w, ../../wp-content/uploads/snip-250x35.png 250w, ../../wp-content/uploads/snip-300x42.png 300w, ../../wp-content/uploads/snip-350x49.png 350w, ../../wp-content/uploads/snip-500x71.png 500w, ../../wp-content/uploads/snip-750x106.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a><figcaption>Snip</figcaption></figure>
</div>
<p>If you make a change to either your DUT or your test bench</p>
<ul>
<li>right-click the test bench and select <code>recompile</code>.</li>
<li>make sure that you click the Restart button directly to the right of the simulation time window (or simply type <code>restart</code> at the command prompt).</li>
</ul>
<p style="text-align: right;">For more information, refer to  <a href="https://www.intel.com/content/dam/www/programmable/us/en/pdfs/literature/hb/qts/qts_qii5v3.pdf">Quartus II Handbook 3: Verification</a></p>
<h2>Timing Simulation</h2>
<p><img loading="lazy" class="alignright wp-image-16343" src="../../wp-content/uploads/timing.png" alt="timing" width="65" height="65" srcset="https://coertvonk.com/wp-content/uploads/timing.png 121w, ../../wp-content/uploads/timing-100x100.png 100w" sizes="(max-width: 65px) 100vw, 65px" />Before you start a timing simulation, first close ModelSim.</p>
<p>After compiling your circuit into RTL netlists (<code>.cdb</code>), it is fitted to the physical device (<code>.qsf</code>) trying to satisfy resource assignments and constraints.  It then attempts to optimize the remaining logic.  The Netlist Writer can export this information for ModelSim in the form of Verilog Output Files (.vo), Standard Delay Format Output Files (<code>.sdo</code>) and scripts to prepare ModelSim through compilation and initialization.</p>
<p>For this exercise, we will do a timing simulation for the whole system.  With our top-level entry being a schematic (<code>.bdf</code>), we first need to convert this to Verilog HDL</p>
<ul>
<li>Open the schematic</li>
<li>File » Create/Update » Create HDL Design File from Current File
<ul>
<li>File type = <code>Verilog HDL</code></li>
</ul>
</li>
<li>Assignments » Settings » Files
<ul>
<li>replace the <code>example1.bdf</code> file with <code>example1.v</code></li>
</ul>
</li>
<li>Make it the top-level module (so much for using a schematic &#8230; eh)</li>
</ul>
<p>Create a system test bench (<code>example1_tb.v</code>). As before, you should remove the path from the file name (Assignments » Settings » Files).</p>
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 100ps
`default_nettype none

module example1_tb;
  reg [3:0] SWITCH;  // inputs
  wire LED;          // output
 
  example1 uut ( .SWITCH(SWITCH), 
                 .LED(LED) );
  initial begin
    SWITCH[3:0] = 2'b0000; // initialize inputs
 
    #100;  // wait 100 ns for global reset to finish (Xlinx only?)
         
    // stimulus starts here
    SWITCH[1:0] = 2'b00; SWITCH[3:2] = 2'b00; #10 $display("%b", LED);
    SWITCH[1:0] = 2'b01; SWITCH[3:2] = 2'b00; #10 $display("%b", LED);
    SWITCH[1:0] = 2'b01; SWITCH[3:2] = 2'b11; #10 $display("%b", LED);
    SWITCH[1:0] = 2'b10; SWITCH[3:2] = 2'b10; #10 $display("%b", LED);
    SWITCH[1:0] = 2'b10; SWITCH[3:2] = 2'b00; #10 $display("%b", LED);
    SWITCH[1:0] = 2'b11; SWITCH[3:2] = 2'b11; #10 $display("%b", LED);
    SWITCH[1:0] = 2'b11; SWITCH[3:2] = 2'b01; #10 $display("%b", LED);
    #200 $stop;
  end
endmodule</pre>
<p>Create the verilog output files</p>
<ul>
<li>Processing » Start » Start EDA Netlist Writer</li>
</ul>
<p>Configure Quartus to create a script that compiles the test bench and modules for ModelSim</p>
<ul>
<li>Assignments » Settings » Libraries » Global
<ul>
<li>Add
<ul>
<li><code>altera_ver</code></li>
<li><code>cycloneive_ver</code></li>
</ul>
</li>
</ul>
</li>
<li>Assignments » Settings » EDA Tool Settings » Simulation
<ul>
<li>Compile test bench
<ul>
<li>Delete the old <code>Functional test bench</code></li>
<li>New</li>
<li>Test bench name = <code>Timing test bench</code></li>
<li>Top-level module in test bench = <code>example1_tb</code></li>
<li>Add the files listed below.  After selecting each file using the ellipsis (<em>…</em>) file selector, edit the resulting path name to exclude the project path, then press <em>Add</em>.
<ul>
<li><code>example_tb.v</code></li>
<li><code><strong>simulation/modelsim/</strong>example1.v<strong>o</strong></code>
<ul>
<li>it appears that <code>eq2</code> and <code>eq1</code> were included inside <code>simulation/modelsim/example1.vo</code>. If you have larger modules, make sure you include al the <code>.vo</code> files here.</li>
</ul>
</li>
<li>if the <code>simulation/modelsim</code> directory doesn&#8217;t exist: recompile, and then add the <code>.vo</code> module.</li>
</ul>
</li>
<li>If things don&#8217;t go your way, refer to the section &#8220;Some hints ..&#8221; under &#8220;Test bench for functional simulation&#8221;.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Start a full synthesis for the circuit</p>
<ul>
<li>Processing » Start » Start Compilation</li>
</ul>
<p>Start ModelSim</p>
<ul>
<li>Tools » Simulation Tool » Gate Level Simulation
<ul>
<li>Timing model = <code>Slow -6 1.2V 85 Model</code> (default), this simulates a slow -6 speed grade model at 1.2 V and 85 °C.</li>
</ul>
</li>
</ul>
<p>Select the signals</p>
<ul>
<li>Objects » select the signals of interest » Add Wave</li>
<li>Increase simulation time to <code>1 µs</code> and click the run button on the right</li>
<li>Undock the Wave Window (so you can expand it)</li>
<li>Click &#8220;zoom full&#8221; and observe the simulated waveforms.  You should see something like</li>
</ul>
<p>Expect something like</p>
<div class="align-center">
<figure><a class="hide-anchor fancybox" href="../../wp-content/uploads/timing-1.png"><img class="size-full wp-image-16355" src="../../wp-content/uploads/timing-1.png" alt="own work" width="1287" srcset="https://coertvonk.com/wp-content/uploads/timing-1.png 1287w, ../../wp-content/uploads/timing-1-400x73.png 400w, ../../wp-content/uploads/timing-1-768x141.png 768w, ../../wp-content/uploads/timing-1-1024x188.png 1024w, ../../wp-content/uploads/timing-1-250x46.png 250w, ../../wp-content/uploads/timing-1-300x55.png 300w, ../../wp-content/uploads/timing-1-350x64.png 350w, ../../wp-content/uploads/timing-1-500x92.png 500w, ../../wp-content/uploads/timing-1-750x138.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a><figcaption>Timing</figcaption></figure>
</div>
<p>For more hands on experience, refer to Altera&#8217;s excellent <a href="https://www.intel.com/content/www/us/en/developer/topic-technology/fpga-academic/materials.html">University Program</a> lessons, or the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;CategoryNo=165&#038;No=593&#038;PartNo=4">Terasic</a> CD-ROM files  (<code>C:\altera_lite\DE0-Nano</code>) for examples and documentation.  Altera also has a more generic <a href="https://www.intel.com/content/www/us/en/programmable/customertraining/webex/Become_FPGA_Designer/presentation.html">Become a FPGA Designer</a> video-based class.</p>
<p>Our first implementation is the SPI interface <a href="https://coertvonk.com/hw/math-talk/introduction-13067">Math Talk</a>.  This is then used to build a demonstration of math operations in FPGA as eluded to from the inquiry <a href="https://coertvonk.com/inquiries/computer-math/electrical-circuits-4245">How do Computer do Math?</a>.</p>
<p><em>c&#8217;est tout</em></p>
	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30778" class="post-30778 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/building-math-circuits/parameterized-square-root-in-verilog-30778.html" rel="bookmark">Square root circuit</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/building-math-circuits/parameterized-square-root-in-verilog-30778.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-08T10:59:26-07:00">2015-10-08</time><time class="updated" datetime="2022-05-03T13:04:16-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/building-math-circuits/parameterized-square-root-in-verilog-30778.html">
				<img width="1" height="1" src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-sqrt.svg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="(c) Copyright 2016 Coert Vonk" loading="lazy" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Implements a math square root using a circuit of logic gates. Written in parameterized Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>
<h2 style="counter-reset: h2 7 h3">
    Square root using logic gates
</h2>

<p>
    <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-logo-implementation-sqrt.svg"><img class="alignright wp-image-17215"  title=""  src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-sqrt.svg" alt="(c) Copyright 2016 Coert Vonk" width="75" /></a>

    The square root method implemented here is a simplification of <span class="a">Samavi and </span><span class="a"><a href="https://www.academia.edu/2688190/An_Optimized_Square_Root_Algorithm_for_Implementation_in_FPGA_Hardware">Sutikno</a> improvements of the non-restoring digit recurrence square root algorithm. For details about this method, refer to <a href="https://coertvonk.com/inquiries/computer-math/math-operations-using-gates-30710#sqrt">Chapter 7</a> of the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;. \(\)</span>
</p>

<h3>
    Simplified Samovi Square Root
</h3>
<p>
    The square root of an integer can be calculated using a circuit of Controlled Subtract-Multiplex (<code>csm</code>) blocks. The blocks were introduced as part of the <a href="https://coertvonk.com/hw/building-math-circuits/parameterized-divider-in-verilog-30776">divider implementation</a>. The square root circuit for an 8-bits value is given in shown below.
</p>
<p>
    Each row performs one &#8220;attempt subtraction&#8221; cycle. For a start, the top row attempts to subtracts binary 01. If the answer would be negative, the most significant bit of the output will be &#8216;1&#8217;. This msb drives the drives the Output Select (\(os\)) inputs that effectively cancels the subtraction if the result would be negative.

    <div class="flex-container">
        <figure>
            <div class="circuit-container">
                <img class="aligncenter" title="(c) Copyright 2017 by Coert Vonk" src="../../wp-content/logic-simulation/squareroot/8-bit&#32;simplified-Samovi.svg" alt="" width="600" />
                <button class="circuit-animate no-print" style="top: 12%; right: 0%;">
                    Animate
                </button>
            </div>
            <figcaption>
                8-bit simplified-Samovi square-root
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Similar to the divider, using Verilog HDL we can generate instances of <code>csm</code> blocks based on the word length of the radicand (<code>xWIDTH</code>) . Once more, to describe the circuit in Verilog HDL, we need to derive the rules that govern the connections between the blocks.
</p>
<p>
    Start by numbering the output ports based on their location in the matrix. For this circuit, we have the output signals <em>difference</em> \(d\) and <em>borrow-out</em> \(b\). E.g. \(d_{13}\) identifies the difference signal for the block in row <code>1</code> and column <code>3</code>. Next, we express the input signals as a function of the output signal names \(d\) and \(b\) and do the same for the quotient itself as shown in the table below.
</p>
<p>
    2BD
</p>
<p>
    Based on this table, we can now express the interconnects using Verilog HDL using <code>?:</code> expressions.

    <pre class="brush: verilog; title: ; toolbar: false; notranslate" title="">generate genvar ii, jj;
: 2BD
endgenerate</pre>
</p>
<p>
    The complete Verilog HDL source code along with the test bench and constraints is available at:

    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h4>
    Results
</h4>
<p>
    As usual, the propagation delay \(t_{pd}\) depends size \(N\) and the value of operands. For a given size \(N\), the maximum propagation delay occurs when each subtraction needs to be cancelled.
</p>
<p>
    Post-map Timing Analysis reveals the worst-case propagation delays. The values in the table below, assume that the size of both operands is the same. The exact value depends on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="index.html#">
                    <img class="wp-image-16751" src="https://coertvonk.com/category/hw/building-math-circuits" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay for simplified-Samovi square-root
            </figcaption>
        </figure>
    </div>
</p>

<h2 style="counter-reset: h2 8 h3">
    Conclusion
</h2>

<p>
    Judging from the number of research papers popping up each year, we can deduce that this is a still active field.
</p>
<p>
    Add elementary functions such as sin, cos, tan, exponential, and logarithm.
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
    Suggestion for further reading
    <ul>
        <li>
            Digital Computer Arithmetic Datapath Design Using Verilog HDL, by J. Stine, 2003.
        </li>
        <li>
            Computer Arithmetic: Algorithms and Hardware Designs, by Parhami, 1999 and 2009.
        </li>
        <li>
            Guide to FPGA Implementation of Arithmetic Functions, by Deschamps, Sutter and Cantó, 2012.
        </li>
        <li>
            <a href="http://courses.csail.mit.edu/6.111/f2004/handouts/L09_L10.pdf">Arithmetic Circuits</a>,
            <a href="https://ocw.mit.edu/courses/6-111-introductory-digital-systems-laboratory-spring-2006/pages/lecture-notes/">Structures</a> and
            <a href="http://courses.csail.mit.edu/6.111/f2008/handouts/L09.pdf">Multipliers &#038; Pipelining</a>, Introductory Digital Systems laboratory, by MIT, 2004-2008.
        </li>
        <li>
            <a href="https://arxiv.org/pdf/1004.4710.pdf">Modern Computer Arithmetic</a>, by Brent and Zimmermann, 2010.
        </li>
        <li>
            <a href="http://courses.csail.mit.edu/6.111/f2008/handouts/L08.pdf">Arithmetic Circuits and Multipliers</a>, MIT
        </li>
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30776" class="post-30776 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/building-math-circuits/parameterized-divider-in-verilog-30776.html" rel="bookmark">Divider circuit</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/building-math-circuits/parameterized-divider-in-verilog-30776.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-07T10:56:41-07:00">2015-10-07</time><time class="updated" datetime="2022-05-03T13:04:13-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/building-math-circuits/parameterized-divider-in-verilog-30776.html">
				<img width="1" height="1" src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-divide.svg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="(c) Copyright 2016 Coert Vonk" loading="lazy" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Implements a math divider using a circuit of logic gates. Written in parameterized Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>
<h2 style="counter-reset: h2 6 h3">
    Divider using logic gates
</h2>

<p>
    <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-logo-implementation-divide.svg"><img class="alignright wp-image-17214"  title=""  src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-divide.svg" alt="(c) Copyright 2016 Coert Vonk" width="75" /></a>

    The <em>attempt-subtraction divider</em> was introduced in the inquiry <a href="https://coertvonk.com/inquiries/computer-math/math-operations-using-gates-30710#attemptsubtractiondivider">How do Computer do Math</a>.\(\) This most basic divider consists of interconnected Controlled Subtract-Multiplex (<code>csm</code>) blocks. Each blocks contains a 1-bit Full Subtractor (<code>fs</code>) with the usual inputs <em>a</em>, <em>b</em> and <em>b<sub>i</sub></em> and outputs <em>d</em> and <em>b<sub>o</sub></em>. The output select signal, <em>os</em>, signal selects between input <em>x</em> and and the difference <em>x-y</em>.
</p>
<p>  
    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <div class="circuit-container">
                    <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/divider/csm-block.html">
                        <img class="aligncenter" title="(c) Copyright 2017-2022 by Coert Vonk" src="../../wp-content/logic-simulation/divider/csm-block.svg" alt="" width="200" />
                        <button class="circuit-animate no-print" style="bottom: 0%; left: 0%;">
                            Animate
                        </button>
                    </a>
                </div>
                <div>
                    $$
                        \begin{align*}
                            d^\prime &#038;=x \oplus y \oplus b_i\\
                            d&#038;=os \cdot x + \overline{os} \cdot d^\prime\\
                            b_o&#038;=\overline{x} \cdot y + b_i \cdot (\overline{x \oplus y})
                        \end{align*}
                    $$
                </div>
            </div>
            <figcaption>1-bit Controlled Subtract-Multiplex</figcaption>
        </figure>
    </div>
</p>

<h3>
    Attempt-subtraction divider
</h3>
<p>
    A complete 8:4-bit divider can therefore be implemented by a matrix of <code>csm</code> modules connected on rows and columns as shown in figure below. Each row performs one &#8220;attempt subtraction&#8221; cycle. Note that the most significant bit is used to drive the Output Select <em>os</em> inputs. (For more details see “<a href="http://www.asic-world.com/digital/arithmetic4.html">Combinational arithmetic</a>“.)

    <div class="flex-container">
        <figure>
            <div class="circuit-container">
                <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/divider/8_4-bit&#32;attempt-subtraction.html">
                    <img class="aligncenter" title="(c) Copyright 2017-2022 by Coert Vonk" src="../../wp-content/logic-simulation/divider/8_4-bit&#32;attempt-subtraction.svg" alt="" width="600" />
                    <button class="circuit-animate no-print" style="top: 5%; right: 0%;">
                        Animate
                    </button>
                </a>
            </div>
        <figcaption>8:4-bit Attempt-Subtraction</figcaption></figure>
    </div>
</p>
<p>
    Similar to the multipliers, using Verilog HDL we can generate instances of <code>csm</code> blocks based on the word length of the dividend (<code>xWIDTH</code>) and divisor (<code>yWIDTH</code>). To describe the circuit in Verilog HDL, we need to derive the rules that govern the connections between the blocks.
</p>
<p>
    Start by numbering the output ports based on their location in the matrix. For this circuit, we have the output signals <em>difference</em> (\(d\)) and <em>borrow-out</em> (\(b\)). E.g. \(d_{13}\) identifies the difference signal for the block in row <code>1</code> and column <code>3</code>. Next, we express the input signals as a function of the output signal names (\(d\) and \(b\)) and do the same for the quotient itself as shown in the table below.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/divider-tbl.png">
                <img class="wp-image-12943" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/divider-tbl.png" alt="(c) Copyright 2016 Coert Vonk" width="400" srcset="https://coertvonk.com/wp-content/uploads/divider-tbl.png 429w, ../../wp-content/uploads/divider-tbl-368x400.png 368w, ../../wp-content/uploads/divider-tbl-230x250.png 230w, ../../wp-content/uploads/divider-tbl-276x300.png 276w, ../../wp-content/uploads/divider-tbl-322x350.png 322w" sizes="(max-width: 429px) 100vw, 429px" />
            </a>
            <figcaption>
                Signals do, bo, x, y, bi and os
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Based on this table, we can now express the interconnects using Verilog HDL using <code>?:</code> expressions.
    generate genvar ii, jj;
    for ( ii = 0; ii <; xWIDTH; ii = ii + 1) begin: gen_ii
        for ( jj = 0; jj <; yWIDTH + 1; jj = jj + 1) begin: gen_jj
            math_divider_csm_block csm( 
                .a ( jj <; 1 ? x[xWIDTH-1-ii] : ii > 0 ? d[ii-1][jj-1] : 1&#8217;b0 ),
                .b ( jj <; yWIDTH ? y[jj] : 1'b0 ),
                .bi ( jj > 0 ? b[ii][jj-1] : 1&#8217;b0 ),
                .os ( b[ii][yWIDTH] ),
                .d ( d[ii][jj] ),
                .bo ( b[ii][jj] ) );
        end
    end
    for ( ii = 0; ii <; xWIDTH; ii = ii + 1) begin: gen_p
        assign q[xWIDTH-1-ii] = ~b[ii][yWIDTH];
    end
    for ( jj = 0; jj <;= yWIDTH; jj = jj + 1) begin: gen_r
        assign r[jj] = d[xWIDTH-1][jj];
    end
endgenerate[/code]
</p>
<p>
    The complete Verilog HDL source code along with the test bench and constraints is available at:

    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h3>
    Results
</h3>
<p>
    As usual, the propagation delay \(t_{pd}\) depends size \(N\) and the value of operands. For a given size \(N\), the maximum propagation delay occurs when each subtraction needs to be cancelled.
</p>
<p>
    The worst-case propagation delays for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Terasic Altera Cyclone IV DE0-Nano</a> are found using the post-map Timing Analysis tool. The values in the table below, assume that the size of both operands is the same. The exact value depends on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;">11.2 ns</td>
                        <td style="text-align: right;">10.0 ns</td>
                        <td style="text-align: right;">6.8 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;">37.1 ns</td>
                        <td style="text-align: right;">33.2 ns</td>
                        <td style="text-align: right;">22.0 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;">148 ns</td>
                        <td style="text-align: right;">132 ns</td>
                        <td style="text-align: right;">84.8 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;">408 ns</td>
                        <td style="text-align: right;">365 ns</td>
                        <td style="text-align: right;">236 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;">485 ns</td>
                        <td style="text-align: right;">434 ns</td>
                        <td style="text-align: right;">279 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-divider-attemptsubtraction-circuit-measurements.svg">
                    <img class="wp-image-16751" src="https://coertvonk.com/wp-content/uploads/math-divider-attemptsubtraction-circuit-measurements.svg" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay in attempt-subtraction divider
            </figcaption>
        </figure>
    </div>
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                Continuing from &#8220;Divider using logic gates&#8221;, the <a href="../../hw/building-math-circuits/parameterized-square-root-in-verilog-30778.html">next chapter</a> shows an implementation of the square root algorithm introduced in <a href="../../inquiries/computer-math/math-operations-using-gates-30710.html">Chapter 7</a> of the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;.
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30774" class="post-30774 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/building-math-circuits/faster-parameterized-multiplier-in-verilog-30774.html" rel="bookmark">A faster multiplier circuit</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/building-math-circuits/faster-parameterized-multiplier-in-verilog-30774.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-06T10:54:04-07:00">2015-10-06</time><time class="updated" datetime="2022-05-03T13:04:09-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/building-math-circuits/faster-parameterized-multiplier-in-verilog-30774.html">
				<img width="1" height="1" src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-multiply.svg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="(c) Copyright 2016 Coert Vonk" loading="lazy" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Implements a carry-save array multiplier using a circuit of logic gates.  Written in Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>
<h2 style="counter-reset: h2 5 h3">
    Carry-save array multiplier
</h2>

<p>
    <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-logo-implementation-multiply.svg"><img class="alignright wp-image-17213"  title=""  src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-multiply.svg" alt="(c) Copyright 2016 Coert Vonk" width="75" /></a>

    \(\)
    The propagating carry limits the performance of the <a href="https://coertvonk.com/hw/building-math-circuits/parameterized-multiplier-in-verilog-30772">previous algorithm.</a> Here we investigates methods of implementing binary multiplication with a smaller latency. Low latency demands an efficient algorithm and high performance circuitry to limit propagation delays. Crucial to the performance of multipliers are high-speed adders. [<a href="http://i.stanford.edu/pub/cstr/reports/csl/tr/94/617/CSL-TR-94-617.pdf">Bewick</a>]
</p>
<p>
    The speed of the multiplier is directly related to this execution time of these <em>Digital Signal Processing</em> (DSP) applications.
</p>
<p>
    Since multiplication dominates the execution time of most DSP algorithms, so there is a need of high-speed multiplier. Examples are convolution, Fast Fourier Transform (FFT), filtering and in ALU of microprocessors.
</p>

<h3>
    Carry-save Array Multiplier
</h3>
<p>
    An important advance in improving the speed of multipliers, pioneered by Wallace, is the use of carry save adders (CSA). Even though the building block is still the multiplying adder (<code>ma</code>), the topology of prevents a ripple carry by ensuring that, wherever possible, the carry-out signal propagates downward and not sideways.
</p>
<p>
    The illustration below gives an example of this multiplication process.
    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-carry-save-example.png">
                <img class="wp-image-16502" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math-multiplier-carry-save-example.png" alt="(c) Copyright 2016 Coert Vonk" width="371" srcset="https://coertvonk.com/wp-content/uploads/math-multiplier-carry-save-example.png 435w, ../../wp-content/uploads/math-multiplier-carry-save-example-400x358.png 400w, ../../wp-content/uploads/math-multiplier-carry-save-example-250x224.png 250w, ../../wp-content/uploads/math-multiplier-carry-save-example-300x268.png 300w, ../../wp-content/uploads/math-multiplier-carry-save-example-350x313.png 350w" sizes="(max-width: 435px) 100vw, 435px" />
            </a>
            <figcaption>
                Inside a carry-save array multiplier
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Again, the building block is the multiplying adder (<code>ma</code>) as describe on the <a href="../../technology/unfinished/fpga-math-verilog-12758/5.html">previous page</a>. However, the topology is so that the carry-out from one adder is not connected to the carry-in of the next adder. Hence preventing a ripple carry. The circuit diagram below shows the connections between these blocks.

    <div class="flex-container">
        <figure>
            <div class="circuit-container">
                <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/multiplier/4-bit&#32;carry-save.html">
                    <img class="aligncenter" title="(c) Copyright 2017 by Coert Vonk" src="../../wp-content/logic-simulation/multiplier/4-bit&#32;carry-save.svg" alt="" width="600" />
                    <button class="circuit-animate no-print" style="bottom: 10%; right: 0%;">
                        Animate
                    </button>
                </a>
            </div>
            <figcaption>
                4-bit carry-save array multiplier
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The observant reader might notice that <code>ma<sub>0x</sub></code> can be replaced with simple AND gates, <code>ma<sub>4x</sub></code> can be replaced by adders. Also the block <code>ma<sub>43</sub></code> is not needed. More interesting, the the ripple adder in the last row, can be replace with the faster carry look ahead adder.
</p>
<p>
    Similar to the carry-propagate array multiplier, using Verilog HDL we can generate instances of <code>ma</code> blocks based on the word length of the multiplicand and multiplier (<code>N</code>). To describe the circuit in Verilog HDL, we need to derive the rules that govern the connections between the blocks.
</p>
<p>
    Start by numbering the output ports based on their location in the matrix. For this circuit, we have the output signals <em>sum</em> (<code>s)</code> and <em>carry-out</em> (<code>c</code>). E.g. <span style="font-family: monospace;">c_13</span> identifies the carry-out signal for the block in row <code>1</code> and column <code>3</code>. Next, we express the input signals as a function of the output signal names <code>s</code> and <code>c</code> and do the same for the product itself as shown in the table below.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-carry-save-tbl3.png">
                <img class="wp-image-16724" src="https://coertvonk.com/wp-content/uploads/math-multiplier-carry-save-tbl3.png" alt="" width="400" srcset="https://coertvonk.com/wp-content/uploads/math-multiplier-carry-save-tbl3.png 714w, ../../wp-content/uploads/math-multiplier-carry-save-tbl3-356x400.png 356w, ../../wp-content/uploads/math-multiplier-carry-save-tbl3-223x250.png 223w, ../../wp-content/uploads/math-multiplier-carry-save-tbl3-267x300.png 267w, ../../wp-content/uploads/math-multiplier-carry-save-tbl3-312x350.png 312w, ../../wp-content/uploads/math-multiplier-carry-save-tbl3-445x500.png 445w, ../../wp-content/uploads/math-multiplier-carry-save-tbl3-668x750.png 668w" sizes="(max-width: 714px) 100vw, 714px" />
            </a>
            <figcaption>
                Function for output signals &#8216;so&#8217; and &#8216;co&#8217; and output signals &#8216;x&#8217;, &#8216;y&#8217;, &#8216;si&#8217;, &#8216;ci&#8217; and &#8216;p&#8217;
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Based on this table, we can now express the interconnects using Verilog HDL using <code>?:</code> expressions.
    <pre class="brush: verilog; title: ; toolbar: false; notranslate" title="">generate genvar ii, jj;
    for ( ii = 0; ii <;= N; ii = ii + 1) begin: gen_ii
        for ( jj = 0; jj <; N; jj = jj + 1) begin: gen_jj
            math_multiplier_ma_block ma(
                .x ( ii <; N ? a&#091;jj&#093; : (jj > 0) ? c[N][jj-1] : 1'b0 ),
                .y ( ii <; N ? b&#091;ii&#093; : 1'b1 ),
                .si ( ii > 0  jj <; N - 1 ? s&#091;ii-1&#093;&#091;jj+1&#093; : 1'b0 ),
                .ci ( ii > 0 ? c[ii-1][jj] : 1'b0 ),
                .so ( s[ii][jj] ),
                .co ( c[ii][jj] ) );
            if ( ii == N ) assign p[N+jj] = s[N][jj];
        end
        assign p[ii] = s[ii][0];
    end
endgenerate</pre>
</p>
<p>
    The complete Verilog HDL source code along with the test bench and constraints is available at:

    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h4>
    Results
</h4>
<p>
    The propagation delay \(t_{pd}\) depends size \(N\) and the value of operands. For a given size \(N\), the maximum propagation delay occurs when the low order bit cause a carry/sum that propagate to the highest order bit. This worst-case propagation delay is linear with \(2N\), this makes this carry-save multiplier is about <em>33% faster</em> as the ripple-carry multiplier. Note that the average propagation delay is about half of this.
</p>
<p>
    The post-map Timing Analysis tool shows the worst-case propagation delays for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Terasic Altera Cyclone IV DE0-Nano</a>. The exact value depends on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;">9.0 ns</td>
                        <td style="text-align: right;">8.0 ns</td>
                        <td style="text-align: right;">5.6 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;">18.7 ns</td>
                        <td style="text-align: right;">16.8 ns</td>
                        <td style="text-align: right;">11.4 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;">30.9 ns</td>
                        <td style="text-align: right;">27.6 ns</td>
                        <td style="text-align: right;">18.3 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;">46.8 ns</td>
                        <td style="text-align: right;">41.9 ns</td>
                        <td style="text-align: right;">27.7 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;">57.9 ns</td>
                        <td style="text-align: right;">51.6 ns</td>
                        <td style="text-align: right;">34.3 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-carry-save-measurements.svg">
                    <img class="wp-image-16751" src="https://coertvonk.com/wp-content/uploads/math-multiplier-carry-save-measurements.svg" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay in carry-save array multiplier
            </figcaption>
    </figure>
    </div>
</p>

<h3>
    Other multipliers
</h3>
<p>
    The <em><a href="https://www.researchgate.net/publication/3476184_A_Suggestion_for_a_Fast_Multiplier" class="broken_link">Wallace Multiplier</a></em> decreases the latency by reorganizing the additions. Wikipedia has a <a href="https://en.wikipedia.org/wiki/Wallace_tree">good description of the algorithm</a>. Due to the irregular routing, they can be difficult to route on a FPGA. As a consequence, additional wire delays may cause it to perform slower than carry-safe array multipliers.
</p>
<p>
    The Wallace Multiplier can be combined with Booth Coding. The <em><a href="https://www.researchgate.net/publication/30957338_A_signed_binary_multiplication_technique" class="broken_link">Booth Multiplier</a></em> (alt) uses, say, 2 bits of the multiplier in generating each partial product thereby using only half the number of rows. Booth Multipliers with more fancy VLSI technique such as 0.6μ BiCMOS process using emitter coupled logic makes 53&#215;53 multipliers possible with a latency of less than 2.6 nanoseconds [<a href="http://i.stanford.edu/pub/cstr/reports/csl/tr/94/617/CSL-TR-94-617.pdf">ref</a>].
</p>
<p>
    Booth multiplication is a technique that allows for smaller, faster multiplication circuits, by reordering the values to be multiplied. It is the standard technique used in chip design.
</p>
<p>
    Vedic arithmetic is the ancient system of Indian mathematics which has a unique technique of calculations based on 16 Sutras (Formulae)
</p>
<p>
    Another algorithm is <a href="https://en.wikipedia.org/wiki/Karatsuba_algorithm">Karatsuba</a>. <a href="http://www.andraka.com/multipli.php">Overview</a>.
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                Following this &#8220;Carry-save array multiplier using logic gates&#8221;, the <a href="../../hw/building-math-circuits/parameterized-divider-in-verilog-30776.html">next chapter</a> shows an implementation of the divider introduced in <a href="../../inquiries/computer-math/math-operations-using-gates-30710.html">Chapter 7</a> of the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;.
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30772" class="post-30772 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/building-math-circuits/parameterized-multiplier-in-verilog-30772.html" rel="bookmark">Multiplier circuit</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/building-math-circuits/parameterized-multiplier-in-verilog-30772.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-05T10:51:48-07:00">2015-10-05</time><time class="updated" datetime="2022-05-03T13:04:06-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/building-math-circuits/parameterized-multiplier-in-verilog-30772.html">
				<img width="1" height="1" src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-multiply.svg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="(c) Copyright 2016 Coert Vonk" loading="lazy" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Implements a math multiplier using circuits of logic gates. Written in parameterized Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>
<h2 style="counter-reset: h2 4 h3">
    Multiplier using logic gates
</h2>
<p>
    <a class="hide-anchor fancybox" href="https://coertvonk.com/wp-content/uploads/math-logo-implementation-multiply.svg"><img class="alignright wp-image-17213"  title=""  src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-multiply.svg" alt="multiplier icon" width="75" /></a>

    We introduced the <em>carry-propagate array multiplier</em> in the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;.\(\)
</p>
<p>
    This multiplier is build around Multiplier Adder (<code>ma</code>) blocks. These <code>ma</code> blocks are themselves build around the Full Adder (<code>fa</code>) blocks introduced in the <a href="https://coertvonk.com/hw/building-math-circuits/fpga-math-verilog-12758">adder section</a>. These <code>fa</code> blocks have the usual inputs \(a\) and \(b\), \(c_i\) and outputs \(s\) and \(c_o\). The special thing is that the internal signal \(b\) is an AND function of the inputs \(x\) and \(y\) as depicted below.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <div class="circuit-container">
                    <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/multiplier/ma-block.html">
                        <img class="aligncenter" title="(c) Copyright 2017 by Coert Vonk" src="../../wp-content/logic-simulation/multiplier/ma-block.svg" alt="" width="200" />
                        <button class="circuit-animate no-print" style="bottom: 0%; right: 0%;">
                            Animate
                        </button>
                    </a>
                </div>
                <div>
                    $$
                        \begin{align*}
                            a &#038;= s_i\\
                            b &#038;= x \cdot y\\
                            s_o &#038;= s_i\oplus b\oplus c_i\\
                            c_o &#038;= s_i \cdot b + c_i \cdot(s_i \oplus b)
                        \end{align*}
                    $$
                </div>
            </div>
            <figcaption align="bottom">
                1-bit multiplying-adder
            </figcaption>
        </figure>
    </div>
</p>
<p>
    <strong>Carry-propagate Array Multiplier</strong>
</p>
<p>
    As shown in the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;, a carry-propagate array multiplier can be built by combining many of these <code>ma</code> blocks. The circuit diagram below shows the connections between these blocks for a 4-bit multiplier.
    
    <div class="flex-container">
        <figure>
            <div class="circuit-container">
                <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/multiplier/4-bit&#32;carry-propagate.html">
                    <img class="aligncenter" title="(c) Copyright 2017 by Coert Vonk" src="../../wp-content/logic-simulation/multiplier/4-bit&#32;carry-propagate.svg" alt="" width="600" />
                    <button class="circuit-animate no-print" style="bottom: 10%; right: 0%;">
                        Animate
                    </button>
                </a>
            </div>
            <figcaption>
                4-bit carry-propagate array multiplier
            </figcaption>
        </figure>
    </div>
</p>
<p>
    For an implementation in Verilog HDL, we can instantiate <code>ma</code> blocks based on the word length of the multiplicand and multiplier (\(N\)). If you are new to Verilog HDL, remember that the <code>generate</code> code segment expands during compilation time. In other words, it is just a short hand for writing out the long list of <code>ma</code> block instances.
</p>
<p>
    <pre class="brush: verilog; title: ; toolbar: false; notranslate" title="">generate genvar ii, jj;
    for ( ii = 0; ii <; N; ii = ii + 1) begin: gen_ii
        for ( jj = 0; jj <; N; jj = jj + 1) begin: gen_jj
            math_multiplier_ma_block ma( 
                .x(?), .y(?), .si(?), .ci(?),
                .so(?), .co(?) );
        end
    end
endgenerate&#091;/code&#093;
</p>
<p>
    As you might notice, the input and output ports are not described. For this, we need to derive the rules that govern these interconnects. Start by numbering the output ports based on their location in the matrix. For this circuit, we have the output signals <em>sum</em> (\(s\)) and <em>carry-out</em> (\(c\)). E.g. \(c_{13}\) identifies the carry-out signal for the block in row <code>1</code> and column <code>3</code>. Note that the circuit description depicts the matrix in a slanted fashion.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output.png">
                <img class="wp-image-16504" src="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output.png" alt="own work" width="420" srcset="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output.png 488w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output-400x115.png 400w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output-250x72.png 250w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output-300x86.png 300w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-output-350x100.png 350w" sizes="(max-width: 488px) 100vw, 488px" />
            </a>
            <figcaption>
                Output signals 'so' and 'co'
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Knowing this, we can enter the output signals in the Verilog HDL code
    math_multiplier_ma_block ma( 
    .x(?), .y(?), .si(?), .ci(?),
    .so ( s[ii][jj] ),
    .co ( c[ii][jj] ) );</pre>
</p>
<p>
    Next, we express the input signals as a function of the output signal names \(s\) and \(c\) as shown in the table below.    
    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input.png">
                <img class="wp-image-16505" src="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input.png" alt="own work" width="402" srcset="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input.png 488w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input-400x223.png 400w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input-250x139.png 250w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input-300x167.png 300w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-ma-input-350x195.png 350w" sizes="(max-width: 488px) 100vw, 488px" />
            </a>
            <figcaption>
                Input signals 'x', 'y', 'si' and 'ci'
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Based on this table, we can express the input assignments for each <code>ma</code> using "<code>c ? a : b</code>" expressions. Note that Verilog 2001 does not allow these programming statements for the output pins. This is why we expressed the input ports as a function of the output ports instead of visa versa.
</p>
<p>
    <pre class="brush: verilog; title: ; toolbar: false; notranslate" title="">math_multiplier_ma_block ma( 
    .x ( a[jj] ),
    .y ( b[ii]),
    .si ( ii == 0 ? 1'b0 : jj <; N - 1 ? s&#091;ii-1&#093;&#091;jj+1&#093; : c&#091;ii-1&#093;&#091;N-1&#093; ),
    .ci ( jj > 0 ? c[ii][jj-1] : 1'b0 ),
    .so ( s[ii][jj] ),
    .co ( c[ii][jj] ) );</pre>
</p>
<p>
    All that is left to do is to express the inputs of the module as a function of the output signals
    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2.png">
                <img class="wp-image-16725" src="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2.png" alt="" width="351" srcset="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2.png 565w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2-400x75.png 400w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2-250x47.png 250w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2-300x56.png 300w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2-350x66.png 350w, ../../wp-content/uploads/math-multiplier-ripple-carry-tbl-mult-output2-500x94.png 500w" sizes="(max-width: 565px) 100vw, 565px" />
            </a>
            <figcaption>
                Output signal 'p'
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Putting it all together, we get the following snippet
    generate genvar ii, jj;
    for (ii = 0; ii <; N; ii = ii + 1) begin: gen_ii
        for (jj = 0; jj <; N; jj = jj + 1) begin: gen_jj
            math_multiplier_ma_block ma( 
                .x  ( a[jj] ),
                .y  ( b[ii]),
                .si ( ii == 0 ? 1'b0 : jj <; N - 1 ? s[ii-1][jj+1] : c[ii-1][N-1] ),
                .ci ( jj > 0 ? c[ii][jj-1] : 1'b0 ),
                .so ( s[ii][jj] ),
                .co ( c[ii][jj] ) );
        end
        assign p[ii] = s[ii][0];
    end    
    for (jj = 1; jj <; N; jj = jj + 1) begin: gen_jj2
        assign p[jj+N-1] = s[N-1][jj];
    end
    assign p[N*2-1]  = c[N-1][N-1];
endgenerate[/code]
</p>
<p>
    The <code>ma</code> block compiles into the RTL netlist shown below
    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-multiplier-ripple-carry-rtl-ma.svg">
                <img class="wp-image-16642" src="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-rtl-ma.svg" alt="own work" width="350" />
            </a>
            <figcaption>1-bit multiplying-adder in RTL</figcaption>
        </figure>
    </div>
</p>
<p>
    As shown in the figure below, the <code>for</code> loops unroll into 16 interconnected <code>ma</code> blocks.
    <div class="flex-container">
        <figure>
            <img class="hide-anchor wp-image-16641" src="../../wp-content/uploads/math-multiplier-ripple-carry-rtl-top.svg" alt="own work" width="600" />
            <figcaption>
                4-bit carry-propagate array multiplier in RTL
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The complete Verilog HDL source code is available at:

    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h3>
    Results
</h3>
<p>
    The propagation delay \(t_{pd}\) depends size \(N\) and the value of operands. For a given size \(N\), the maximum propagation delay occurs when the low order bit because a carry/sum that propagate to the highest order bit. This worst-case propagation delay is linear with \(3N\). Note that the average propagation delay is about half of this.
</p>
<p>
    The worst-case propagation delays for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Terasic Altera Cyclone IV DE0-Nano</a> are found using the post-map Timing Analysis tool. The exact value depends on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;">9.9 ns</td>
                        <td style="text-align: right;">8.9 ns</td>
                        <td style="text-align: right;">6.1 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;">20.8 ns</td>
                        <td style="text-align: right;">18.6 ns</td>
                        <td style="text-align: right;">12.4 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;">41.3 ns</td>
                        <td style="text-align: right;">36.9 ns</td>
                        <td style="text-align: right;">24.2 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;">69.6 ns</td>
                        <td style="text-align: right;">62.1 ns</td>
                        <td style="text-align: right;">40.9 ns</td>
                        <td style="text-align: right;">55 ns</td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;">83.4 ns</td>
                        <td style="text-align: right;">74.5 ns</td>
                        <td style="text-align: right;">49.0 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-lookaheadcarry2lvl.-measurements.svg">
                    <img class="wp-image-16751" src="https://coertvonk.com/wp-content/uploads/math-adder-lookaheadcarry2lvl.-measurements.svg" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay in carry-propagate array multiplier
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The timing analysis for \(N=27\), reveals that the worst-case propagation delay path goes through \(c_0\) and \(s_o\) as shown below on the left. When measuring the worst-case propagation delay on the actual device, we use input values that cause the maximum number ripple carries and sums propagating. For a 27-bit multiplier that where the input also has a maximum value of 99,999,999, the propagation path is simulated in a spreadsheet as shown below on the right.
</p>
<p>
    <div class="flex-container">
        <figure>
            <a href="../../wp-content/uploads/math-multiplier-ripple-carry-worstcase.svg"><img src="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-worstcase.svg" alt="" class="alignnone size-full wp-image-16668" /></a>
            <figcaption>
                Worst case path
            </figcaption>
        </figure>
        <figure>
            <a href="../../wp-content/uploads/math-multiplier-ripple-carry-worstcase-input2.svg"><img src="https://coertvonk.com/wp-content/uploads/math-multiplier-ripple-carry-worstcase-input2.svg" alt="" class="alignnone size-full wp-image-16680" /></a>
            <figcaption>
                Worst case input
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Brute force using the FPGA to find all combinations of operands that cause long propagation delays revealed 27'h2FA3A92 * 27h'55D4A77, 27'h60A308B * 27'd99999999 (50ns), 27'h775A668 * 27'd89999999 (55 ns), 27'h56F5D8F * 27'h3AAAB7B (55 ns).
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                Following this "Math multiplier using logic gates", the <a href="../../hw/building-math-circuits/faster-parameterized-multiplier-in-verilog-30774.html">next chapter</a> explores methods of making the multiplication operation faster.
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30769" class="post-30769 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/building-math-circuits/faster-parameterized-adder-in-verilog-30769.html" rel="bookmark">A faster adder circuit</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/building-math-circuits/faster-parameterized-adder-in-verilog-30769.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-04T10:48:11-07:00">2015-10-04</time><time class="updated" datetime="2022-05-03T13:04:01-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/building-math-circuits/faster-parameterized-adder-in-verilog-30769.html">
				<img width="1" height="1" src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-add.svg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="(c) Copyright 2016 Coert Vonk" loading="lazy" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Implements carry-lookahead adders using circuits of logic gates  Written in Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>
<h2 style="counter-reset: h2 3 h3">
    Carry-lookahead adders
</h2>

<p>
    <img class="alignright wp-image-17212 "  title=""  src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-add.svg" alt="(c) Copyright 2016 Coert Vonk" width="75" />

    This chapter introduces algorithms to reduce the delay when adding numbers. We will look at two carry-lookahead adders using logic gates. \(\)
</p>

<h3>
    Carry-lookahead adder
</h3>
<p>
    Adding a <em>carry-lookahead</em> circuit can make the carry generation much faster. The individual bit adders no longer calculate outgoing carries, but instead generate propagate and generate signals.
</p>
<p>
    We define a Partial Full Adder (<code>pfa</code>) module with the usual ports <em>a</em> and <em>b</em> for the summands, carry input <em>c<sub>i</sub></em> , the sum <em>s</em>, and two new signals propagate <em>p</em> and generate <em>g</em>. The <em>propagate</em> (<em>p</em>) indicates that the bit would not generate the carry bit itself, but will pass through a carry from a lower bit. The <em>generate</em> (<em>g</em>) signal indicates that the bit generates a carry independent of the incoming carry. The functionality of the <code>pfa</code> module is expression the circuit and Boolean equations shown below.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-pfa-block.svg">
                    <img class="aligncenter wp-image-17120" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math-adder-pfa-block.svg" alt="(c) Copyright 2016 Coert Vonk" width="164" />
                </a>
                <div>
                    $$
                        \begin{align*}
                            g &#038;=a \cdot b \\
                            p &#038;=a \oplus b \\
                            s &#038;=p \oplus c_i
                        \end{align*}
                    $$
                </div>
            </div>
            <figcaption>
                1-bit partial full adder
            </figcaption>
        </figure>
    </div>
</p>
<p>
    For bit position <em>n</em>, the outgoing carry <em>c<sub>n</sub></em> is a function of <em>p<sub>n</sub></em>, <em>g<sub>n</sub></em> and the incoming carry <em>c<sub>i,n</sub></em>. Except for bit position <em>0</em>, the incoming carry equals the outgoing carry of the previous <code>pfa</code>, \(c_{i,n}=c_{o,n-1}\)
    $$
        \begin{align*}
            c_n &#038;= g_n + c_{in_{n}} \cdot p_n \\
            &#038;= g_n + c_{n-1} \cdot p_n
        \end{align*}
    $$
</p>
<p>
    For a 4-bit <code>cla</code> this results in the following equations for the carryout signals:
    $$
        \begin{align*}
            c_0&#038; = g_0 + c_i \cdot p_0 \\
            c_1&#038; = g_1 + c_0 \cdot p_1 \\
            c_2&#038; = g_2 + c_1 \cdot p_2 \\
            c_3&#038; = g_3 + c_2 \cdot p_3 \\
        \end{align*}
    $$
</p>
<p>
    Substituting the <em>c<sub>n-1</sub></em>
    <div class="scale-font">
        $$
            \begin{align*}
                c_0 &#038;= g_0 + c_{i} \cdot p_0 \\
                c_1 &#038;= g_1 + (g_0 + c_{i} \cdot p_0) \cdot p_1 \\
                &#038;= g_1 + g_0 \cdot p_1 + c_{i} \cdot p_0 \cdot p_1 \\
                c_2 &#038;= g_2 + (g_1 + g_0 \cdot p_1 + c_{i} \cdot p_0 \cdot p_1) \cdot p_2 \\
                &#038;= g_2 + g_1 \cdot p_2 + g_0 \cdot p_1 \cdot p_2 + c_{i} \cdot p_0 \cdot p_1 \cdot p_2 \\
                c_3 &#038;= g_3 + (g_2 + g_1 \cdot p_2 + g_0 \cdot p_1 \cdot p_2 + c_{i} \cdot p_0 \cdot p_1 \cdot p_2) \cdot p_3 \\
                &#038;= g_3 + g_2 \cdot p_3 + g_1 \cdot p_2 \cdot p_3 + g_0 \cdot p_1 \cdot p_2 \cdot p_3 +c_{i} \cdot p_0 \cdot p_1 \cdot p_2 \cdot p_3
            \end{align*}
        $$
    </div>
</p>
<p>
    The outgoing carries <em>c<sub>0…3</sub></em> no longer depend on each other, thereby eliminating the &#8220;ripple effect&#8221;. The outgoing carries can now be implemented with only 3 gate delays (1 for p/g generation, 1 for the ANDs and 1 for the final OR assuming gates with 5 inputs).
</p>
<p>
    The circuit below gives an example of a 4-bit carry look-ahead adder.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-lookahead-circuit-4-bit.svg">
                <img class="wp-image-17122" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math-adder-lookahead-circuit-4-bit.svg" alt="(c) Copyright 2016 Coert Vonk" width="350" />
            </a>
            <figcaption>
                4-bit carry-lookahead adder
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The complexity of the carry look-ahead increases dramatically with the bit number. Instead of calculating higher bit carries, one may daisy chaining the carry logic as shown for the 12-bit adder below.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-lookahead-circuit-12-bit.svg">
                <img class="wp-image-17123" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math-adder-lookahead-circuit-12-bit.svg" alt="(c) Copyright 2016 Coert Vonk" width="600" />
            </a>
            <figcaption>
                12-bit carry-lookahead adder
            </figcaption>
        </figure>
    </div>
</p>
<p>
    An implementation can be found at GitHub

    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h4>
    Results
</h4>
<p>
    The propagation delay <em>t<sub>pd</sub></em> depends on size <em>n</em> and the value of operands. For a given size <em>n</em>, adding the value <em>1</em> to an operand that contains all zeroes causes the longest propagation delay. The post-map Timing Analysis tool reveals the worst-case propagation delays for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Terasic Altera Cyclone IV DE0-Nano</a>. The exact value depends on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;">8.1 ns</td>
                        <td style="text-align: right;">7.2 ns</td>
                        <td style="text-align: right;">5.3 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;">9.8 ns</td>
                        <td style="text-align: right;">8.7 ns</td>
                        <td style="text-align: right;">6.2 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;">10.0 ns</td>
                        <td style="text-align: right;">8.9 ns</td>
                        <td style="text-align: right;">6.2 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;">15.2 ns</td>
                        <td style="text-align: right;">13.5 ns</td>
                        <td style="text-align: right;">9.5 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;">21.8 ns</td>
                        <td style="text-align: right;">19.7 ns</td>
                        <td style="text-align: right;">13.6 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">42-bits</td>
                        <td style="text-align: right;">24.4 ns</td>
                        <td style="text-align: right;">21.7 ns</td>
                        <td style="text-align: right;">14.9 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-lookaheadcarry-measurement3.svg">
                    <img class="wp-image-16751" src="https://coertvonk.com/wp-content/uploads/math-adder-lookaheadcarry-measurement3.svg" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay in 1-level carry-lookahead adder
            </figcaption>
        </figure>
    </div>
</p>

<h3>
    Multi-level carry-lookahead adder
</h3>
<p>
    To improve speed for larger word sizes, we can add a second level of carry look ahead. To facilitate this, we extend the <code>cla</code> circuit by adding \(p_{i,j}\) and \(g_{i,j}\) outputs. The propagate signal \(p_{i,j}\) indicates that an incoming carry propagates from bit position \(i\) to \(j\). The generate signal \(g_{i,j}\) indicates that a carry is generated at bit position \(j\), or if a carry out is generated at a lower bit position and propagates to position \(j\).
</p>
<p>
    For a 4-bit block the equations are
    $$
        \begin{align*}
            p_{0,3} &#038;= p_3 \cdot p_2 \cdot p_1 \cdot p_0 \\
            g_{0,3} &#038;= g_3 + p_3 \cdot g_2 + p_3 \cdot p_2 \cdot g_1 + p_3 \cdot p_2 \cdot p_1 \cdot g_0 \\
            c_o &#038;= g_{3,0} + p_{3,0} \cdot c_i
        \end{align*}
    $$
</p>
<p>
    The circuit for a 16-bit two-level carry-lookahead adder is shown below

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-lookahead-circuit-2-level-16-bit.svg">
                <img class="wp-image-17124" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math-adder-lookahead-circuit-2-level-16-bit.svg" alt="(c) Copyright 2016 Coert Vonk" width="600" />
            </a>
            <figcaption>
                16-bit carry-save adder using two levels of &#8216;cla&#8217;
            </figcaption>
        </figure>
    </div>
</p>
<p>
    An implementation can be found at GitHub
    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&amp;issues=1&amp;language=1&amp;name=1&amp;owner=1&amp;pattern=Circuit%20Board&amp;stargazers=1&amp;theme=Light" width="500" />         </a>
    </div>
</p>

<h4>
    Results
</h4>
<p>
    Once more, the propagation delay \(t_{pd}\) depends size \(N\) and the value of operands. For a given size \(N\), adding the value <em>1</em> to an operand that contains all zeroes causes the longest propagation delay.
</p>
<p>
    Once more, the post-map Timing Analysis predicts the worst-case propagation delays for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Terasic Altera Cyclone IV DE0-Nano</a>. As usual, the exact value depends on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;">8.1 ns</td>
                        <td style="text-align: right;">7.2 ns</td>
                        <td style="text-align: right;">4.3 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;">9.3 ns</td>
                        <td style="text-align: right;">8.3 ns</td>
                        <td style="text-align: right;">5.8 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;">11.4 ns</td>
                        <td style="text-align: right;">10.2 ns</td>
                        <td style="text-align: right;">7.1 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;">15.3 ns</td>
                        <td style="text-align: right;">13.6 ns</td>
                        <td style="text-align: right;">9.6 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;">18.6 ns</td>
                        <td style="text-align: right;">16.7 ns</td>
                        <td style="text-align: right;">11.6 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">42-bits</td>
                        <td style="text-align: right;">18.0 ns</td>
                        <td style="text-align: right;">16.1 ns</td>
                        <td style="text-align: right;">11.2 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-lookaheadcarry2lvl.-measurements.svg">
                    <img class="wp-image-16751" src="https://coertvonk.com/wp-content/uploads/math-adder-lookaheadcarry2lvl.-measurements.svg" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay in 2-level carry-lookahead adder
            </figcaption>
        </figure>
    </div>
</p>

<h3>
    Others
</h3>
<p>
    Other adder designs are carry-skip, carry-select and prefix adders.
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                Following this &#8220;Carry-lookahead adders using logic gates&#8221;, the <a href="../../hw/building-math-circuits/parameterized-multiplier-in-verilog-30772.html">next chapter</a> shows an implementation of a multiplier introduced in <a href="../../inquiries/computer-math/math-operations-using-gates-30710.html">Chapter 7</a> of the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;.
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30766" class="post-30766 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/building-math-circuits/parameterized-adder-and-subtractor-in-verilog-30766.html" rel="bookmark">Adder and subtractor circuits</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/building-math-circuits/parameterized-adder-and-subtractor-in-verilog-30766.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-03T10:45:18-07:00">2015-10-03</time><time class="updated" datetime="2022-05-03T13:03:55-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/building-math-circuits/parameterized-adder-and-subtractor-in-verilog-30766.html">
				<img width="1" height="1" src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-add.svg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="(c) Copyright 2016 Coert Vonk" loading="lazy" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Implements an adder and subtractor using circuits of logic gates. Written in parameterized Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>

<h2 style="counter-reset: h2 2 h3">
    Adder and subtractor using logic gates
</h2>
<p>
    <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-logo-implementation-add.svg"><img class="alignright wp-image-17212 "  title=""  src="https://coertvonk.com/wp-content/uploads/math-logo-implementation-add.svg" alt="(c) Copyright 2016-2022 Coert Vonk" width="75" /></a>

    The inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8221; introduced the <em>carry-propagate adder</em> and the <em>borrow-propagate subtractor. </em>Here we will recapitulate and implement these using Verilog HDL.\(\)
</p>

<h3>
    Carry-propagate adder
</h3>
<p>
    The <em>full adder</em> (<code>fa</code>) forms the basic building block. This full adder adds two 1-bit values <em>a</em> and <em>b</em> to the incoming carry<em> (c<sub>i</sub></em>), and outputs a 1-bit sum (<em>s</em>) and a 1-bit outgoing carry (<em>c<sub>o</sub></em>). The circuit and Boolean equations, shown below, give the relations between these inputs and outputs.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <div class="circuit-container">
                    <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/adder/fa-block.html">
                        <img loading="lazy" class="aligncenter" title="(c) Copyright 2017-2022 by Coert Vonk" src="../../wp-content/logic-simulation/adder/fa-block.svg" alt="" width="204" height="200" />
                        <button class="circuit-animate no-print" style="top: 0%; right: 0%;">
                            Animate
                        </button>
                    </a>
                </div>
                <div>
                    $$
                        \begin{aligned}
                            s &#038;= a \oplus b \oplus c_i\\
                            c_o &#038;= a \cdot b + c_i \cdot (a \oplus b)
                        \end{aligned}
                        \nonumber
                    $$
                </div>
            </div>
            <figcaption>
                1-bit full adder
            </figcaption>
        </figure>
    </div>
</p>
<p>
    To build a <em>n</em>-bit propagate-adder, we combine <em>n</em> <code>fa</code> blocks. The circuits adds the least significant bits and passes the carry on to the next bit, and so on. Combining the output bits forms the sum <em>s</em>. The circuit shown below gives an example of a 4-bit carry-propagate adder.

    <div class="flex-container">
        <figure>
            <div class="circuit-container">
                <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/adder/4-bit&#32;carry-propagate.html">
                    <img class="aligncenter" title="(c) Copyright 2017-2022 by Coert Vonk" src="../../wp-content/logic-simulation/adder/4-bit&#32;carry-propagate.svg" alt="" width="420" />
                    <button class="circuit-animate no-print" style="top: 0%; right: 0%;">
                        Animate
                    </button>
                </a>
            </div>
            <figcaption>
                4-bit carry-propagate adder
            </figcaption>
        </figure>
    </div>
</p>
<p>
    We describe the circuit using array instantiation. In this <code>a[]</code> and <code>b[]</code> are the summands, <code>c<sub>i</sub>[]</code> is the in-coming carry, <code>c<sub>o</sub>[]</code> is the out-going carry and <code>s[]</code> is the sum.
</p>
<p>
    <pre class="brush: verilog; title: ; toolbar: false; notranslate" title="">math_adder_fa_block fa [N-1:0] ( .a  ( a ),
    .b  ( b ),
    .ci ( {c[N-2:0], 1'b0} ),
    .s  ( s[N-1:0] ),
    .co ( {s[N], c[N-2:0]}) );</pre>
</p>
<p>
    The compiler will optimize the <code>fa</code> blocks with forced inputs, but most <code>fa</code> blocks will compile to a RTL netlist as shown below.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math_adder_ripplecary_rtl_fablock.svg">
                <img class="wp-image-16637" title="(c) Copyright 2016 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math_adder_ripplecary_rtl_fablock.svg" alt="(c) Copyright 2016-2022 Coert Vonk" width="350" />
            </a>
            <figcaption>
                1-bit full adder (fa) block in RTL
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The 4-bit adder compiles into the daisy chained <code>fa</code> blocks as shown.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/math_adder_ripplecary_rtl.svg">
                <img class="wp-image-16639" title="(c) Copyright 2016-2022 Coert Vonk" src="../../wp-content/uploads/math_adder_ripplecary_rtl.svg" alt="(c) Copyright 2016-2022 Coert Vonk" width="600" />
            </a>
            <figcaption>
                4-bit carry-propagate adder in RTL
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The complete Verilog HDL code along with the test bench and constraint files are available through GitHub for <a href="https://www.avnet.com/shop/us/products/avnet-engineering-services/aes-s6mb-lx9-g-3074457345628965461/">Xilinx (Spartan-6 LX9</a>) and <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Altera (Cyclone IV DE0-Nano)</a> boards.
    <div class="flex-container tight">
         <a class="hide-anchor" href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h4>
    Results
</h4>
<p>
    The propagation delay \(t_{pd}\) depends on size <em>N</em> and the value of operands. For a given size <em>N</em>, adding the value <code>1</code> to an operand that contains all zeroes causes the longest propagation delay.
</p>
<p>
    The worst-case propagation delays for the <a href="http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&#038;No=593">Altera Cyclone IV on the DE0-Nano</a> are found using the post-map Timing Analysis tool. The exact values depend on the model and speed grade of the FPGA, the silicon itself, voltage and the die temperature.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <table class="results">
                    <tr>
                        <th>\(N\)</th>
                        <th colspan="3">Timing Analysis</th>
                        <th>Measured</th>
                    </tr>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <th></th>
                        <th>slow 85°C</th>
                        <th>slow 0°C</th>
                        <th>fast 0°C</th>
                        <th>actual</th>
                    </tr>
                    <tr>
                        <td style="text-align: right;">4-bits</td>
                        <td style="text-align: right;">6.9 ns</td>
                        <td style="text-align: right;">6.2 ns</td>
                        <td style="text-align: right;">4.3 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">8-bits</td>
                        <td style="text-align: right;">8.6 ns</td>
                        <td style="text-align: right;">7.6 ns</td>
                        <td style="text-align: right;">5.4 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">16-bits</td>
                        <td style="text-align: right;">15.7 ns</td>
                        <td style="text-align: right;">13.9 ns</td>
                        <td style="text-align: right;">9.7 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">27-bits</td>
                        <td style="text-align: right;">20.2 ns</td>
                        <td style="text-align: right;">18.0 ns</td>
                        <td style="text-align: right;">12.3 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">32-bits</td>
                        <td style="text-align: right;">26.0 ns</td>
                        <td style="text-align: right;">23.2 ns</td>
                        <td style="text-align: right;">15.7 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">42-bits</td>
                        <td style="text-align: right;">30.2 ns</td>
                        <td style="text-align: right;">26.9 ns</td>
                        <td style="text-align: right;">18.1 ns</td>
                        <td style="text-align: right;"></td>
                    </tr>
                </table>
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-adder-ripplecarry-measurements2.svg">
                    <img class="wp-image-16751" src="https://coertvonk.com/wp-content/uploads/math-adder-ripplecarry-measurements2.svg" alt="" width="100%" />
                </a>
            </div>
            <figcaption>
                Propagation delay in propagate-carry adder
            </figcaption>
        </figure>
    </div>
</p>

<h3>
    Borrow-propagate subtractor
</h3>
<p>
    Similar to addition, the simplest subtraction method is <em>borrow-propagate</em>, as introduced in <a href="https://coertvonk.com/inquiries/computer-math/math-operations-using-gates-30710#rippleborrowsubtractor">Chapter 7</a> of the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8220;. Again, we will start by building a 1-bit subtractor (<code>fs</code>). The inputs <em>a</em> and <em>b</em> represent the 1-bit binary numbers being added. Output <em>d</em>, the difference. <em>l<sub>i</sub></em> and <em>l<sub>o</sub></em> are the incoming and outgoing borrow/loan signals.
</p>
<p>
    The outputs <em>d</em> and <em>l<sub>o</sub></em> can be expressed as a function of the inputs. The difference <em>d</em> is an Exclusive-OR function, just as the sum was for addition.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <div class="circuit-container">
                    <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/subtractor/fs-block.html">
                        <img class="aligncenter" title="(c) Copyright 2017-2022 by Coert Vonk" src="../../wp-content/logic-simulation/subtractor/fs-block.svg" alt="" width="204" />
                        <button class="circuit-animate no-print" style="bottom: 0%; right: 0%;">
                            Animate
                        </button>
                    </a>
                </div>
                <div>
                    $$
                        \begin{align*}
                            d&#038;=a \oplus b \oplus l_i \\
                            l_o&#038;=\overline{a} \cdot b + l_i \cdot (\overline{a \oplus b})
                        \end{align*}
                    $$
                </div>
            </div>
            <figcaption>
                1-bit full subtractor
            </figcaption>
        </figure>
    </div>
</p>
<p>
    To build a 4-bit subtractor we combine four of these building blocks.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <div class="circuit-container">
                    <a class="hide-anchor fancybox-iframe" href="../../wp-content/logic-simulation/subtractor/4-bit&#32;borrow-propagate.html">
                        <img class="aligncenter" title="(c) Copyright 2017-2022 by Coert Vonk" src="../../wp-content/logic-simulation/subtractor/4-bit&#32;borrow-propagate.svg" alt="" width="453" />
                        <button class="circuit-animate no-print" style="top: 0%; right: 0%;">
                            Animate
                        </button>
                    </a>
                </div>
            </div>
            <figcaption>
                4-bit borrow-propagate subtractor
            </figcaption>
        </figure>
    </div>
</p>
<p>
    The implementation of the borrow-propagate subtractor is very similar to the adder can be found at GitHub.

    <div class="flex-container tight">
         <a href="https://github.com/cvonk/FPGAmath">
             <img src="https://socialify.git.ci/cvonk/FPGAmath/image?description=1&#038;issues=1&#038;language=1&#038;name=1&#038;owner=1&#038;pattern=Circuit%20Board&#038;stargazers=1&#038;theme=Light" width="500" />
         </a>
    </div>
</p>

<h3>
    Combined adder and subtractor
</h3>
<p>
    Another method to subtract is based around the fact that \(a &#8211; b = a + (-b)\). This allows us to build a circuit that can add or subtract. When the operation input <em>op</em> equals <code>1</code>, it subtracts <em>b</em> from <em>a</em>, otherwise it adds the values.
</p>
<p>
    Under two&#8217;s complement, subtracting <em>b</em> is the same as adding the bit-wise complement of <em>b</em> and adding <code>1</code>. The inputs <em>b</em> is negated by inverting its bits (using an XOR with signal <em>op</em>), and <code>1</code> is added by setting the least significant carry input to <code>1</code>. We can build this a 4-bit adder/subtractor using <code>fa</code> blocks as shown below, where <em>r</em> is the result.

    <div style="text-align: center;">
        <figure>
            <div class="flex-container">
                <a class="hide-anchor fancybox" href="../../wp-content/uploads/math-addersubtractor-circuit.svg">
                    <img class="wp-image-17119 size-full" title="(c) Copyright 2015-2022 Coert Vonk" src="https://coertvonk.com/wp-content/uploads/math-addersubtractor-circuit.svg" alt="(c) Copyright 2015-2022 Coert Vonk" width="450" />
                </a>
            </div>
            <figcaption>
                4-bit combined adder and subtractor
            </figcaption>
        </figure>
    </div>
</p>
<p>
    Note that the circuit also includes a overflow detection for two&#8217;s complement. Overflow occurs when <em>c<sub>2</sub></em> differs from the final carry-out <em>c<sub>3</sub></em>.
</p>
<p>
    In all these ripple carry adder and subtractors, the carry propagates from the lowest to the highest bit position. This propagation causes a delay that is linear with the number bits.
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                Moving on from this math adder and subtractor using logic gates, the <a href="../../hw/building-math-circuits/faster-parameterized-adder-in-verilog-30769.html">next chapter</a> explores faster circuits.
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-12758" class="post-12758 post type-post status-publish format-standard has-post-thumbnail hentry category-building-math-circuits tag-fpga tag-logic tag-math tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../technology/unfinished/fpga-math-verilog-12758/5.html" rel="bookmark">Introduction</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../technology/unfinished/fpga-math-verilog-12758/5.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-01T18:51:32-07:00">2015-10-01</time><time class="updated" datetime="2022-05-03T13:03:10-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../technology/unfinished/fpga-math-verilog-12758/5.html">
				<img width="200" height="200" src="../../wp-content/uploads/buildingmath2.jpg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="derived work" loading="lazy" srcset="../../wp-content/uploads/buildingmath2.jpg 200w, ../../wp-content/uploads/buildingmath2-100x100.jpg 100w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    This article series describes implementations of math operations using circuits of logic gates. Written in Verilog HDL for Altera and Xilinx FPGA&#8217;s.
</p>
<p>
    Primary school teaches our students methods for addition, subtraction, multiplication and division. Computer hardware implements similar methods and performs them with astounding speed. This enables applications such as computer vision, process control, encryption, hearing aids, video compression to dubious practices as high-frequency trading.
</p>

<h2>
    Introduction
</h2>

<p>
    This article describes how to build such hardware. In such, it is a sequel to the inquiry &#8220;<a href="../../category/inquiries/computer-math.html">How do Computers do Math?</a>&#8221; that in the chapter &#8220;<a href="../../inquiries/computer-math/math-operations-using-gates-30710.html">Math Operations Using Gates</a>&#8221; introduced conceptual circuits using logic gates. We will model the various math operations using digital gates. Here we combine the gates into circuits and describe them using the Verilog Hardware Description Language (HDL). These Verilog HDL descriptions are compiled and mapped to a Field Programmable Gate Array (FPGA).
</p>
<p>
    Working knowledge of the Verilog HDL is assumed. To learn more about Verilog HDL, I recommend the book FPGA Prototyping with Verilog Examples, an online class or <a href="http://web.mit.edu/6.111/www/f2015/index.html">lecture slides</a>. To help you get up to speed with the development boards, wrote Getting Started documents for two popular <a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html">Altera </a>and <a href="../../hw/logic/ise-spartan6-lx9-12604.1.html">Xilinx</a> boards.
</p>
<p>
    We aim to study algorithms to implement the algorithms in generic VLSI, and as such do will not use the highly optimized carry chain connections present on many FPGAs.
</p>

<h3>
    Hail to the FPGA
</h3>

<p>
    Let&#8217;s take this moment to honor the virtues of the FPGA. A FPGA can do many things at the same time and still respond immediately to input events. It is generally more complicated to create and debug the same logic in a FPGA compared to a microprocessor. Because of the challenges that FPGA development poses, many systems combine FPGAs and microprocessors to get the best of both worlds. For example, to recognize objects in a video stream, one would implement the pre-processing (noise removal, normalization, edge detection) in an FPGA, but the higher-level logic on a CPU or DSP.
</p>
<p>
    With a FPGA, you can put massive parallel structures in place. For example, an high-speed data stream can be distributed across the whole FPGA chip to be processed in parallel, instead of having a microprocessor deal with it sequentially.
</p>
<p>
    FPGAs can accelerate machine learning algorithms, video encoding, custom algorithms, compression, indexing and cryptography. By implements a soft microprocessor as part of the FPGA it can also handle high level protocols such as handle board management, protocol bridging and security tasks. [<a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7359309">IEEExplore</a>]

<h3>
    Tools
</h3>
<p>
    The code examples were tested on an Altera &#8220;Cyclone IV E&#8221; FPGA using Quartus Prime 16.1. Earlier code iterations used a Xilinx &#8220;Spartan-6&#8221; with their ISE Design Suite. The Verilog descriptions should work equally well on other boards or environments.
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                Continue reading:
                <ol>
                    <li><a href="../../hw/building-math-circuits/demonstration-30764.html">Demonstration</a></li>
                    <li><a href="../../hw/building-math-circuits/parameterized-adder-and-subtractor-in-verilog-30766.html">Adder</a> (and subtractor)</li>
                    <li><a href="../../hw/building-math-circuits/faster-parameterized-adder-in-verilog-30769.html">Faster adder</a> (and subtractor)</li>
                    <li><a href="../../hw/building-math-circuits/parameterized-multiplier-in-verilog-30772.html">Multiplier</a></li>
                    <li><a href="../../hw/building-math-circuits/faster-parameterized-multiplier-in-verilog-30774.html">Faster multiplier</a></li>
                    <li><a href="../../hw/building-math-circuits/parameterized-divider-in-verilog-30776.html">Divider</a></li>
                    <li><a href="../../hw/building-math-circuits/parameterized-square-root-in-verilog-30778.html">Square root</a> (and conclusion)</li>
                </ol>
            </div>
        </div>
    </div>    
</p>	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-12604" class="post-12604 post type-post status-publish format-standard has-post-thumbnail hentry category-logic tag-ide tag-logic tag-verilog wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../hw/logic/ise-spartan6-lx9-12604.1.html" rel="bookmark">Starting with Xilinx</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../hw/logic/ise-spartan6-lx9-12604.1.html" rel="bookmark"><time class="entry-date published" datetime="2015-09-16T21:53:22-07:00">2015-09-16</time><time class="updated" datetime="2022-05-03T13:00:15-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../hw/logic/ise-spartan6-lx9-12604.1.html">
				<img width="200" height="200" src="../../wp-content/uploads/ise-spartan6-lx9.jpg" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="" loading="lazy" srcset="../../wp-content/uploads/ise-spartan6-lx9.jpg 200w, ../../wp-content/uploads/ise-spartan6-lx9-100x100.jpg 100w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>This describes how to install the development environment for the <a href="https://products.avnet.com/wps/portal/ema">Avnet&#8217;s Xilinx Spartan-6 FPGA LX9 MicroBoard</a> under Windows 10 x64. For Altera boards, refer to <a href="../../hw/logic/quartus-cycloneiv-de0nano-15932.html">Getting started with FPGA design using Altera Quartus Prime</a>. Another interesting Xilinx based board is the <a href="https://xess.com/static/media/appnotes/FpgasNowWhatBook.pdf">XuLA</a> (XC3S200A).</p>
<p>Note 1: you need to be logged into em.avnet.com to access the links. This might be the only occasion where I had to use the Edge browser to access the <a href="https://www.avnet.com/wps/portal/us/">Support &#038; Download</a> area.</p>
<p>Note 2: I can&#8217;t describe the install for the ChipScope Pro, because my license expired.</p>
<h2>Install the Xilinx ISE Design Suite</h2>
<ol>
<li>ISE Design Suite
<ul>
<li>download version 14.7 from xilinx.com</li>
<li>extract the tar file, and run xsetup.exe</li>
<li>select ISE WebPACK</li>
<li>have some patience.<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
<li>Xlinx License Manager
<ul>
<li>will start automatically</li>
<li>get Free Vivado/ISE WebPack License » next</li>
<li>sign in (if needed create an account first)</li>
<li>generate a node locked license for ISE WebPACK</li>
<li>the <code>Xilinx.lic</code> will arrive as an email attachment</li>
<li>click Load License button, and install the license from the email<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
<li>Running on Windows 10
<ul>
<li>ISE is in maintenance mode, and doesn&#8217;t support Windows 10 (or 8.x)</li>
<li>According <a href="https://www.eevblog.com/forum/fpga/guide-getting-xilinx-ise-to-work-with-windows-8-64-bit/?PHPSESSID=5u25j16v8fmkc741fdp95211g7">eevblog</a>, crashes with file dialogs in ISE and iMPACT can be prevented by turning off Smart Heap. To do so:
<ul>
<li>rename <code>libPortability.dll</code> to <code>libPortability.dll.orig</code></li>
<li>copy <code>libPortabilityNOSH.dll</code> to <code>libPortability.dll</code> in</li>
</ul>
</li>
<li>in
<ul>
<li><code>C:\Xilinx\14.7\ISE_DS\ISE\lib\nt64</code></li>
<li><code>C:\Xilinx\14.7\ISE_DS\common\lib\nt64</code> (copy dll from first location)<br />
	    <span style="color: #ffffff;">:</span></li>
</ul>
</li>
</ul>
</li>
<li>See if it starts
<ul>
<li>Double-click the ISE Design Suite icon on your desktop<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
</ol>
<h2>Install Avnet Board Support</h2>
<ol>
<li>Install the board description (XDB)
<ul>
<li>Install the Spartan-6 FPGA LX9 MicroBoard XDB file from em.avnet.com</li>
<li>unzip, then again</li>
<li>unzip <code>avnet_edk14_3_xbd_files.zip</code> file to the <EDK>\board folder.<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
<li>Install USB-to-UART driver
<ul>
<li>Download the CP210x virtual com port driver from <a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers">silabs.com</a>.</li>
<li>Extract, and install by running <code>CP210xVCPInstaller_x64.exe</code></li>
<li>Verify that Serial Port &#8220;Silicon Lapbs CP2010x USB to UART Bridge (COMx)&#8221; appears in Device Manager when the micro-USB cable is plugged in. For details see the <a href="https://www.avnet.com/wps/portal/us/">CP210x_setup_guide</a>.</li>
<li>Walk through the examples in the board&#8217;s <a href="http://avnetexpress.avnet.com/content/adx/documents/en_us/GS-AES-S6MB-LX9-G-12_4-v1_1.pdf">Getting Started Guide</a>. Note that instead of HyperTerm, you can use PuTTY.<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
<li>Install USB-to-JTAG driver
<ul>
<li>Download the <a href="https://digilent.com/">Digilent Adept 2.16.1 System</a>.</li>
<li>Run the executable to install</li>
<li>Verify that the &#8220;Digilent USB Controller&#8221; appears in Device Manager when the USB Type A plug is plugged in.<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
<li>Install JTAG programming utility
<ul>
<li>Download the <a href="https://digilent.com/">Digilent Plugin for Xlinx Tools</a>.</li>
<li>Extract, and follow instructions in the enclosed <code>Digilent_Plug-in_Xilinx_v14.pdf</code></li>
<li>Copy the files from the nt64 folder to <code><code>C:\Xilinx\14.7\ISE_DS\ISE\lib\nt64\plugins\Digilent\libCseDigilent\<br />
	    <span style="color: #ffffff;">:</span></code></code></li>
</ul>
</li>
<li>Later, to program using the JTAG interface
<ul>
<li>Xilinx ISE » Tools » iMPACT</li>
<li>Double-click boundary scan</li>
<li>Output -> Cable setup
<ul>
<li>select &#8220;Digilent USB JTAG cable&#8221;</li>
<li>the port will show your port(s)</li>
<li>speed = select speed</li>
<li>click Ok. The speed field will become empty. click Ok once more.</li>
</ul>
</li>
<li>Right-click boundry window, and select Initialize chain (with the microboard connected)
<ul>
<li>set the configuration file (.bit)</li>
<li>select as target device</li>
</ul>
</li>
<li>Save the prj.<br />
	<span style="color: #ffffff;">:</span></li>
</ul>
</li>
</ol>
<h2>A first circuit</h2>
<p>I walked through the examples in the (old) book FPGA Prototyping with Verilog Examples. It targets Spartan 3, but still seems useful. In particular see chapter 2.6.1.</p>
<ol>
<li><strong>Create a new design</strong>
<ul>
<li>Double-click the ISE icon on the desktop</li>
<li>File » New Project
<ul>
<li>location, working directory = ..</li>
<li>name = eq2</li>
<li>top level src type = HDL</li>
<li>Evaluation Dev Board = Avnet Spartan-6 LX9 MicroBoard</li>
<li>Synthesis tool = XST</li>
<li>Simulator = ISim</li>
</ul>
</li>
<li>Project » New Source » Verilog Module
<ul>
<li>Enter port names
<ul>
<li>a input bus 1 0</li>
<li>b input bus 1 0</li>
<li>aeqb output</li>
</ul>
</li>
<li>Use the text editor to enter the code <code>eq2.v</code> as shown below
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 1ps

module eq2(
     input [1:0] a,
     input [1:0] b,
     output aeqb
 );

  wire e0, e1; // internal signal declaration

  eq1 eq_bit0_unit(.i0(a[0]), .i1(b[0]), .eq(e0));
  eq1 eq_bit1_unit(.i0(a[1]), .i1(b[1]), .eq(e1));

  assign aeqb = e0 & e1; // a and b are equal if individual bits are equal
endmodule</pre>
</li>
</ul>
</li>
<li>Project » New Source » Verilog Module
<ul>
<li>Enter port names
<ul>
<li>i0 input</li>
<li>i1 input</li>
<li>eq output</li>
</ul>
</li>
<li>Use the text editor to enter the code <code>eq1.v</code> as shown below
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 1ps
module eq1(
    input i0,
    input i1,
    output eq
    );

  wire p0, p1; // internal signal declaration

  assign eq = p0 | p1 ;
  assign p0 = ~i0 & ~i1 ;
  assign p1 = i0 & i1 ;

endmodule</pre>
</li>
</ul>
</li>
<li>Project » New Source » Implementation Constraints File
<ul>
<li>Enter the physical I/O pin assignments are user constraints.</li>
<li>Refer to the <a href="https://www.avnet.com/wps/portal/us/">schematics</a>, or hardware guide for details.</li>
<li>Use the text editor to enter the code <code>eq2.ucf</code> as shown below.
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">CONFIG VCCAUX=3.3;
NET a<0> LOC = B3 | IOSTANDARD = LVCMOS33 | PULLDOWN; #DIP switch-1
NET a<1> LOC = A3 | IOSTANDARD = LVCMOS33 | PULLDOWN; #DIP switch-2
NET b<0> LOC = B4 | IOSTANDARD = LVCMOS33 | PULLDOWN; #DIP switch-3
NET b<1> LOC = A4 | IOSTANDARD = LVCMOS33 | PULLDOWN; #DIP switch-4
NET aeqb LOC = P4 | IOSTANDARD = LVCMOS18;            #LED D2</pre>
</li>
</ul>
</li>
<li>Verify
<ul>
<li>Select the desired source file</li>
<li>In the process window (below), click the &#8216;+&#8217; before &#8220;Synthesize &#8211; XST&#8221;</li>
<li>Double-click &#8220;Check Syntax&#8221;</li>
<li>The results will be shown in the transcript at the bottom<br />
<span style="color: #ffffff;">:</span></li>
</ul>
</li>
</ul>
</li>
<li><strong>Synthesis</strong>
<ul>
<li>Generates a .bit file to be uploaded to the FPGA later</li>
<li>Select the top-level verilog file (has a little green square in the icon)
<ul>
<li>In the Process Window, double click &#8220;Generate Programming File&#8221;</li>
<li>The transcript at the bottom will show the results</li>
<li>Correct problems if needed</li>
<li>Check the design summary (Process Windows » Design Summary)<br />
<span style="color: #ffffff;">:</span></li>
</ul>
</li>
</ul>
</li>
<li><strong>Create a test bench</strong>
<ul>
<li>Project » New Source » Verilog Test Fixture</li>
<li>name = eq2_test</li>
<li>associate with eq2</li>
<li>add the stimulus as shown in <code>eq2_test.v</code> below
<pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">`timescale 1ns / 1ps

module eq2_test;

  reg [1:0] a;  // inputs
  reg [1:0] b;

  wire aeqb;  // output

  // Instantiate the Unit Under Test (UUT)
  eq2 uut ( .a(a), 
            .b(b), 
            .aeqb(aeqb) );

  initial begin
    a = 0;  // initialize inputs
    b = 0;

    #100;  // wait 100 ns for global reset to finish
        
    // stimulus starts here
    a = 2'b00; b = 2'b00; #100 $display("%b", aeqb);
    a = 2'b01; b = 2'b00; #100 $display("%b", aeqb);
    a = 2'b01; b = 2'b11; #100 $display("%b", aeqb);
    a = 2'b10; b = 2'b10; #100 $display("%b", aeqb);
    a = 2'b10; b = 2'b00; #100 $display("%b", aeqb);
    a = 2'b11; b = 2'b11; #100 $display("%b", aeqb);
    a = 2'b11; b = 2'b01; #100 $display("%b", aeqb);
  end
endmodule</pre>
<p><span style="color: #ffffff;">:</span></li>
</ul>
</li>
<li><strong>Behavior Simulation</strong>
<ul>
<li>Xilinx ISE comes packages with the ISim simulator. It is straightforward to use and fine for basic test benches. Other choices are <a href="https://eda.sw.siemens.com/en-US/">ModelSim</a> (<a href="http://ghettohaxxx-blog.azurewebsites.net/modelsim-on-windows-8-1/">hard to install under Windows 10</a>, in my case the install suddenly continued after >24 hours), Active-HDL, and the online tool <a href="https://www.edaplayground.com/">edaplayground.com</a>.</li>
<li>Design Window (top left) » Simulation radio-button. In the drop-down list below it, select &#8220;Behavioral&#8221; view.
<ul>
<li>Select the <code>eq2_test.v</code> file</li>
<li>In the Process Window, double-click the Simulate Behavior Model
<ul>
<li>Will give a Windows Security Alert for isimgui.exe. Allow it access.</li>
</ul>
</li>
<li>Navigate the ISim window to verify functionality. Use the F7 to zoom out. We expect an output like:<br />
<a href="../../hw/logic/ise-spartan6-lx9-12604/attachment/lx9-eq2-isim.html" rel="attachment wp-att-12630"><img  title="" loading="lazy" class="alignnone size-full wp-image-12630" src="../../wp-content/uploads/lx9-eq2-isim.png" alt="lx9-eq2-isim" width="982" height="225" srcset="https://coertvonk.com/wp-content/uploads/lx9-eq2-isim.png 982w, ../../wp-content/uploads/lx9-eq2-isim-400x92.png 400w, ../../wp-content/uploads/lx9-eq2-isim-768x176.png 768w, ../../wp-content/uploads/lx9-eq2-isim-250x57.png 250w, ../../wp-content/uploads/lx9-eq2-isim-300x69.png 300w, ../../wp-content/uploads/lx9-eq2-isim-350x80.png 350w, ../../wp-content/uploads/lx9-eq2-isim-500x115.png 500w, ../../wp-content/uploads/lx9-eq2-isim-750x172.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /><span style="color: #ffffff;">:</span></a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Timing Simulation</strong>
<ul>
<li>In the Design Window (top left), select &#8220;Simulation&#8221;. In the drop down list below it, select &#8220;Post-Route&#8221;.</li>
<li>Select the <code>eq2_test.v</code> file</li>
<li>In the Process Window, double-click &#8220;Simulate Post-Place &#038; Route Model&#8221;. This will reveal the timing delays as shown below<br />
<a href="../../hw/logic/ise-spartan6-lx9-12604/attachment/lx9-eq2-isim-timing.html" rel="attachment wp-att-12632"><img loading="lazy" class="alignnone size-full wp-image-12632" src="../../wp-content/uploads/lx9-eq2-isim-timing.png" alt="lx9-eq2-isim-timing" width="984" height="220" srcset="https://coertvonk.com/wp-content/uploads/lx9-eq2-isim-timing.png 984w, ../../wp-content/uploads/lx9-eq2-isim-timing-400x89.png 400w, ../../wp-content/uploads/lx9-eq2-isim-timing-768x172.png 768w, ../../wp-content/uploads/lx9-eq2-isim-timing-250x56.png 250w, ../../wp-content/uploads/lx9-eq2-isim-timing-300x67.png 300w, ../../wp-content/uploads/lx9-eq2-isim-timing-350x78.png 350w, ../../wp-content/uploads/lx9-eq2-isim-timing-500x112.png 500w, ../../wp-content/uploads/lx9-eq2-isim-timing-750x168.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /><span style="color: #ffffff;">:</span></a></li>
</ul>
</li>
<li><strong>Configure FPGA</strong>
<ul>
<li>Plug-in the USB type B connector from the LX9 microboard</li>
<li>Process Window » double click &#8220;Configure Target Device&#8221;
<ul>
<li>Before starting iMPACT, it will warn you that &#8220;No iMPACT project file exists&#8221;. Click OK to proceed.</li>
<li>Double-click &#8220;Boundary Scan&#8221;</li>
<li>Right-click in the right window, and select &#8220;Cable Setup&#8221;
<ul>
<li>Communication Mode = &#8220;Digilent USB JTAG cable&#8221;</li>
<li>Verify that port will show up</li>
<li>speed = select speed</li>
<li>click OK twice</li>
</ul>
</li>
<li>Right-click in the right window, and select &#8220;Initialize chain&#8221;
<ul>
<li>assign the configuration file (.bit) created earlier</li>
<li>do not attached SPI or BPI PROM</li>
<li>click OK</li>
<li>right-click the Xilinx block, and select as &#8220;Set Target Device&#8221;</li>
</ul>
</li>
<li>File » Save Project as &#8220;eq2&#8221; in the same directory as the source files.
<ul>
<li>Will tell you to &#8220;Set the new project file from the Configure Target Device process properties&#8221;. Don&#8217;t worry, it seems to do this automatically. Click OK to proceed.</li>
</ul>
</li>
<li>Right-click the Xlilinx block, and select program.
<ul>
<li>This should report &#8220;Program Succeeded&#8221;</li>
</ul>
</li>
<li>Close iMPACT, and save it once more on the way out.<br />
<span style="color: #ffffff;">:</span></li>
</ul>
</li>
</ul>
</li>
<li><strong>Give it a spin</strong>
<ul>
<li>It is finally time to try the real FPGA board
<ul>
<li>Input is through the DIP switches (SW1) on the left of the FPGA.</li>
<li>Output is the red LED (D2) located just below the FPGA.</li>
<li>We expect the LED to be &#8220;on&#8221; when switch position 1 and 2 are identical to position 3 and 4.</li>
</ul>
</li>
<li>If you prefer bigger switches, I suggest wiring up a breadboard to PMOD1 (J5) connectors.
<ul>
<li>Vcc and Ground are available on respectively pin 5 (or 11) and 6 (or 12).</li>
<li>Remember to modify the user constraints file accordingly. For reference, I attached a fairly complete user constraints file spartan6-lx9.ucf.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>See Xilinx&#8217; <a href="https://www.xilinx.com/support/university/ise/ise-teaching-material/hdl-design.html">student area</a> for more info</p>
<p><em>c&#8217;est tout</em></p>
	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30975" class="post-30975 post type-post status-publish format-standard has-post-thumbnail hentry category-how-cpu-work tag-cpu tag-logic tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../inquiries/how-cpu-work/implementation-30975.html" rel="bookmark">Implementation</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../inquiries/how-cpu-work/implementation-30975.html" rel="bookmark"><time class="entry-date published" datetime="2011-12-04T17:36:22-08:00">2011-12-04</time><time class="updated" datetime="2022-05-03T13:08:59-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../inquiries/how-cpu-work/implementation-30975.html">
				<img width="300" height="300" src="../../wp-content/uploads/school-microprocessor.png" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="" loading="lazy" srcset="../../wp-content/uploads/school-microprocessor.png 300w, ../../wp-content/uploads/school-microprocessor-200x200.png 200w, ../../wp-content/uploads/school-microprocessor-250x250.png 250w, ../../wp-content/uploads/school-microprocessor-100x100.png 100w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Shows an implementation of the LC-3 instruction set in Verilog HDL. Includes test benches and simulation results.
</p>
<h2>
    Implementation
</h2>
<p>
    One dark Oregon winter afternoon, I said &#8220;Let&#8217;s build a micro processor&#8221;.  What started as a noble thought became a rather intense but fun project.
</p>
<p>
    This section describes the implementation of the LC-3 using a Field Programmable Logic Array.  An FPGA is an array blocks with basic functionality such as Lookup table, a full adder and a flip-flop.  For more information on FPGAs refer to the section Programmable Logic in the inquiry &#8220;<a href="https://coertvonk.com/inquiries/computer-math/electrical-circuits-4245">How do computers do math?</a>&#8220;.
</p>
<p>
    The FPGA used to implement the LC-3 microprocessor is a Xilinx Spartan6, but others will fit equally well.  My choice was inspired by the pricing of the development board and the fairly good free development tools.  Other choices would be Altera for the FPGA, their IDE or Icarus Verilog for the synthesizer and simulator and GTKWave for the waveform viewer.  Refer to the end of this article for links and references to introductory Verilog books.
</p>

<h3>
    Schematic
</h3>
<p>
    The top level schematic is shown below.  The modules are defined using Verilog, an hardware description language (HDL) used to model digital logic.

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-schematic2.png">
                <img class="alignnone wp-image-4178"  title=""  src="https://coertvonk.com/wp-content/uploads/lc3-schematic2.png" alt="" width="600" srcset="https://coertvonk.com/wp-content/uploads/lc3-schematic2.png 1337w, ../../wp-content/uploads/lc3-schematic2-400x310.png 400w, ../../wp-content/uploads/lc3-schematic2-768x595.png 768w, ../../wp-content/uploads/lc3-schematic2-1024x793.png 1024w, ../../wp-content/uploads/lc3-schematic2-250x194.png 250w, ../../wp-content/uploads/lc3-schematic2-300x232.png 300w, ../../wp-content/uploads/lc3-schematic2-350x271.png 350w, ../../wp-content/uploads/lc3-schematic2-500x387.png 500w, ../../wp-content/uploads/lc3-schematic2-750x581.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />
            </a>
            <figcaption>LC3 schematic</figcaption>
        </figure>
    </div>
</p>
<p>
    This is my first Verilog implementation, please bear with me ..
</p>

<h3>
    State
</h3>

<h4>
    State.v
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, source file <code>State.v</code>:

    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title=""> cCtrl,      // controller control signal
                input eREADY,           // external memory ready signal
                output wire pEn,        // update PC enable
                output wire fEn,        // fetch output enable
                output wire dEn,        // decode enable
                output wire [2:0] mOp,  // memory operation selector
                output wire rWe );      // register write enable

    `include "UpdatePC.vh"
    `include "Fetch.vh"
    `include "Decode.vh"
    `include "Registers.vh"
    `include "MemoryIF.vh"

    parameter [3:0] STATE_UPDATEPC = 4'd0,   // update program counter
                    STATE_FETCH    = 4'd1,   // fetch instruction
                    STATE_DECODE   = 4'd2,   // decode
                    STATE_ALU      = 4'd3,   // ALU
                    STATE_ADDRNPC  = 4'd4,   // calc tPC address
                    STATE_ADDRMEM  = 4'd5,   // calc memory address
                    STATE_INDMEM   = 4'd6,   // indirect memory address
                    STATE_RDMEM    = 4'd7,   // read memory
                    STATE_WRMEM    = 4'd8,   // write memory
                    STATE_WRREG    = 4'd9,   // write register
                    STATE_ILLEGAL  = 4'd15;  // illegal state

    parameter       EREADY_INA     = 1'b0,   // external memory not ready
                    EREADY_ACT     = 1'b1,   // external memory ready
                    EREADY_X       = 1'bx;

    wire [1:0] iType   = cCtrl[4:3];  // instruction type (00=alu, 01=ctrl, 10=mem)
    wire [1:0] maType  = cCtrl[2:1];  // memory access type (00=indaddr, 01=read, 02=write, 03=updreg)
    wire       indType = cCtrl[0];    // indirect memory access type

    reg [3:0] state;   // current state
    reg [3:0] nState;  // next state
    reg [6:0] out;     // current output signals
    reg [6:0] nOut;    // next output signals

    assign pEn = out[6];
    assign fEn = out[5];
    assign dEn = out[4];
    assign mOp = out[3:1];
    assign rWe = out[0];

        // the combinational logic

    always @(state, eREADY, iType, maType, indType, state, out)
        casex ({state, eREADY, iType, maType, indType})
        {STATE_UPDATEPC, EREADY_X,   ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_FETCH;    nOut = {PEN_0, FEN_1, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_FETCH,    EREADY_ACT, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_DECODE;   nOut = {PEN_0, FEN_0, DEN_1, MOP_NONE, RWE_0}; end
            {STATE_DECODE,   EREADY_X,   ITYPE_ALU, MATYPE_X,   INDTYPE_X}  : begin nState = STATE_ALU;      nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_DECODE,   EREADY_X,   ITYPE_CTL, MATYPE_X,   INDTYPE_X}  : begin nState = STATE_ADDRNPC;  nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_DECODE,   EREADY_X,   ITYPE_MEM, MATYPE_X,   INDTYPE_X}  : begin nState = STATE_ADDRMEM;  nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_ADDRMEM,  EREADY_X,   ITYPE_X,   MATYPE_IND, INDTYPE_X}  : begin nState = STATE_INDMEM;   nOut = {PEN_0, FEN_0, DEN_0, MOP_RD,   RWE_0}; end
        {STATE_ADDRMEM,  EREADY_X,   ITYPE_X,   MATYPE_RD,  INDTYPE_X}  : begin nState = STATE_RDMEM;    nOut = {PEN_0, FEN_0, DEN_0, MOP_RD,   RWE_0}; end
        {STATE_INDMEM,   EREADY_ACT, ITYPE_X,   MATYPE_X,   INDTYPE_RD} : begin nState = STATE_RDMEM;    nOut = {PEN_0, FEN_0, DEN_0, MOP_RDI,  RWE_0}; end
        {STATE_ADDRMEM,  EREADY_X,   ITYPE_X,   MATYPE_WR,  INDTYPE_X}  : begin nState = STATE_WRMEM;    nOut = {PEN_0, FEN_0, DEN_0, MOP_WR,   RWE_0}; end
        {STATE_INDMEM,   EREADY_ACT, ITYPE_X,   MATYPE_X,   INDTYPE_WR} : begin nState = STATE_WRMEM;    nOut = {PEN_0, FEN_0, DEN_0, MOP_WR,   RWE_0}; end
        {STATE_ALU,      EREADY_X,   ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_WRREG;    nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_1}; end
        {STATE_ADDRMEM,  EREADY_X,   ITYPE_X,   MATYPE_REG, INDTYPE_X}  : begin nState = STATE_WRREG;    nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_1}; end
        {STATE_RDMEM,    EREADY_ACT, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_WRREG;    nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_1}; end
        {STATE_WRMEM,    EREADY_ACT, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_UPDATEPC; nOut = {PEN_1, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_WRREG,    EREADY_X,   ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_UPDATEPC; nOut = {PEN_1, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_ADDRNPC,  EREADY_X,   ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = STATE_UPDATEPC; nOut = {PEN_1, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        {STATE_FETCH,    EREADY_INA, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = state;          nOut = out;                                    end
        {STATE_INDMEM,   EREADY_INA, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = state;          nOut = out;                                    end
        {STATE_RDMEM,    EREADY_INA, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = state;          nOut = out;                                    end
        {STATE_WRMEM,    EREADY_INA, ITYPE_X,   MATYPE_X,   INDTYPE_X}  : begin nState = state;          nOut = out;                                    end
        default                                                         : begin nState = STATE_ILLEGAL;  nOut = {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_0}; end
        endcase

        // the sequential logic

    always @(negedge clock, posedge reset)
    if (reset)
        begin
            state <= STATE_UPDATEPC;
            out <= {PEN_0, FEN_0, DEN_0, MOP_NONE, RWE_0};
        end
    else
    begin
        state <= nState;
        out <= nOut;
        end;
endmodule&#091;/code&#093;
</p>

<h3>
    Decode
</h3>

<h4>
    Decode.vh
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, header file <code>Decode.vh</code>:
    parameter       DEN_0          = 1'b0,   // Decode enable
                DEN_1          = 1'b1;

parameter [1:0] ITYPE_ALU      = 2'b00,  // generalized instruction type
                ITYPE_CTL      = 2'b01,
                ITYPE_MEM      = 2'b10,
                ITYPE_HLT      = 2'b11,
                ITYPE_X        = 2'bxx;

parameter [1:0] MATYPE_IND     = 2'b00,  // generalized memory access type
                MATYPE_RD      = 2'b01,
                MATYPE_WR      = 2'b10,
                MATYPE_REG     = 2'b11,
                MATYPE_X       = 2'bxx;

parameter       INDTYPE_WR     = 1'b0,   // generalized memory indirection type
                INDTYPE_RD     = 1'b1,
                INDTYPE_X      = 1'bx;</pre>
</p>

<h4>
    Decode.v
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, source file <code>Decode.v</code>:
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module Decode( input clock,
                input reset,
                input en,                   // input enable
                input [15:0] eDIN,          // external memory data input
                input [2:0] psr,            // processor status register
                output [4:0] cCtrl,         // various control signals
                output [1:0] drSrc,         // selects what to write to DR
                output [2:0] uOp,           // selecta ALU operation
                output aOp,                 // selects Address operation
                output pNext,               // selects if PC should branch
                output [2:0] sr1ID,         // source register 1 ID
                output [2:0] sr2ID,         // source register 2 ID
                output [2:0] drID,          // destination register ID
                output wire [4:0] imm,      // lower 5 bits from IR value
                output wire [8:0] offset ); // lower 9 bits from IR value

    `include "ALU.vh"
    `include "Address.vh"
    `include "MemoryIF.vh"
    `include "DrMux.vh"
    `include "UpdatePC.vh"
    `include "Decode.vh"

    parameter [2:0] ID_X = 3'bxxx;

        // Instruction Register (ir)
        // read instruction from external memory bus (after Fetch initiated the bus cycle)

    reg [15:0] ir;
    assign imm    = ir[4:0];  // output the lower 5 bits
    assign offset = ir[8:0];  // output the lower 9 bits

    always @(posedge clock, posedge reset)
    if (reset)
        ir = 16'hffff;
        else
        if (en == DEN_1)
            ir = eDIN;

    parameter [3:0]           // opcodes for the instructions
        I_BR  = 4'b0000,
        I_ADD = 4'b0001,
        I_LD  = 4'b0010,
        I_ST  = 4'b0011,
        I_AND = 4'b0101,
        I_LDR = 4'b0110,
        I_STR = 4'b0111,
        I_NOT = 4'b1001,
        I_LDI = 4'b1010,
        I_STI = 4'b1011,
        I_JMP = 4'b1100,
        I_LEA = 4'b1110,
        I_HLT = 4'b1111;

    reg [20:0] ctl;           // current control signal bundle

        // untangle control signal bundle

    assign cCtrl = ctl[ 20:16 ];  // { iType, maType, indRd }
    assign uOp   = ctl[ 15:13 ];
    assign aOp   = ctl[    12 ];
    assign drSrc = ctl[ 11:10 ];
    assign pNext = ctl[     9 ];
    assign drID  = ctl[  8: 6 ];
    assign sr1ID = ctl[  5: 3 ];
    assign sr2ID = ctl[  2: 0 ];

        // combinational logic to determine control signals

    wire [2:0] uOpAddC = (ir[5]) ? UOP_ADDIMM : UOP_ADDREG;         // candidate for uOp in case of ADD instruction
    wire [2:0] uOpAndC = (ir[5]) ? UOP_ANDIMM : UOP_ANDREG;         // candidate for uOp in case of AND instruction
    wire pNextC        = |(ir[11:9] & psr) ? PNEXT_TPC : PNEXT_NPC; // candidate for pNext in case of BR instruction

    always @(ir[15:12], uOpAddC, uOpAndC, pNextC)
                    // State      State       State       ALU      Address  DrSource    UpdatePC   Registers RegistersRegisters
    case (ir[15:12])// iType      maType      indType     uOp      aOp      drSrc       pNext      drID      sr1ID    sr2ID
        I_ADD   : ctl = {ITYPE_ALU, MATYPE_X,   INDTYPE_X,  uOpAddC, AOP_X,   DRSRC_ALU,  PNEXT_NPC, ir[11:9], ir[8:6], ir[2:0] };
        I_AND   : ctl = {ITYPE_ALU, MATYPE_X,   INDTYPE_X,  uOpAndC, AOP_X,   DRSRC_ALU,  PNEXT_NPC, ir[11:9], ir[8:6], ir[2:0] };
        I_NOT   : ctl = {ITYPE_ALU, MATYPE_X,   INDTYPE_X,  UOP_NOT, AOP_X,   DRSRC_ALU,  PNEXT_NPC, ir[11:9], ir[8:6], ID_X    };
        I_BR    : ctl = {ITYPE_CTL, MATYPE_X,   INDTYPE_X,  UOP_X,   AOP_NPC, DRSRC_X,    pNextC,    ID_X,     ID_X,    ID_X    };
        I_JMP   : ctl = {ITYPE_CTL, MATYPE_X,   INDTYPE_X,  UOP_X,   AOP_SR1, DRSRC_X,    PNEXT_TPC, ID_X,     ir[8:6], ID_X    };
        I_LD    : ctl = {ITYPE_MEM, MATYPE_RD,  INDTYPE_X,  UOP_X,   AOP_NPC, DRSRC_MEM,  PNEXT_NPC, ir[11:9], ID_X,    ID_X    };
        I_LDR   : ctl = {ITYPE_MEM, MATYPE_RD,  INDTYPE_X,  UOP_X,   AOP_SR1, DRSRC_MEM,  PNEXT_NPC, ir[11:9], ir[8:6], ID_X    };
        I_LDI   : ctl = {ITYPE_MEM, MATYPE_IND, INDTYPE_RD, UOP_X,   AOP_NPC, DRSRC_MEM,  PNEXT_NPC, ir[11:9], ID_X,    ID_X    };
        I_LEA   : ctl = {ITYPE_MEM, MATYPE_REG, INDTYPE_X,  UOP_X,   AOP_NPC, DRSRC_ADDR, PNEXT_NPC, ir[11:9], ID_X,    ID_X    };
        I_ST    : ctl = {ITYPE_MEM, MATYPE_WR,  INDTYPE_X,  UOP_X,   AOP_NPC, DRSRC_X,    PNEXT_NPC, ID_X,     ID_X,    ir[11:9]};
        I_STR   : ctl = {ITYPE_MEM, MATYPE_WR,  INDTYPE_X,  UOP_X,   AOP_SR1, DRSRC_X,    PNEXT_NPC, ID_X,     ir[8:6], ir[11:9]};
        I_STI   : ctl = {ITYPE_MEM, MATYPE_IND, INDTYPE_WR, UOP_X,   AOP_NPC, DRSRC_X,    PNEXT_NPC, ID_X,     ID_X,    ir[11:9]};
        default : ctl = {ITYPE_HLT, MATYPE_X,   INDTYPE_X,  UOP_X,   AOP_X,   DRSRC_X,    PNEXT_X,   ID_X,     ID_X,    ID_X    };
    endcase 

endmodule</pre>
</p>

<h3>
    UpdatePC
</h3>

<h4>
    UpdatePC.vh
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, header file <code>UpdatePC.vh</code>:
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">parameter PNEXT_NPC  = 1'b0,  // UpdatePC branch signal
            PNEXT_TPC  = 1'b1,
            PNEXT_X    = 1'bx;

parameter PEN_0      = 1'b0,  // UpdatePC enable
            PEN_1      = 1'b1;</pre>
</p>

<h4>
    UpdatePC.v
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, source file <code>UpdatePC.v</code>:
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module UpdatePC( input clock,
                    input reset,
                    input en,                 // enable signal
                    input [15:0] tPC,         // target program counter
                    input pNext,              // if 1 then branch to tPC
                    output reg [15:0] pc,     // program counter
                    output reg [15:0] nPC );  // next program counter (pc+1)

    `include "UpdatePC.vh"

    wire [15:0] a = (pNext) ? tPC : nPC;     // if pNext==1, then jump to tPC
    wire [15:0] b = (en == PEN_1) ? a : pc;  // change PC only in "Update PC" state
    wire [15:0] c = b + 1'b1;                // use carry input

    always @(posedge clock, posedge reset)
    if (reset)
        begin
            pc  <= 16'h3000;
            nPC <= 16'h3001;
        end
    else
        begin
        pc  <= b;
        nPC <= c;
        end;

endmodule&#091;/code&#093;
</p>

<h3>
    Fetch
</h3>

<h4>
    Fetch.vh
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, header file <code>Fetch.vh</code>:
    parameter FEN_0 = 1'b0,  // fetch enable
            FEN_1 = 1'b1;</pre>
</p>

<h4>
    Fetch.v
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, source file <code>Fetch.v</code>:
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module Fetch( input en,                 // output enable
                input [15:0] pc,          // program counter
                    output reg iBR,           // internal memory address lines
                    output reg [15:0] iADDR,  // internal memory address lines
                output reg iWEA );        // internal memory write enable

    `include "Fetch.vh"

    always @(en, pc)
    begin
        iBR   <= ( en == FEN_1 ) ? 1'b1 : 1'b0;
        iADDR <= ( en == FEN_1 ) ? pc : 16'hxxxx;
        iWEA  <= ( en == FEN_1 ) ? 1'b0 : 1'bx;
    end

endmodule&#091;/code&#093;
</p>

<h3>
    Registers
</h3>

<h4>
    Registers.vh
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, header file <code>Registers.vh</code>:
    parameter       RWE_0 = 1'b0,           // register write enable
                RWE_1 = 1'b1;

parameter [2:0] PSR_POSITIVE = 3'b001,  // processor status register bits
                PSR_ZERO     = 3'b010,  //   should match BR instruction
                PSR_NEGATIVE = 3'b100;</pre>
</p>

<h4>
    Registers.v
</h4>

<p>
    Implementation of the LC-3 instruction set in Verilog, source file <code>Registers.v</code>:
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module Registers( input clock,
                  input reset,
                  input we,                // write enable
                  input [2:0] sr1ID,       // source register 1 ID
                  input [2:0] sr2ID,       // source register 2 ID
                  input [2:0] drID,        // destination register ID
                  input [15:0] dr,         // destination register value
                  output reg [15:0] sr1,   // source register 1 value
                  output reg [15:0] sr2,   // source register 2 value
                  output reg [2:0] psr );  // processor status register

    `include "Registers.vh"

    reg [3:0] id;
    reg [15:0] gpr [0:7];     // general purpose registers

        // write the destination register value, and update Process Status Register (psr)

    always @(posedge clock, posedge reset)
    if (reset)
        for (id = 0; id < 7; id = id + 1)  // initial all registers to 0
        gpr&#091; id &#093; <= 16'h0000;
    else
        if (we == RWE_1)          // when enabled by the FSM
            begin
            if (dr&#091; 15 &#093;)         // update processor status register (neg,zero,pos)
            psr <= PSR_NEGATIVE;
            else if (|dr)
            psr <= PSR_POSITIVE;
            else
            psr <= PSR_ZERO;

                gpr&#091; drID &#093; <= dr;     // write the value dr to the register identified by drID
        end

        // output the value of the register identified by "sr1ID" on output "sr1"
        // output the value of the register identified by "sr2ID" on output "sr2"

    always @(sr1ID, sr2ID, gpr&#091; sr1ID &#093;, gpr&#091; sr2ID &#093;)
    begin
        sr1 = gpr&#091; sr1ID &#093;;
        sr2 = gpr&#091; sr2ID &#093;;
    end

endmodule&#091;/code&#093;
</p>

<h3>
    ALU
</h3>
                    
<h4>
    ALU.vh
</h4>

parameter [2:0] UOP_ADDREG = 3'b000,  // ALU operation
                UOP_ADDIMM = 3'b001,
                UOP_ANDREG = 3'b010,
                UOP_ANDIMM = 3'b011,
                UOP_NOT    = 3'b100,
                UOP_X      = 3'bxxx;</pre>
</p>

<h4>
    ALU.v
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module ALU( input [2:0] uOp,          // operation selector
            input [15:0] sr1,         // source register 1 value (SR1)
            input [15:0] sr2,         // source register 2 value (SR2)
            input [4:0] imm,          // lower 5 bits from instruction register
                output reg [15:0] uOut ); // result of ALU operation

    `include "ALU.vh"

    wire [15:0] imm5 = ({ {11{imm[4]}}, imm[4:0] });  // sign extend to 16 bits

    always @(uOp or sr1 or sr2 or imm5)
    casex (uOp)
        3'b000: uOut = sr1 + sr2;   // ADD Mode 0
        3'b001: uOut = sr1 + imm5;  // ADD Mode 1
        3'b010: uOut = sr1 & sr2;   // AND Mode 0
        3'b011: uOut = sr1 & imm5;  // AND Mode 1
        3'b1xx: uOut = ~(sr1);      // NOT
    endcase
endmodule</pre>
</p>

<h3>
    Address
</h3>

<h4>
    Address.vh
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">parameter AOP_SR1 = 1'b0,  // address operation
          AOP_NPC = 1'b1,
          AOP_X   = 1'bx;</pre>
</p>

<h4>
    Address.v
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module Address( input aOp,                // operation selector
                input [15:0] sr1,         // value source register 1
                input [15:0] nPC,         // next program counter (PC), always PC+1
                input [8:0] offset,       // lower 9 bits from instruction register
                output reg [15:0] aOut ); // target program counter

    `include "Address.vh"

    wire [15:0] offset6 = ({{10{offset[5]}}, offset[5:0]});  // sign extended the 6-bit offset
    wire [15:0] offset9 = ({{ 7{offset[8]}}, offset[8:0]});  // sign extended the 9-bit offset

    always @(aOp or sr1 or nPC or offset6 or offset9)
    case (aOp)
        AOP_SR1 : aOut = sr1 + offset6;  // register + offset
        AOP_NPC : aOut = nPC + offset9;  // next PC  + offset
    endcase

endmodule</pre>
</p>

<h3>
    MemoryIF
</h3>

<h4>
    MemoryIF.vh
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">parameter [2:0] MOP_NONE = 3'b000,  // MemoryIF operation
                MOP_RD   = 3'b100,
                MOP_RDI  = 3'b101,
                MOP_WR   = 3'b110,
                MOP_WRI  = 3'b111;</pre>
</p>

<h4>
    MemoryIF.v
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module MemoryIF( input [2:0] mOp,         // memory operation selector
                 input [15:0] sr2,        // source register 2 value
                 input [15:0] addr,       // address for read or write
                 input [15:0] eDIN,       // external memory data input
                 output reg iBR,          // internal bus request
                 output reg [15:0] iADDR, // internal memory address lines
                 output tri [15:0] eDOUT, // internal memory data output
                 output reg iWEA );       // internal memory write enable

    `include "MemoryIF.vh"

    reg [15:0] eDOUTr;
    assign eDOUT = eDOUTr;

    always @(mOp, sr2, addr, eDIN)
    case (mOp)
        MOP_RD  : begin iBR=1; iWEA = 1'b0; iADDR = addr;     eDOUTr = 16'hzzzz; end
        MOP_RDI : begin iBR=1; iWEA = 1'b0; iADDR = eDIN;     eDOUTr = 16'hzzzz; end
        MOP_WR  : begin iBR=1; iWEA = 1'b1; iADDR = addr;     eDOUTr = sr2;      end
        MOP_WRI : begin iBR=1; iWEA = 1'b1; iADDR = eDIN;     eDOUTr = sr2;      end
        default : begin iBR=0; iWEA = 1'bx; iADDR = 16'hxxxx; eDOUTr = 16'hzzzz; end
    endcase

endmodule</pre>
</p>

<h3>
    DrMux
</h3>

<h4>
    DrMux.vh
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">parameter [1:0] DRSRC_ALU  = 2'b00,  // destination register source selector
                DRSRC_MEM  = 2'b01,
                DRSRC_ADDR = 2'b10,
                DRSRC_X    = 2'bxx;</pre>
</p>

<h4>
    DrMux.v
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module DrMux( input [1:0] drSrc,       // multiplexor selector
              input [15:0] eDIN,       // external memory data input
              input [15:0] addr,       // effective memory address
              input [15:0] uOut,       // result from ALU
              output reg [15:0] dr );  // data that will be stored in DR

    `include "DrMux.vh"

    always @(drSrc or uOut or eDIN or addr)
    case (drSrc)
        DRSRC_ALU  : dr = uOut;
        DRSRC_MEM  : dr = eDIN;
        DRSRC_ADDR : dr = addr;
        default    : dr = 16'hxxxx;
    endcase

endmodule:</pre>
</p>

<h3>
    BusDriver
</h3>

<h4>
    BusDriver.v
</h4>

<p>
    <pre class="brush: verilog; gutter: true; title: ; toolbar: false; notranslate" title="">module BusDriver( input br0,                // input 0, bus request
                    input [15:0] iADDR0,      // input 0, internal memory address lines
                        input iWEA0,              // input 0, internal memory write enable
                    input br1,                // input 1, bus request
                    input [15:0] iADDR1,      // input 1, internal memory address lines
                        input iWEA1,              // input 1, internal memory write enable
                    output tri [15:0] eADDR,  // external memory address lines
                        output tri  eWEA );       // external memory write enable

    assign eWEA  = br1 ? iWEA1 :
                    br0 ? iWEA0 : 1'bz;

    assign eADDR = br1 ? iADDR1 :
                    br0 ? iADDR0 : 16'hzzzz;

endmodule</pre>
</p>

<h2>
    Functional simulation
</h2>

<p>
    The functionality of our microprocessor can be tested by building a test bench.  The bench will supply the clock signal and reset pulse and simulate a random access memory (RAM) containing the test program.  The program is written using in a assembly language and compiled using <a href="https://highered.mheducation.com/sites/0072467509/student_view0/lc-3_simulator.html">LC3Edit</a>.
</p>

<h3>
    Test program
</h3>

<p>
    Exercises a variety of instructions:
    <ul>
        <li>memory read</li>
        <li>alu</li>
        <li>memory write</li>
        <li>control instructions</li>
    </ul>
</p>
<p>
    Written in assembly language

    <div class="align-center">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-memory_asm.png">
                <img class="alignnone wp-image-4153" title="lc3 memory_asm" src="https://coertvonk.com/wp-content/uploads/lc3-memory_asm.png" alt="own work" width="275" srcset="https://coertvonk.com/wp-content/uploads/lc3-memory_asm.png 359w, ../../wp-content/uploads/lc3-memory_asm-226x400.png 226w, ../../wp-content/uploads/lc3-memory_asm-141x250.png 141w, ../../wp-content/uploads/lc3-memory_asm-169x300.png 169w, ../../wp-content/uploads/lc3-memory_asm-198x350.png 198w, ../../wp-content/uploads/lc3-memory_asm-282x500.png 282w" sizes="(max-width: 359px) 100vw, 359px" />
            </a>
            <figcaption>LC3 memory asm</figcaption>
        </figure>
    </div>
</p>
<p>
    LC3Edit compiles this into the object file:

    <div class="align-center">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-memory_obj.png">
                <img class="alignnone wp-image-4154" title="lc3 memory_obj" src="https://coertvonk.com/wp-content/uploads/lc3-memory_obj.png" alt="own work" width="360" srcset="https://coertvonk.com/wp-content/uploads/lc3-memory_obj.png 423w, ../../wp-content/uploads/lc3-memory_obj-384x400.png 384w, ../../wp-content/uploads/lc3-memory_obj-240x250.png 240w, ../../wp-content/uploads/lc3-memory_obj-288x300.png 288w, ../../wp-content/uploads/lc3-memory_obj-336x350.png 336w" sizes="(max-width: 423px) 100vw, 423px" />
            </a>
            <figcaption>LC3 memory obj</figcaption>
        </figure>
    </div>
</p>
<p>
    As part of the compilation, LC3Edit also creates a <code>.hex</code> file.  The contents of this file can be tweaked into a <em>.coe</em> file to be preloaded in the test bench memory.

    <div class="align-center">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-memory_coe2.png">
                <img class="alignnone wp-image-4156" title="lc3 memory_coe2" src="https://coertvonk.com/wp-content/uploads/lc3-memory_coe2.png" alt="own work" width="350" srcset="https://coertvonk.com/wp-content/uploads/lc3-memory_coe2.png 381w, ../../wp-content/uploads/lc3-memory_coe2-250x71.png 250w, ../../wp-content/uploads/lc3-memory_coe2-300x85.png 300w, ../../wp-content/uploads/lc3-memory_coe2-350x99.png 350w" sizes="(max-width: 381px) 100vw, 381px" />
            </a>
            <figcaption>LC3 Memory coe</figcaption>
        </figure>
    </div>
</p>

<h3>
    Memory
</h3>

<p>
    The random access memory (RAM) is created using Xilinx IP's Block Memory Generator 6.2.  The following parameters are used:
    <ul>
        <li>native i/f, single port ram, no byte write enable, minimum area algorithm, width 16, depth 4096, write first, use ENA pin, no output registers, no RSTA pin, enable all warnings.  Initialize memory from the <code>.coe</code> file.</li>
    </ul>
</p>

<h3>
    Test bench and clock/reset signals
</h3>

<p>
    Generate a 50 MHz symmetric clock.
</p>
<p>
    Integrate the parts into a test bench using Verilog.

    `timescale 1ns / 1ps
module SimpleLC3_SimpleLC3_sch_tb();

    reg clock;          // clock                        (generated by test fixture)
    reg reset;          // reset                        (generated by test fixture)

    wire [15:0] eADDR;  // external address             (from LC3 to memory)
    wire [15:0] eDIN;   // external data                (from memory to LC3)
    wire [15:0] eDOUT;  // external data                (from LC3 to memory)
    wire eWEA;          // external write(~read) enable (from LC3 to memory)

        // Instantiate the Unit Under Test
    SimpleLC3 UUT ( .eDOUT(eDOUT),
                    .eWEA(eWEA),
                    .clock(clock),
                    .eREADY(1'b1),  // ready (always 1, for now)
                    .eDIN(eDIN),
                    .reset(reset),
                    .eADDR(eADDR) );

        // Instantiate the Memory, created using Xilinx IP's Block Memory Generator 6.2:
        // Initialize from memory.coe, created from compiling memory.asm using LC3Edit.
    memory RAM( .clka(clock),
                .ena(eENA),
                .wea(eWEA),
                .addra(eADDR[11:0]),
                .dina(eDOUT),
                .douta(eDIN) );

    wire eENA = |(eADDR[15:12] == 4'h3);  // memory is at h3xxx

    initial begin
        clock = 0;
        reset = 0;
    #15 reset = 1;  // wait for global reset to finish
        #22 reset = 0;
    end

    always
    #10 clock <= ~clock;  // 20 ns clock period (50 MHz)

endmodule;[/code]

<h3>
    Simulation results
</h3>

<p>
    For the functional simulation we use ISim that comes bundled with the Xilinx IDE.
</p>
<p>
    The simulation needs to be ran for 1600 ns.
</p>
<p>
    Waveform diagrams are shown below (click to enlarge)

    <div class="flex-container">
        <figure>
            <a href="../../wp-content/uploads/lc3-function-ld.png">
                <img loading="lazy" src="../../wp-content/uploads/lc3-function-ld.png" alt="LC3 Memory load" width="1161" height="694" class="size-full wp-image-4163" srcset="../../wp-content/uploads/lc3-function-ld.png 1161w, ../../wp-content/uploads/lc3-function-ld-400x239.png 400w, ../../wp-content/uploads/lc3-function-ld-768x459.png 768w, ../../wp-content/uploads/lc3-function-ld-1024x612.png 1024w, ../../wp-content/uploads/lc3-function-ld-250x149.png 250w, ../../wp-content/uploads/lc3-function-ld-300x179.png 300w, ../../wp-content/uploads/lc3-function-ld-350x209.png 350w, ../../wp-content/uploads/lc3-function-ld-500x299.png 500w, ../../wp-content/uploads/lc3-function-ld-750x448.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />
            </a>
            <figcaption>LC3 Memory load</figcaption>
        </figure>
        <figure>
            <a href="../../wp-content/uploads/lc3-function-alu.png">
                <img loading="lazy" src="../../wp-content/uploads/lc3-function-alu.png" alt="LC3 ALU operations" width="831" height="650" class="size-full wp-image-4162" srcset="../../wp-content/uploads/lc3-function-alu.png 831w, ../../wp-content/uploads/lc3-function-alu-400x313.png 400w, ../../wp-content/uploads/lc3-function-alu-768x601.png 768w, ../../wp-content/uploads/lc3-function-alu-250x196.png 250w, ../../wp-content/uploads/lc3-function-alu-300x235.png 300w, ../../wp-content/uploads/lc3-function-alu-350x274.png 350w, ../../wp-content/uploads/lc3-function-alu-500x391.png 500w, ../../wp-content/uploads/lc3-function-alu-750x587.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />
            </a>
            <figcaption>LC3 ALU operations</figcaption>
        </figure>
        <figure>
            <a href="../../wp-content/uploads/lc3-function-st.png">
                <img loading="lazy" src="../../wp-content/uploads/lc3-function-st.png" alt="LC3 Memory store" width="849" height="749" class="size-full wp-image-4164" srcset="../../wp-content/uploads/lc3-function-st.png 849w, ../../wp-content/uploads/lc3-function-st-400x353.png 400w, ../../wp-content/uploads/lc3-function-st-768x678.png 768w, ../../wp-content/uploads/lc3-function-st-250x221.png 250w, ../../wp-content/uploads/lc3-function-st-300x265.png 300w, ../../wp-content/uploads/lc3-function-st-350x309.png 350w, ../../wp-content/uploads/lc3-function-st-500x441.png 500w, ../../wp-content/uploads/lc3-function-st-750x662.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />
            </a>
            <figcaption>LC3 Memory store</figcaption>
        </figure>
        <figure>
            <a href="../../wp-content/uploads/lc3-function-control.png">
                <img loading="lazy" src="../../wp-content/uploads/lc3-function-control.png" alt="LC3 Control instructions" width="1131" height="712" class="size-full wp-image-4165" srcset="../../wp-content/uploads/lc3-function-control.png 1131w, ../../wp-content/uploads/lc3-function-control-400x252.png 400w, ../../wp-content/uploads/lc3-function-control-768x483.png 768w, ../../wp-content/uploads/lc3-function-control-1024x645.png 1024w, ../../wp-content/uploads/lc3-function-control-250x157.png 250w, ../../wp-content/uploads/lc3-function-control-300x189.png 300w, ../../wp-content/uploads/lc3-function-control-350x220.png 350w, ../../wp-content/uploads/lc3-function-control-500x315.png 500w, ../../wp-content/uploads/lc3-function-control-750x472.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />
            </a>
            <figcaption>LC3 Control instructions</figcaption>
        </figure>
    </div>
</p>

<h3>
    Timing simulation
</h3>

<p>
    The free Xilinx IDE doesn't support timing simulations.  Instead we will use <a href="https://iverilog.fandom.com/wiki/User_Guide">Icarus Verilog</a> for the synthesis and simulation, <a href="http://gtkwave.sourceforge.net/">GTKWave</a> for viewing the generated waveforms, and Emacs <a href="https://www.verilog.com/verilog-mode.html">verilog-mode</a> for editing.  We will run them natively under Linux.  For those interested, Windows binaries are available from <a href="http://bleyer.org/icarus/">bleyer.org</a>.
</p>
<p>
  This concludes the "Implementation of the LC-3 instruction set in Verilog".
</p>
	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30973" class="post-30973 post type-post status-publish format-standard has-post-thumbnail hentry category-how-cpu-work tag-cpu tag-logic tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../inquiries/how-cpu-work/design-30973.html" rel="bookmark">Design</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../inquiries/how-cpu-work/design-30973.html" rel="bookmark"><time class="entry-date published" datetime="2011-12-03T17:34:11-08:00">2011-12-03</time><time class="updated" datetime="2022-05-03T13:08:55-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../inquiries/how-cpu-work/design-30973.html">
				<img width="300" height="300" src="../../wp-content/uploads/school-microprocessor.png" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="" loading="lazy" srcset="../../wp-content/uploads/school-microprocessor.png 300w, ../../wp-content/uploads/school-microprocessor-200x200.png 200w, ../../wp-content/uploads/school-microprocessor-250x250.png 250w, ../../wp-content/uploads/school-microprocessor-100x100.png 100w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Presents a CPU Design for LC-3 instruction set, that we later implement using Verilog HDL. The illustrations help visualize the design.  The instruction set is based on the book <a href="https://highered.mheducation.com/sites/0072467509/index.html">Introduction to Computer Systems</a> by Patt and Partel. For this text we push the simplicity of this little microprocessor (LC-3) even further as described in <a href="https://coertvonk.com/inquiries/how-cpu-work/instruction-set-30971">Instruction Set</a>.
</p>
<h2>
    Design
</h2>

<p>
    The microprocessor consists of a <em>Data Path</em> and a <em>Control Unit</em>.  Together they implement the various instruction phases.
</p>
<p>
    This section describes an architecture for the LC-3.  It aims at staying true to the von Neumann architecture and instruction cycle names.  However, here we assume the program counter and instruction register are in the data path.
</p>

<h3>
    Data Path
</h3>

<p>
    The schematic below shows the Data Path.  

    <div class="flex-container">
        <figure>
            <a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-data-path3.png">
                <img class="alignnone wp-image-4195"  title=""  src="https://coertvonk.com/wp-content/uploads/lc3-data-path3.png" alt="own work" width="600" srcset="https://coertvonk.com/wp-content/uploads/lc3-data-path3.png 2017w, ../../wp-content/uploads/lc3-data-path3-400x181.png 400w, ../../wp-content/uploads/lc3-data-path3-768x348.png 768w, ../../wp-content/uploads/lc3-data-path3-1024x464.png 1024w, ../../wp-content/uploads/lc3-data-path3-250x113.png 250w, ../../wp-content/uploads/lc3-data-path3-300x136.png 300w, ../../wp-content/uploads/lc3-data-path3-350x158.png 350w, ../../wp-content/uploads/lc3-data-path3-500x226.png 500w, ../../wp-content/uploads/lc3-data-path3-750x339.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />
            </a>
            <figcaption>LC3 data path</figcaption>
        </figure>
    </div>
</p>
<p>
    We use the following conventions
    <ul>
        <li>
            The shaded blocks are modules that implement various functionality.  The module names have been chosen to reflect the <em>instruction phases</em>.
        </li>
        <li>
            Signals connect the blocks.  A signal can be a single wire, or a collection of wires such as the 16 bits that represent the value of the program counter. Signal names are chosen to overlap with operand names where possible.
        </li>
        <li>
            The microprocessor connects to an external memory through the <em>external interface</em>.
        </li>
    </ul>
</p>

<h4>
    Modules
</h4>

<p>
    <div class="flex-container">
        <table class="modules">
            <tr>
                <th>
                    Module
                </th>
                <th>
                    Description
                </th>
            </tr>
            <tr>
                <td>
                    <module>UpdatePC</module>
                </td>
                <td>
                    Maintains the program counter, <datasignal>pc</datasignal>.
                </td>
            </tr>
            <tr>
                <td>
                    <module>Fetch</module>
                </td>
                <td>
                    Initiates the bus cycle, to read the instruction pointed to by <datasignal>pc</datasignal>.
                </td>
            </tr>
            <tr>
                <td>
                    <module>Decode</module>
                </td>
                <td>
                    Reads the instruction from the memory bus and extracts its operands.
                </td>
            </tr>
            <tr>
                <td>
                    <module>Registers</module>
                </td>
                <td>
                    Maintains the register values and processor status register.
                </td>
            </tr>
            <tr>
                <td>
                    <module>ALU</module>
                </td>
                <td>
                    Performs arithmetic and logical operations.
                </td>
            </tr>
            <tr>
                <td>
                    <module>Address</module>
                </td>
                <td>
                    Calculates memory address for memory or control instructions.
                </td>
            </tr>
            <tr>
                <td>
                    <module>MemoryIF</module>
                </td>
                <td>
                    Initiates the external memory bus cycle to read or write data.
                </td>
            </tr>
            <tr>
                <td>
                    <module>DrMux</module>
                </td>
                <td>
                    Destination register multiplexor, selects the value that will be written to the destination register.
                </td>
            </tr>
            <tr>
                <td>
                    <module>BusDriver</module>
                </td>
                <td>
                    Simple arbiter for memory read requests from <module>Fetch</module> and <module>MemoryIF</module>.
                </td>
            </tr>
        </table>
    </div>
</p>

<h4>
    Signals
</h4>

<p>
    <div class="flex-container">
        <table class="signals">
            <tr>
                <th>Group</th>
                <th>Signal</th>
                <th>Description</th>
            </tr>
            <tr>
                <td class="underline" rowspan="3">
                    Program counters
                </td>
                <td><datasignal>pc</datasignal></td>
                <td>Program Counter</td>
            </tr>
            <tr>
                <td><datasignal>nPC</datasignal></td>
                <td>Next program counter (always has the value <datasignal>pc</datasignal><code>+1</code>)</td>
            </tr>
            <tr>
                <td class="underline"><datasignal>tPC</datasignal></td>
                <td class="underline">Target program counter, for <opcode>JMP</opcode> / <opcode>BR*</opcode>.</td>
            </tr>
            <tr>
                <td class="underline" rowspan="4">
                    Operands
                </td>
                <td><datasignal>sr1ID</datasignal></td>
                <td>Source register 1 identifier.<br />Also used as <code>baseRID</code> for <opcode>JMP</opcode> / <opcode>LDR</opcode> / <opcode>STR</opcode></td>
            </tr>
            <tr>
                <td><datasignal>sr2ID</datasignal></td>
                <td>Source register 2 identifier.<br />Also used as <code>srID</code> for <opcode>ST</opcode> / <opcode>STI</opcode> / <opcode>STR</opcode>.</td>
            </tr>
            <tr>
                <td><datasignal>imm</datasignal></td>
                <td>Immediate value</td>
            </tr>
            <tr>
                <td class="underline"><code><datasignal>offset</datasignal></code></td>
                <td class="underline">Memory address offset</td>
            </tr>
            <tr>
                <td class="underline" rowspan="4">
                    Register values
                </td>
                <td><datasignal>sr1</datasignal></td>
                <td>Value of the register identified by signal <datasignal>sr1ID</datasignal></td>
            </tr>
            <tr>
                <td><datasignal>sr2</datasignal></td>
                <td>Value of the register identified by <code><datasignal>sr2ID</datasignal></code></td>
            </tr>
            <tr>
                <td><datasignal>dr</datasignal></td>
                <td>Value written to the register identified by <datasignal>drID</datasignal></td>
            </tr>
            <tr>
                <td class="underline"><datasignal>psr</datasignal></td>
                <td class="underline">Value of the processor status register</td>
            </tr>
            <tr>
                <td  class="underline" rowspan="2">
                    Intermediate values
                </td>
                <td><datasignal>uOut</datasignal></td>
                <td>Result of the ALU operation</td>
            </tr>
            <tr>
                <td class="underline"><datasignal>aOut</datasignal>=<datasignal>addr</datasignal>=<datasignal>tPC</datasignal></td>
                <td class="underline">Result of the address calculation</td>
            </tr>
            <tr>
                <td class="underline" rowspan="4">
                    External bus
                </td>
                <td><datasignal>eADDR</datasignal></td>
                <td>Memory address</td>
            </tr>
            <tr>
                <td><datasignal>eDIN</datasignal></td>
                <td>Instruction/data being read from memory</td>
            </tr>
            <tr>
                <td><datasignal>eDOUT</datasignal></td>
                <td>Data being written from memory</td>
            </tr>
            <tr>
                <td class="underline"><datasignal>eWEA</datasignal></td>
                <td class="underline">Write enable signal going to memory.<br />Value <code>0</code> for read, <code>1</code> for write.</td>
            </tr>
            <tr>
                <td rowspan="3">
                    Internal bus
                </td>
                <td><datasignal>iBR0</datasignal>, <datasignal>IBR1</datasignal></td>
                <td>Internal bus request signals</td>
            </tr>
            <tr>
                <td><datasignal>iADDR0</datasignal>, <datasignal>iADDR1</datasignal></td>
                <td>Internal memory addresses</td>
            </tr>
            <tr>
                <td><datasignal>iWEA0</datasignal>, <datasignal>iWEA1</datasignal></td>
                <td>Internal write enable signals</td>
            </tr>
        </table>
    </div>
</p>

<h4>
    Examples
</h4>

<h5>Read memory</h5>

<p>
    <span style="text-decoration: underline;">Assume</span>: the instruction at address <code>3000</code> is <code>201F</code>. 

</p>
<p>
    Assigning the label <code style="color: red">LDv</code> to memory location <code>3020</code>, this instruction decodes to

    <div class="flex-container tight">
        <table class="assembly">
            <tr>
                <th>
                    Address
                </th>
                <th>
                    Value
                </th>
                <th>
                    Label
                </th>
                <th>
                    Mnemonic
                </th>
            </tr>
            <tr>
                <td>
                    x3000
                </td>
                <td>
                    x201F
                </td>
                <td></td>
                <td>
                    LD r0, LDv
                </td>
            </tr>
            <tr>
                <td>
                    x3020
                </td>
                <td>
                    x1234
                </td>
                <td>
                    LDv
                </td>
                <td></td>
            </tr>
        </table>
    </div>
</p>
<p>
    Issuing a <em>reset</em>, triggers the following sequence of events:
    <div class="flex-container">
        <table class="example">
            <tr>
                <th>#</th>
                <th>Module</th>
                <th>Action</th>
                <th>Signals</th>
            </tr>
            <tr>
                <td>1.</td>
                <td>
                    <module>UpdatePC</module>
                </td>
                <td>
                    Resets the program counter  to its initial value
                </td>
                <td>
                    <datasignal>pc=3000</datasignal>, <datasignal>nPC=3001</datasignal>
                </td>    
            </tr>
            <tr>
                <td>2.</td>
                <td>
                    <module>Fetch</module>
                </td>
                <td>
                    Starts a read cycle for the instruction
                </td>
                <td>
                    <datasignal>br0=1</datasignal>,
                    <datasignal>iADDR0=3000</datasignal>,
                    <datasignal>iWEA0=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>3.</td>
                <td>
                    <module>BusDriver</module>
                </td>
                <td>
                    Forwards the read cycle to the external memory bus
                </td>
                <td>
                    <datasignal>eADDR=3000</datasignal>,
                    <datasignal>eWEA=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>4.</td>
                <td>
                    <module>ExtMemory</module>
                </td>
                <td>
                    Responds with the instruction
                </td>
                <td>
                    <datasignal>eDIN=201f</datasignal>
                </td>
            </tr>
            <tr>
                <td>5.</td>
                <td>
                    <module>Decode</module>
                </td>
                <td>
                    Extracts the operands
                </td>
                <td>
                    <datasignal>offset=1f</datasignal>, 
                    <datasignal>drID=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>6.</td>
                <td>
                    <module>Address</module>
                </td>
                <td>
                    Adds the <datasignal>offset</datasignal> to <datasignal>nPC</datasignal>
                </td>
                <td>
                    <datasignal>addr=3020</datasignal>
                </td>
            </tr>
            <tr>
                <td>7.</td>
                <td>
                    <module>MemoryIF</module>
                </td>
                <td>
                    Starts a read cycle for the data
                </td>
                <td>
                    <datasignal>iBR1=1</datasignal>,
                    <datasignal>iADDR1=3020</datasignal>,
                    <datasignal>iWEA1=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>8.</td>
                <td>
                    <module>BusDriver</module>
                </td>
                <td>
                    Forwards the read cycle to the external memory bus
                </td>
                <td>
                    <datasignal>eADDR=3020</datasignal>,
                    <datasignal>eWEA=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>9.</td>
                <td>
                    <module>ExtMemory</module>
                </td>
                <td>
                    Responds with the data
                </td>
                <td>
                    <datasignal>eDIN=1234</datasignal>
                </td>
            </tr>
            <tr>
                <td>10.</td>
                <td>
                    <module>DrMux</module>
                </td>
                <td>
                    Selects the <datasignal>eDIN</datasignal> input
                </td>
                <td>
                    <datasignal>dr=1234</datasignal>
                </td>
            </tr>
            <tr>
                <td>11.</td>
                <td><module>Registers</module></td>
                <td>Writes the value <datasignal>dr</datasignal> to the register identified by <datasignal>drID</datasignal></td>
                <td></td>
            </tr>
        </table>
    </div>
</p>

<h5>
    ALU operation
</h5>

<p>
    <span style="text-decoration: underline;">Assume</span>: <datasignal>pc=3003</datasignal>, the register <code>R0=1234</code> and <code>R1=4321</code>. The instruction at the next address <code>3004</code> is <code>1801</code>.
</p>    
<p>
    This instruction decodes to

    <div class="flex-container tight">
        <table class="assembly">
            <tr>
                <th>
                    Address
                </th>
                <th>
                    Value
                </th>
                <th>
                    Label
                </th>
                <th>
                    Mnemonic
                </th>
            </tr>
            <tr>
                <td>
                    x3004
                </td>
                <td>
                    x1801
                </td>
                <td></td>
                <td>
                    ADD R4, R0, R1
                </td>
            </tr>
        </table>
    </div>
</p>
<p>
    The following sequence of events will happen:

    <div class="flex-container">
        <table class="example">
            <tr>
                <th>#</th>
                <th>Module</th>
                <th>Action</th>
                <th>Signals</th>
            </tr>
            <tr>
                <td>1.</td>
                <td>
                    <module>UpdatePC</module>
                </td>
                <td>
                    Increments the program counter
                </td>
                <td>
                    <datasignal>pc=3004</datasignal>
                </td>
            </tr>
            <tr>
                <td>2.</td>
                <td>
                    <module>Fetch</module>
                </td>
                <td>
                    Starts a read cycle for the instruction
                </td>
                <td>
                    <datasignal>iBR0=1</datasignal>,
                    <datasignal>iADDR0=3004</datasignal>,
                    <datasignal>iWEA0=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>3.</td>
                <td>
                    <module>BusDriver</module>
                </td>
                <td>
                    Forwards the read cycle to the external memory bus
                </td>
                <td>
                    <datasignal>eADDR=3004</datasignal>,
                    <datasignal>eWEA=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>4.</td>
                <td>
                    <module>ExtMemory</module>
                </td>
                <td>
                    Responds with the instruction
                </td>
                <td>
                    <datasignal>eDIN=1801</datasignal>
                </td>
            </tr>
            <tr>
                <td>5.</td>
                <td>
                    <module>Decode</module>
                </td>
                <td>
                    Extracts the operands
                </td>
                <td>
                    <datasignal>sr1ID=0</datasignal>, 
                    <datasignal>sr2ID=1</datasignal>,
                    <datasignal>drID=4</datasignal>
                </td>
            </tr>
            <tr>
                <td>6.</td>
                <td>
                    <module>Registers</module>
                </td>
                <td>
                    Supplies the values for the registers identified by <datasignal>sr1ID</datasignal> and <datasignal>sr2ID</datasignal></td>
                <td>
                    <datasignal>sr1=1234</datasignal>,
                    <datasignal>sr2=4321</datasignal>
                </td>
            </tr>
            <tr>
                <td>7.</td>
                <td>
                    <module>ALU</module>
                </td>
                <td>
                    Calculates the sum of <datasignal>sr1</datasignal> and <datasignal>sr2</datasignal></td>.
                <td>
                    <datasignal>uOut=5555</datasignal>
                </td>
            </tr>
            <tr>
                <td>8.</td>
                <td>
                    <module>DrMux</module>
                </td>
                <td>
                    Selects the <datasignal>uOut</datasignal> input.
                </td>
                <td>
                    <datasignal>dr=5555</datasignal>
                </td>
            </tr>
            <tr>
                <td>9.</td>
                <td>
                    <module>Registers</module>
                </td>
                <td>
                    Writes the value <datasignal>dr</datasignal> to the register identified by <datasignal>drID</datasignal>
                </td>
                <td></td>
            </tr>
        </table>
    </div>
</p>

<h5>
    Write memory
</h5>

<p>
    <span style="text-decoration: underline;">Assume</span>: <datasignal>pc=3007</datasignal>, register <code>R4=AAAA</code> and the label <code style="color: red;">STIa</code> refers to data address <code>3024</code> containing the value <code>3028</code>. The instruction at the next address <code>3008</code> is <code>B81D</code>. 
</p>    
<p>
    This instruction decodes to

    <div class="flex-container tight">
        <table class="assembly">
            <tr>
                <th>
                    Address
                </th>
                <th>
                    Value
                </th>
                <th>
                    Label
                </th>
                <th>
                    Mnemonic
                </th>
            </tr>
            <tr>
                <td>
                    x3008
                </td>
                <td>
                    xB81D
                </td>
                <td></td>
                <td>
                    STI R4, STIa
                </td>
            </tr>
            <tr>
                <td>
                    x3024
                </td>
                <td>
                    x3028
                </td>
                <td>
                    STIa
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    x3028
                </td>
                <td>
                    xBAD0
                </td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
</p>
<p>
    The following sequence of events will happen:
    <div class="flex-container">
        <table class="example">
            <tr>
                <th>#</th>
                <th>Module</th>
                <th>Action</th>
                <th>Signals</th>
            </tr>
            <tr>
                <td>1.</td>
                <td>
                    <module>UpdatePC</module>
                </td>
                <td>
                    Increments the program counter
                </td>
                <td>
                    <datasignal>pc=3008</datasignal>,
                    <datasignal>nPC=3009</datasignal>
                </td>
            </tr>
            <tr>
                <td>2.</td>
                <td>
                    <module>Fetch</module>
                </td>
                <td>
                    Starts a read cycle for the instruction.
                </td>
                <td>
                    <datasignal>iBR0=1</datasignal>,
                    <datasignal>iADDR0=3008</datasignal>,
                    <datasignal>iWEA0=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>3.</td>
                <td>
                    <module>Bus driver</module>
                </td>
                <td>
                    Forwards the read cycle to the external memory bus.
                </td>
                <td>
                    <datasignal>eADDR=3008</datasignal>,
                    <datasignal>eWEA=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>4.</td>
                <td>
                    <module>ExtMemory</module>
                </td>
                <td>
                    Responds with the instruction.
                </td>
                <td>
                    <datasignal>eDIN=b81f</datasignal>
                </td>
            </tr>
            <tr>
                <td>5.</td>
                <td>
                    <module>Decode</module>
                </td>
                <td>
                    Extracts the operands (<code>sr2ID</code> represents the <code>SR</code> operand)
                </td>
                <td>
                    <datasignal>sr2ID=4</datasignal>,
                    <datasignal>offset=1d</datasignal>
                </td>
            </tr>
            <tr>
                <td>6.</td>
                <td>
                    <module>Registers</module>
                </td>
                <td>
                    Supplies the value for the register identified by <datasignal>sr2ID</datasignal>
                </td>
                <td>
                    <datasignal>sr2=aaaa</datasignal>
                </td>
            </tr>
            <tr>
                <td>7.</td>
                <td>
                    <module>Address</module>
                </td>
                <td>
                    Adds the <datasignal>offset</datasignal> to <datasignal>nPC</datasignal>
                </td>.
                <td>
                    <datasignal>addr=3024</datasignal>
                </td>
            </tr>
            <tr>
                <td>8.</td>
                <td>
                    <module>MemoryIF</module>
                </td>
                <td>
                    Starts a read cycle to retrieve the address where to store the value.
                </td>
                <td>
                    <datasignal>iBR1=1</datasignal>,
                    <datasignal>iADDR1=3024</datasignal>,
                    <datasignal>iWEA1=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>9.</td>
                <td>
                    <module>BusDriver</module>
                </td>
                <td>
                    Forwards the read cycle to the external memory bus.
                </td>
                <td>
                    <datasignal>eADDR=3024</datasignal>,
                    <datasignal>eWEA=0</datasignal>
                </td>
            </tr>
            <tr>
                <td>10.</td>
                <td>
                    <module>ExtMemory</module>
                </td>
                <td>
                    Responds with the value
                </td>
                <td>
                    <datasignal>eDIN=3028</datasignal>
                </td>
            </tr>
            <tr>
                <td>11.</td>
                <td>
                    <module>MemoryIF</module>
                </td>
                <td>
                    Starts a write cycle to write the value of register <code>R4</code> to address <code>3028</code></td>
                <td>
                    <datasignal>iBR1=1</datasignal>,
                    <datasignal>iADDR1=3028</datasignal>,
                    <datasignal>iWEA1=1</datasignal>
                </td>
            </tr>
            <tr>
                <td>12.</td>
                <td>
                    <module>BusDriver</module>
                </td>
                <td>
                    Forwards the write cycle to the external memory bus.
                </td>
                <td>
                    <datasignal>eADDR=3028</datasignal>,
                    <datasignal>eWEA=1</datasignal>
                </td>
            </tr>
        </table>
    </div>
</p>

<h3>
    Control unit
</h3>

<p>
    Instructions can be broken up into micro instructions.  These can be implemented using a finite state machine (FSM), where each state corresponds to one micro instruction.
</p>
<p>
    The finite state machine can be visualized as shown in the figure below.
    <ul>
        <li>
            <em>circles</em>, represent the states identified by a unique number and name.
        </li>
        <li>
            <em>double circle</em>, represents the initial state.
        </li>
        <li>
            <em>arrows</em>, represent state transitions.  Labels represent the condition that must be met for the transition to occur.
        </li>
        <li>
            <em>shading</em>, is used to identify the implementation modules.
        </li>
        <li>
            <ctrlsignal>eREADY</ctrlsignal>, indicates that the external memory finished a read or write operation.
        </li>
        <li>
            <ctrlsignal>iType</ctrlsignal>, <ctrlsignal>maType</ctrlsignal>, <ctrlsignal>indType</ctrlsignal> refer to the generalized instruction types generated by <em>Decoder</em>.
        </li>
    </ul>
</p>

<h4>
    State diagram
</h4>

<div class="align-center"><figure><a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-fsm6.png"><img class="alignnone wp-image-4056" title="lc3 fsm6" src="https://coertvonk.com/wp-content/uploads/lc3-fsm6.png" alt="own work" width="500" srcset="https://coertvonk.com/wp-content/uploads/lc3-fsm6.png 1384w, ../../wp-content/uploads/lc3-fsm6-338x400.png 338w, ../../wp-content/uploads/lc3-fsm6-768x908.png 768w, ../../wp-content/uploads/lc3-fsm6-866x1024.png 866w, ../../wp-content/uploads/lc3-fsm6-211x250.png 211w, ../../wp-content/uploads/lc3-fsm6-254x300.png 254w, ../../wp-content/uploads/lc3-fsm6-296x350.png 296w, ../../wp-content/uploads/lc3-fsm6-423x500.png 423w, ../../wp-content/uploads/lc3-fsm6-634x750.png 634w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a><figcaption>LC3 finite state machine</figcaption></figure></div></li>

<h4>Details</h4>
<ul>
    <li>Policies:
    <ul>
        <li><em>State transitions</em>, are only possible during the falling edge of the clock signal (from 1 to 0);</li>
        <li><em>Outputs</em>, to the external memory interface, are driven in response to state transitions;</li>
        <li><em>Inputs</em>, from the external memory interface, are sampled on the rising edge of the clock signal (from 0 to 1);</li>
        <li><em>Control signals</em>, change only during the falling edge of the clock signal to minimize glitches.</li>
    </ul>
    </li>
</ul>
<ul>
    <li>Each state:
    <ul>
        <li>depends on both input signals and the previous state&#8217;</li>
        <li>generates control signals control signals for the data path (with the help of the Decode module).</li>
    </ul>
    </li>
</ul>
<ul>
    <li>The control unit consists of two modules:
    <ul>
        <li><em>State</em>, implements the state machine, and generates state specific control signals.</li>
        <li><em>Decode</em>, generalizes the instruction for the state machine, and generates state independent control signals.</li>
    </ul>
    </li>
</ul>
</li>

<h4>
    Schematic for the control unit
</h4>
<div class="align-center"><figure><a class="hide-anchor fancybox" href="../../wp-content/uploads/lc3-control-unit4.png"><img class="alignnone wp-image-4172" title="lc3 control unit4" src="https://coertvonk.com/wp-content/uploads/lc3-control-unit4.png" alt="own work" width="600" srcset="https://coertvonk.com/wp-content/uploads/lc3-control-unit4.png 2110w, ../../wp-content/uploads/lc3-control-unit4-400x219.png 400w, ../../wp-content/uploads/lc3-control-unit4-768x421.png 768w, ../../wp-content/uploads/lc3-control-unit4-1024x561.png 1024w, ../../wp-content/uploads/lc3-control-unit4-250x137.png 250w, ../../wp-content/uploads/lc3-control-unit4-300x164.png 300w, ../../wp-content/uploads/lc3-control-unit4-350x192.png 350w, ../../wp-content/uploads/lc3-control-unit4-500x274.png 500w, ../../wp-content/uploads/lc3-control-unit4-750x411.png 750w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a><figcaption>LC3 control unit</figcaption></figure></div></li>
<p>
    The next section describes the signals for the control unit in the CPU Design for LC-3 instruction set.
</p>

<h4>
    Signals for the control unit
</h4>
<p>
    <div class="flex-container">
        <table class="signals">
            <tr>
                <th>Group</th>
                <th>Signal</th>
                <th>Description</th>
            </tr>
            <tr>
                <td rowspan="2">
                    External interface
                </td>
                <td>
                    <ctrlsignal>eREADY==1</ctrlsignal>
                </td>
                <td>
                    Indicates that the external memory finished a read or write operation.
                </td>
            </tr>
            <tr>
                <td class="underline">
                    <ctrlsignal>clock</ctrlsignal>
                </td>
                <td class="underline">External supplied clock</td>
            </tr>
            <tr>
                <td rowspan="2">
                    Internal to the <em>State</em> module
                </td>
                <td>
                    <ctrlsignal>state</ctrlsignal>
                </td>
                <td>Current state</td>            
            </tr>
            <tr>
                <td class="underline">
                    <ctrlsignal>nState</ctrlsignal>
                </td>
                <td class="underline">Next state as determined by the combinational logic</td>            
            </tr>
            <tr>
                <td rowspan="3">
                    Generalized instruction types (bundled into <ctrlsignal>cCtrl</ctrlsignal>)
                </td>
                <td>
                    <ctrlsignal>iType</ctrlsignal>
                </td>
                <td>Instruction type</td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>maType</ctrlsignal>
                </td>
                <td>Memory access type</td>
            </tr>            
            <tr>
                <td>
                    <ctrlsignal>indType</ctrlsignal>
                </td>
                <td>Indirect memory access type</td>
            </tr>
            <tr>
                <td rowspan="9">
                    Data path control
                </td>
                <td>
                    <ctrlsignal>pNext</ctrlsignal>
                </td>
                <td>
                    Signals <module>UpdatePC</module> to change the program counter to <datasignal>tPC</datasignal></td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>pEn</ctrlsignal>
                </td>
                <td>
                    Enables <module>UpdatePC</module> to change the program counter.
                </td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>fEn</ctrlsignal>
                </td>
                <td>
                    Enable <module>Fetch</module> to start external memory bus cycle to read the instruction.</td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>dEn</ctrlsignal>
                </td>
                <td>
                    Enables <module>Decode</module> to read the instruction from the external memory bus.
                </td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>rWe</ctrlsignal>
                </td>
                <td>
                    Enables <module>Registers</module> to store the value of <datasignal>dr</datasignal> in the register identified by <datasignal>drID</datasignal>.
                </td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>uOp</ctrlsignal>
                </td>
                <td>
                    Chooses the operation and inputs of the <module>ALU</module>
                </td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>aOp</ctrlsignal>
                </td>
                <td>
                    Chooses the operation and inputs of the <module>Address</module> calculation.
                </td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>mOp</ctrlsignal>
                </td>
                <td>
                    Chooses the memory operation to be performed by <module>MemoryIF</module>.
                </td>
            </tr>
            <tr>
                <td>
                    <ctrlsignal>drSrc</ctrlsignal>
                </td>
                <td>
                    Selects the destination register source input on <module>DrMux</module>
                </td>
            </tr>
        </table>
    </div>
</p>
<p>
    The next section gives a detailed description of the modules for the CPU Design for LC-3 instruction set.
</p>

<h4>
    Modules (detailed description)
</h4>

<p>
    <div class="flex-container">
        <table class="modules">
            <tr>
                <th>Module</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>
                    <module>State</module>
                </td>
                <td>
                    Generates the state specific control signals for each micro instruction being executed.  Refer to the signals described above for details.
                </td>
            </tr>
            <tr>
                <td>
                    <module>UpdatePC</module>
                </td>
                <td>
                    Updates the program counter, <datasignal>pc</datasignal>, at the end of each instruction cycle.  The new value is:
                    <ul>
                        <li>
                            <code>3000</code> if <em>reset</em> is asserted, or
                        </li>
                        <li>
                            the value of the <datasignal>tPC</datasignal> input, when a <opcode>JMP</opcode> or <opcode>BR*</opcode> instruction was executed (and its condition was met), or
                        </li>
                        <li>
                            otherwise, the previous value of <datasignal>pc+1</datasignal>.
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>
                    <module>Fetch</module>
                </td>
                <td>
                    <ul>
                        <li>
                            Initiates the external bus cycle (<datasignal>iBR0</datasignal>, <datasignal>iADDR0</datasignal>, <datasignal>iWEA0</datasignal>) to read the instruction from the memory location pointed to by <datasignal>pc</datasignal>.
                        </li>
                        <li>
                            The <em>control unit</em> will maintain this state until the external memory reports that the data is available (<ctrlsignal>eREADY</ctrlsignal>).
                        </li>
                    </ul>        
                </td>
            </tr>
            <tr>
                <td>
                    <module>Decode</module>
                </td>
                <td>
                    <ul>
                        <li>
                            Finishes the external bus cycle by reading the instruction from the external memory bus (<datasignal>eDIN</datasignal>).
                        </li>
                        <li>
                            Decodes the instruction:
                            <ul>
                                <li>
                                    Based on the <em>opcode</em> (<code>ir[15:11]</code>,  it generalizes the instruction type for the State module (<ctrlsignal>cCtrl</ctrlsignal>).
                                </li>
                                <li>
                                    Based on the <em>operands</em> (<code>ir[10:0]</code>), it configures the data path using state independent control signals:
                                    <ul>
                                        <li>
                                            For ALU instructions,
                                            <ctrlsignal>uOp</ctrlsignal>,
                                            <datasignal>sr1ID</datasignal>,
                                            <datasignal>sr2ID</datasignal>,
                                            <datasignal>drSrc</datasignal>,
                                            <datasignal>drID</datasignal>
                                        </li>
                                        <li>
                                            For memory instructions,
                                            <ctrlsignal>aOp</ctrlsignal>,
                                            <datasignal>sr1ID</datasignal>
                                            (<code>BaseR</code> for <opcode>LDR</opcode> / <opcode>STR</opcode>),
                                            <datasignal>sr2ID</datasignal>
                                            (<code>sr</code> for <opcode>ST</opcode> / <opcode>STI</opcode> / <opcode>STR</opcode>),
                                            <datasignal>offset</datasignal>,
                                            <datasignal>drID</datasignal>
                                        </li>
                                        <li>
                                            For control instructions,
                                            <ctrlsignal>pNext</ctrlsignal>,
                                            <datasignal>sr1</datasignal>
                                            (<code>BaseR</code> for <opcode>JMP</opcode>).
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>
                    <module>Registers</module>
                </td>
                <td>
                    <ul>
                        <li>
                            Maintains the general purpose register (<code>R0..R7</code>).
                        </li>
                        <li>
                            Supplies the values for the registers identified by <datasignal>sr1ID</datasignal>,
                            <datasignal>sr2ID</datasignal>.
                        </li>
                        <li>
                            Updates the register specified by <datasignal>drID</datasignal> to the value <datasignal>dr</datasignal> when <ctrlsignal>rWe</ctrlsignal> is asserted.
                        </li>
                    </ul>            
                </td>
            </tr>
            <tr>
                <td>
                    <module>ALU</module>
                </td>
                <td>
                    <ul>
                        <li>
                            The input <ctrlsignal>uOp</ctrlsignal> selects both the operation type and inputs.
                            <ul>
                                <li>
                                    For <opcode>ADD</opcode> do if <code>ir[5]==1</code> then <datasignal>uOut=sr1+imm5</datasignal>, else <datasignal>uOut=sr1+sr2</datasignal>.
                                </li>
                                <li>
                                    For <opcode>AND</opcode> do if <code>ir[5]==1</code> then <datasignal>uOut=sr1&#038;imm5</datasignal>, else <datasignal>uOut=sr1&#038;sr2</datasignal>.
                                </li>
                                <li>
                                    For <opcode>NOT</opcode> do <datasignal>uOut=~sr1</datasignal>.
                                </li>
                            </ul>
                        </li>
                    </ul>            
                </td>
            </tr>
            <tr>
                <td>
                    <module>Address</module>
                </td>
                <td>
                    <ul>
                        <li>
                            Input <ctrlsignal>aOp</ctrlsignal> selects both the calculation type and inputs.
                            <ul>
                                <li>
                                    For <opcode>BR*</opcode> do <datasignal>aOut=nPC+offset9</datasignal>.
                                </li>
                                <li>
                                    For <opcode>LD</opcode> / <opcode>LDI</opcode> / <opcode>LEA</opcode> / <opcode>ST</opcode> / <opcode>STI</opcode>, do <datasignal>aOut=nPC+offset9</datasignal>.
                                </li>
                                <li>
                                    For <opcode>JMP</opcode> / <opcode>LDR</opcode> / <opcode>STR</opcode>, do <datasignal>aOut=sr1+offset6</datasignal>.
                                </li>
                            </ul>
                        </li>
                        <li>
                            Note that <datasignal>aOut</datasignal> is connected to the <datasignal>addr</datasignal> input on <module>MemoryIF</module>, and the <datasignal>tPC</datasignal> input on <module>FetchPC</module>.
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>
                    <module>MemoryIF</module>
                </td>
                <td>
                    <ul>
                        <li>
                            Input <ctrlsignal>mOp</ctrlsignal> selects the memory access mode and inputs.
                            <ul>
                                <li>
                                    For <opcode>LDI</opcode> / <opcode>STI</opcode>, under the direction of the <em>Control Unit</em>, it first initiates a memory read cycle for <datasignal>addr</datasignal> (<datasignal>aOut</datasignal>). 
                                    The <em>Control Unit</em> will maintain this state until the external memory reports that the data is available (<ctrlsignal>eREADY</ctrlsignal>).
                                    It then takes the value read from memory (<datasignal>eDIN</datasignal>), and
                                    <ul>
                                        <li>
                                            for <opcode>LDI</opcode>, it initiates a read cycle for address <datasignal>eDIN</datasignal>;
                                        </li>
                                        <li>
                                            for <opcode>STI</opcode>, it initiates a write cycle to write the value <datasignal>sr2</datasignal> to address <datasignal>eDIN</datasignal>.
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    For the other instructions, it takes the address, and
                                    <ul>
                                        <li>
                                            for <opcode>LD</opcode> / <opcode>LDR</opcode>, read the value from <datasignal>addr</datasignal> (<datasignal>aOut</datasignal>);
                                        </li>
                                        <li>
                                            for <opcode>LEA</opcode>, do nothing;
                                        </li>
                                        <li>
                                            for <opcode>ST</opcode> / <opcode>STR</opcode>, write the value <datasignal>sr2</datasignal> to <datasignal>addr</datasignal> (<datasignal>aOut</datasignal>).
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    The <em>control unit</em> will maintain this state until the external memory reports that the data is available (<ctrlsignal>eREADY</ctrlsignal>).
                                </li>
                            </ul>
                        </li>
                    </ul>
                
                </td>
            </tr>
            <tr>
                <td>
                    <module>DrMux</module><sup>*</sup>
                </td>
                <td>
                    <ul>
                        <li>
                            Input <ctrlsignal>drSrc</ctrlsignal> selects the value that will be written to the destination register.
                            <ul>
                                <li>
                                    For <opcode>ADD</opcode> / <opcode>AND</opcode> / <opcode>NOT</opcode> do forward <datasignal>uOut</datasignal> to <datasignal>dr</datasignal>.
                                </li>
                                <li>
                                    For <opcode>LD</opcode> / <opcode>LDR</opcode> / <opcode>LDI</opcode> do forward <datasignal>deign</datasignal> to <datasignal>dr</datasignal>.
                                </li>
                                <li>
                                    For <opcode>LEA</opcode> do forward <datasignal>aOut</datasignal> to <datasignal>dr</datasignal>.
                                </li>
                            </ul>
                        </li>
                    </ul>            
                </td>
            </tr>
        </table>
    </div>
</p>
<p>
    <sup>*</sup>) DrMux is an abbreviation for Destination Register Multiplexor.
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
                To continue this CPU Design for LC-3 instruction set, read about its implementation on the <a href="../../inquiries/how-cpu-work/implementation-30975.html">next page</a>.
        </div>
    </div>    
</p>
	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<article id="post-30971" class="post-30971 post type-post status-publish format-standard has-post-thumbnail hentry category-how-cpu-work tag-cpu tag-logic tag-verilog no-wpautop">
	    <header class="entry-header">
		<h2 class="entry-title"><a href="../../inquiries/how-cpu-work/instruction-set-30971.html" rel="bookmark">Instruction set</a></h2><div class="entry-meta"><center><span class="screen-reader-text">Posted on</span> <a href="../../inquiries/how-cpu-work/instruction-set-30971.html" rel="bookmark"><time class="entry-date published" datetime="2011-12-02T17:31:52-08:00">2011-12-02</time><time class="updated" datetime="2022-05-03T13:08:51-07:00">2022-05-03</time></a></center></div><!-- .entry-meta -->    </header><!-- .entry-header -->

		    <div class="post-thumbnail">
		<a href="../../inquiries/how-cpu-work/instruction-set-30971.html">
				<img width="300" height="300" src="../../wp-content/uploads/school-microprocessor.png" class="attachment-twentyseventeen-featured-image size-twentyseventeen-featured-image wp-post-image" alt="" loading="lazy" srcset="../../wp-content/uploads/school-microprocessor.png 300w, ../../wp-content/uploads/school-microprocessor-200x200.png 200w, ../../wp-content/uploads/school-microprocessor-250x250.png 250w, ../../wp-content/uploads/school-microprocessor-100x100.png 100w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" />		</a>
	    </div><!-- .post-thumbnail -->
	
	<div class="entry-content">
		<p>
    Introduces a simplified LC-3 instruction set, that we later will design a CPU for and implement in Verilog HDL.
</p>
<h2>
    Instruction Set
</h2>

<p>
    <a href="https://coertvonk.com/wp-content/uploads/microprocessor-system.png"><img  title="" src="../../wp-content/uploads/microprocessor-system-1024x446.png" alt="" width="300" class="size-large wp-image-16925 alignright" srcset="../../wp-content/uploads/microprocessor-system-1024x446.png 1024w, ../../wp-content/uploads/microprocessor-system-400x174.png 400w, ../../wp-content/uploads/microprocessor-system-768x335.png 768w, ../../wp-content/uploads/microprocessor-system-250x109.png 250w, ../../wp-content/uploads/microprocessor-system-300x131.png 300w, ../../wp-content/uploads/microprocessor-system-350x153.png 350w, ../../wp-content/uploads/microprocessor-system-500x218.png 500w, ../../wp-content/uploads/microprocessor-system-750x327.png 750w, https://coertvonk.com/wp-content/uploads/microprocessor-system.png 1409w" sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px" /></a>
    The Instruction Set Architecture (ISA) specifies all the information to write a program in machine language.  It contains:
    <ul>
        <li><em>Memory organization</em>, specifies the address maps; how many bits per location;</li>
        <li><em>Register set</em>, specifies the size of the internal registers; how many registers; and how they can be used;</li>
        <li><em>Instruction set</em>, specifies the opcodes; operands; data types; and addressing modes</li>
    </ul>
</p>

<h3>
    Simplicity rules
</h3>

<p>
    The book <a href="https://highered.mheducation.com/sites/0072467509/index.html">Introduction to Computer Systems</a> by Patt and Partel, introduces an hypothetical microprocessor called LC-3.  For this text we push the simplicity of this little computer (LC-3) even further by:
    <ul>
        <li>
            not supporting subroutine calls, <opcode>JSR</opcode> <opcode>JSRR</opcode> <opcode>RET</opcode>
        </li>
        <li>
            not supporting interrupt handling, <opcode>RTI</opcode> <opcode>TRAP</opcode></li>
        <li>not supporting overflow detection in arithmetic operations</li>
        <li>not validating the Instruction encoding</li>
        <li>replacing the <opcode>TRAP</opcode> <code>0</code>, with a simple <opcode>HALT</opcode> instruction.</li>
    </ul>
</p>
<p>
    Implementing this very basic Instruction Set helps us understand the inner workings of a microprocessor.
</p>
<p>
    With the exception of these simplifications, the Instruction Set Architecture (ISA) is specified in the book &#8220;<a href="https://highered.mheducation.com/sites/0072467509/index.html">Introduction to Computer Systems</a>&#8220;.  The following sections summarize this ISA.  For more details, refer to Appendix A.3 of the book.
</p>

<h3>
    Overview
</h3>

<p>
    <ul>
        <li>
            Memory organization:
            <ul>
                <li>
                    16-bit addresses; word addressable only,
                </li>
                <li>
                    16-bit memory words.
                </li>
            </ul>
        </li>
        <li>
            Memory map
            <ul>
                <li>
                    User programs start at memory location <code>3000</code> hex, and may extend to <code>FDFF</code>.
                </li>
            </ul>
        </li>
        <li>
            Bit numbering
            <ul>
                <li>
                    Bits are numbered from right (least significant bit) to left (most significant bit), starting with bit 0.
                </li>
            </ul>
        </li>
        <li>
            Registers
            <ul>
                <li>
                    A 16-bit program counter (<code>PC</code>), contains the address of the next instruction.
                </li>
                <li>
                    Eight 16-bit general purpose registers, numbered <code>000 .. 111</code> binary, for register <code>R0 .. R7</code>.
                </li>
                <li>
                    A 3-bit processor status register (<code>PSR</code>), that is updated when an instructions writes to a register.
                    <ul>
                        <li>
                            <code>psr[2]==1</code>, when the 2&#8217;s complement value is negative (<em>n</em>).
                        </li>
                        <li>
                            <code>psr[1]==1</code>, when the 2&#8217;s complement value is zero (<em>z</em>).
                        </li>
                        <li>
                            <code>psr[0]==1</code>, when the 2&#8217;s complement value is positive (<em>p</em>).
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            Instructions
            <ul>
                <li>
                    16-bit instructions, RISC (all instructions the same size).
                    <ul>
                        <li>
                            the <em>opcode</em>, is encoded in the the 4 most significant bits of the instruction (bit 15..12).
                        </li>
                        <li>
                            the <em>operands</em>, are encoded in the remaining 12 bits of the instruction.
                        </li>
                    </ul>
                </li>
                <li>
                    ALU performs <opcode>ADD</opcode> <opcode>AND</opcode> and <opcode>NOT</opcode> operations on 16-bit words.
                </li>
            </ul>
        </li>
    </ul>
</p>

<h3>
    Instructions
</h3>

<h4>
    Operand conventions
</h4>

<p>
    As mentioned above, from the 16 bit instruction, only 12 bits are available for the <em>operands</em>.  This implies that 16-bit data values or memory addresses have to be specified indirectly.  For instance by referring to a value in a register.
</p>
<p>
    Addressing modes:
    <ul>
        <li>
            <em>PC relative</em>, the address is calculated by adding an offset to the incremented program counter, <code>pc</code>.
        </li>
        <li>
            <em>Register relative</em>, address is read from a register.
        </li>
        <li>
            <em>Indirect</em>, address is read from a memory location who&#8221;s address is calculated by adding an offset to the incremented program counter.
        </li>
        <li>
            <em>Load effective address</em>, address is calculated by adding an offset to the incremented program counter.  The address itself (not its value) is stored in a register.
        </li>
    </ul>
</p>
<p>
    The table below shows the conventions used in describing the instructions.
    <div class="flex-container">
        <table class="operands">
            <tr>
                <th>
                    Operand
                </th>
                <th>
                    Description
                </th>
            </tr>
            <tr>
                <td>
                    <operand>srID</operand>,
                    <operand>sr1ID</operand>,
                    <operand>sr2ID</operand>
                </td>
                <td>
                    Source Register Identifiers (<code>000..111</code> for <code>R0..R7</code>)
                </td>
            </tr>
            <tr>
                <td>
                    <operand>drID</operand>
                </td>
                <td>
                    Destination Register Identifier (<code>000..111</code> for <code>R0..R7</code>)
                </td>
            </tr>
            <tr>
                <td>
                    <operand>baseRID</operand>
                </td>
                <td>
                    Base Register Identifier (<code>000..111</code> for <code>R0..R7</code>)
                </td>
            </tr>
            <tr>
                <td>
                    <operand>sr</operand>,
                    <operand>sr1</operand>,
                    <operand>sr2</operand>
                </td>
                <td>
                    16-bit Source Register value
                </td>
            </tr>
            <tr>
                <td>
                    <operand>dr</operand>
                </td>
                <td>
                    16-bit Destination Register value
                </td>
            </tr>
            <tr>
                <td>
                    <operand>baseR</operand>
                </td>
                <td>
                    Base Register value, used together with 2&#8217;s complement offset to calculate memory address.
                </td>
            </tr>
            <tr>
                <td>
                    <operand>imm5</operand>
                </td>
                <td>
                    5-bit immediate value as 2&#8217;s complement integer
                </td>
            </tr>
            <tr>
                <td>
                    <operand>mem[address]</operand>
                </td>
                <td>
                    Contents of memory at the given address
                </td>
            </tr>
            <tr>
                <td>
                    <operand>offset6</operand>
                </td>
                <td>
                    6-bit value as 2&#8217;s complement integer
                </td>
            </tr>
            <tr>
                <td>
                    <operand>offset9</operand>
                </td>
                <td>
                    9-bit value as 2&#8217;s complement integer
                </td>
            </tr>
            <tr>
                <td>
                    <operand>SX</operand>
                </td>
                <td>
                    Sign-extend, by replicating the most significant bit as many times as necessary to extend to the word size of 16 bits.
                </td>
            </tr>
            <caption>Conventions</caption>
        </table>
    </div>
</p>

<h4>
    ALU instructions
</h4>

<p>
    There are two variations of the <opcode>ADD</opcode> and <opcode>AND</opcode> instructions.  The difference is in <code>bit 5</code>     of the instruction word.  One takes the second argument from <code>sr2</code>, the other takes it from the immediate value <code>imm5</code>.
</p>
<h5>
    Instruction types
</h5>
<p>
    <div class="flex-container">
        <table class="instructiondescr">
            <tr>
                <th>
                    Opcode
                </th>
                <th>
                    Name
                </th>
                <th>
                    Assembly
                </th>
                <th>
                    Operation
                </th>
            </tr>
            <tr>    
                <td rowspan="2">
                    <opcode>ADD</opcode>
                </td>
                <td rowspan="2">
                    Addition
                </td>
                <td>
                    ADD DR, SR1, SR2
                </td>
                <td>
                    <operand>dr = sr1 + sr2</operand>
                </td>
            </tr>
            <tr>
                <td>
                    ADD DR, SR1, imm5
                </td>
                <td>
                    <operand>dr = sr1 + SX(imm5)</operand>
                </td>
            </tr>
            <tr>    
                <td rowspan="2">
                    <opcode>AND</opcode>
                </td>
                <td rowspan="2">
                    Logical AND
                </td>
                <td>
                    AND DR, SR1, SR2
                </td>
                <td>
                    <operand>dr = sr1 &#038; sr2</operand>
                </td>
            </tr>
            <tr>
                <td>
                    AND DR, SR1, imm5
                </td>
                <td>
                    <operand>dr = sr1 &#038; SX(imm5)</operand>
                </td>
            </tr>
            <tr>    
                <td>
                    <opcode>NOT</opcode>
                </td>
                <td>
                    Logical NOT
                </td>
                <td>
                    NOT DR, SR
                </td>
                <td>
                    <operand>dr = ~sr</operand>
                </td>
            </tr>
        </table>
    </div>
</p>
<h5>
    Instruction encoding
</h5>
<p>
    <div class="flex-container">
        <table class="instructions">
            <tr>
                <th class="borderright">Opcode</th>
                <th>15</th>
                <th>14</th>
                <th>13</th>
                <th class="borderright">12</th>
                <th>11</th>
                <th>10</th>
                <th class="borderright">9</th>
                <th>8</th>
                <th>7</th>
                <th>6</th>
                <th>5</th>
                <th>4</th>
                <th>3</th>
                <th>2</th>
                <th>1</th>
                <th>0</th>
            </tr>
            <tr>
                <td class="borderright" rowspan="2">
                    <opcode>ADD</opcode>
                </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td  class="borderright"colspan="3">
                    <operand>sr1ID</operand> 
                </td>
                <td class="borderright">0</td>
                <td>0</td>
                <td class="borderright">0</td>
                <td colspan="3">
                    <operand>sr2ID</operand>
                </td>
            </tr>
            <tr>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="3">
                    <operand>sr1ID</operand>
                </td>
                <td class="borderright">1</td>
                <td colspan="5">
                    <operand>imm5</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright" rowspan="2">
                    <opcode>AND</opcode>
                </td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td  class="borderright"colspan="3">
                    <operand>sr1ID</operand>
                </td>
                <td class="borderright">0</td>
                <td>0</td>
                <td class="borderright">0</td>
                <td colspan="3">
                    <operand>sr2ID</operand>
                </td>
            </tr>
            <tr>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="3">
                    <operand>sr1ID</operand>
                </td>
                <td class="borderright">1</td>
                <td colspan="5">
                    <operand>imm5</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>NOT</opcode>
                </td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="3">
                    <operand>srID</operand>
                </td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
            </tr>
        </table>
    </div>
</p>

<h4>
    Memory instructions
</h4>

<h5>
    Instruction types
</h5>
<p>
    <div class="flex-container">
        <table class="instructiondescr">
            <tr>
                <th>
                    Opcode
                </th>
                <th>
                    Name
                </th>
                <th>
                    Assembly
                </th>
                <th>
                    Operation
                </th>
            </tr>
            <tr>    
                <td>
                    <opcode>LD</opcode>
                </td>
                <td>
                    Load
                </td>
                <td>
                    LD DR, label
                </td>
                <td>
                    <operand>dr = mem[pc + SX(offset9)]</operand>
                </td>
            </tr>
            <tr>                            
                <td>
                    <opcode>LDR</opcode>
                </td>
                <td>
                    Load Register
                </td>
                <td>
                    LDR DR, BaseR, offset6
                </td>
                <td>
                    <operand>dr = mem[baseR + SX(offset6)]</operand>
                </td>
            </tr>
            <tr>                            
                <td>
                    <opcode>LDI</opcode>
                </td>
                <td>
                    Load Indirect
                </td>
                <td>
                    LDI DR, label
                </td>
                <td>
                    <operand>dr = mem[mem[pc + SX(offset9)]]</operand>
                </td>
            </tr>
            <tr>                            
                <td class="underline">
                    <opcode>LEA</opcode>
                </td>
                <td class="underline">
                    Load Eff. Addr.
                </td class="underline">
                <td class="underline">
                    LEA DR, target
                </td>
                <td class="underline">
                    <operand>dr = pc + SX(offset9)</operand>
                </td>
            </tr>
            <tr>
                <td>
                    <opcode>ST</opcode>
                </td>
                <td>
                    Store
                </td>
                <td>
                    ST SR, label
                </td>
                <td>
                    <operand>mem[pc + SX(offset9)] = sr</operand>
                </td>
            </tr>
            <tr>
                <td>
                    <opcode>STR</opcode>
                </td>
                <td>
                    Store Register
                </td>
                <td>
                    STR SR, BaseR, offset6
                </td>
                <td>
                    <operand>mem[baseR + SX(offset6)] = sr</operand>
                </td>
            </tr>
            <tr>
                <td>
                    <opcode>STI</opcode>
                </td>
                <td>
                    Store Indirect
                </td>
                <td>
                    STI SR, label
                </td>
                <td>
                    <operand>mem[mem[pc + SX(offset9)]] = sr</operand>
                </td>
            </tr>
        </table>
    </div>
</p>

<h5>
    Instruction encoding
</h5>

<p>
    <div class="flex-container">
        <table class="instructions">
            <tr>
                <th class="borderright">opcode</th>
                <th>15</th>
                <th>14</th>
                <th>13</th>
                <th class="borderright">12</th>
                <th>11</th>
                <th>10</th>
                <th class="borderright">9</th>
                <th>8</th>
                <th>7</th>
                <th>6</th>
                <th>5</th>
                <th>4</th>
                <th>3</th>
                <th>2</th>
                <th>1</th>
                <th>0</th>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>LD</opcode>
                </td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td class="borderright">0</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="9">
                    <operand>offset9</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>LDR</opcode>
                </td>
                <td>0</td>
                <td>1</td>
                <td>1</td>
                <td class="borderright">0</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="3">
                    <operand>baseRID</operand>
                </td>
                <td class="borderright" colspan="6">
                    <operand>offset6</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>LDI</opcode>
                </td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td class="borderright">0</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="9">
                    <operand>offset9</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>LEA</opcode>
                </td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td class="borderright">0</td>
                <td class="borderright" colspan="3">
                    <operand>drID</operand>
                </td>
                <td class="borderright" colspan="9">
                    <operand>offset9</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>ST</opcode>
                </td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>srID</operand>
                </td>
                <td class="borderright" colspan="9">
                    <operand>offset9</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>STR</opcode>
                </td>
                <td>0</td>
                <td>1</td>
                <td>1</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>srID</operand>
                </td>
                <td class="borderright" colspan="3">
                    <operand>baseRID</operand>
                </td>
                <td class="borderright" colspan="6">
                    <operand>offset6</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright">
                    <opcode>STI</opcode>
                </td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
                <td class="borderright">1</td>
                <td class="borderright" colspan="3">
                    <operand>srID</operand>
                </td>
                <td class="borderright" colspan="9">
                    <operand>offset9</operand>
                </td>
            </tr>
        </table>
    </div>
</p>
<h4>
    Control instructions
</h4>

<h5>
    Instruction types
</h5>
<p>
    <div class="flex-container">
        <table class="instructiondescr">
            <tr>
                <th>
                    Opcode
                </th>
                <th>
                    Name
                </th>
                <th>
                    Assembly
                </th>
                <th>
                    Operation
                </th>
            </tr>
            <tr>    
                <td>
                    <opcode>BR*</opcode>
                </td>
                <td>
                    Branch
                </td>
                <td>
                    BR<sup>*</sup> label
                </td>
                <td>
                    if (condition<sup>*</sup>) <operand>pc = pc + SX(offset9)</operand>
                </td>
            </tr>
            <tr>
                <td>
                    <opcode>JMP</opcode>
                </td>
                <td>
                    Jump
                </td>
                <td>
                    JMP BaseR
                </td>
                <td>
                    <operand>pc = baseR</operand>
                </td>
            </tr>
            <tr>
                <td>
                    <opcode>HALT</opcode>
                </td>
                <td>
                    Halt
                </td>
                <td>
                    HALT                    
                </td>
                <td>
                    stop program execution (simplified TRAP 0)
                </td>    
            </tr>
        </table>
    </div>
</p>
<p>
    <sup>*</sup>) The assembler instruction for <opcode>BR*</opcode> can be either
    <ul>
        <li>
            <code>BRn label</code>, test for state bit <code>n</code>
        </li>
        <li>
            <code>BRz label</code>, test for state bit <code>z</code>
        </li>
        <li>
            <code>BRn label</code>, test for state bit <code>p</code>
        </li>
        <li>
            <code>BRzp label</code>, test for state bits <code>z</code> and <code>p</code>
        </li>
        <li>
            <code>BRnp label</code>, test for state bits <code>n</code> and <code>p</code>
        </li>
        <li>
            <code>BRnz label</code>, test for state bits <code>n</code> and <code>z</code>
        </li>
        <li>
            <code>BRnzp label</code>, test for state bits <code>n</code>, <code>z</code> and <code>p</code>
        </li>
    </ul>
</p>

<h5>
    Instruction encoding
</h5>

<p>
    <div class="flex-container">
        <table class="instructions">
            <tr>
                <th class="borderright" >opcode</th>
                <th>15</th>
                <th>14</th>
                <th>13</th>
                <th class="borderright">12</th>
                <th>11</th>
                <th>10</th>
                <th class="borderright">9</th>
                <th>8</th>
                <th>7</th>
                <th>6</th>
                <th>5</th>
                <th>4</th>
                <th>3</th>
                <th>2</th>
                <th>1</th>
                <th>0</th>
            </tr>
            <tr>
                <td class="borderright" >
                    <opcode>BR*</opcode>
                </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td class="borderright">0</td>
                <td><operand>n</operand></td>
                <td><operand>z</operand></td>
                <td class="borderright"><operand>p</operand></td>
                <td colspan="9">
                    <operand>offset9</operand>
                </td>
            </tr>
            <tr>
                <td class="borderright" >
                    <opcode>JMP</opcode>
                </td>
                <td>1</td>
                <td>1</td>
                <td>0</td>
                <td class="borderright">0</td>
                <td>0</td>
                <td>0</td>
                <td class="borderright">0</td>
                <td class="borderright" colspan="3">
                    <operand>baseRID</operand>
                </td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td class="borderright" >
                    <opcode>HALT</opcode>
                </td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td class="borderright">1</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
                <td>0</td>
                <td>1</td>
            </tr>
        </table>
    </div>
</p>
<p>
    <div class="continue-container no-print">
        <div class="continue-content">
            <div class="continue-text">
               This article &#8220;Simplified LC-3 Instruction set&#8221; continues with <a href="../../inquiries/how-cpu-work/design-30973.html">Design</a> on the next page.
        </div>
    </div>    
</p>
	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

	<nav class="navigation pagination" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><span aria-current="page" class="page-numbers current"><span class="meta-nav screen-reader-text">Page </span>1</span>
<a class="page-numbers" href="page/2.html"><span class="meta-nav screen-reader-text">Page </span>2</a>
<a class="next page-numbers" href="page/2.html"><span class="screen-reader-text">Next page</span><svg class="icon icon-arrow-right" aria-hidden="true" role="img"> <use href="#icon-arrow-right" xlink:href="#icon-arrow-right"></use> </svg></a></div>
	</nav>
		</main><!-- #main -->
	</div><!-- #primary -->
	</div><!-- .wrap -->


		</div><!-- #content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
			<div class="wrap">
				
<div class="site-info" style="text-align:center;">
	Copyright &copy; 1996-2022 Coert Vonk, All Rights Reserved 
</div><!-- .site-info -->
			</div><!-- .wrap -->
		</footer><!-- #colophon -->
	</div><!-- .site-content-contain -->
</div><!-- #page -->
<!--googleoff: all--><div id="cookie-law-info-bar" data-nosnippet="true"><span><div class="cli-bar-container cli-style-v2"><div class="cli-bar-message">We use cookies on our website to give you the most relevant experience by remembering your preferences and repeat visits. By clicking “Accept”, you consent to the use of ALL the cookies.</br><div class="wt-cli-ccpa-element"> <a style="color:#333333" class="wt-cli-ccpa-opt-out">Do not sell my personal information</a>.</div></div><div class="cli-bar-btn_container"><a role='button' class="medium cli-plugin-button cli-plugin-main-button cli_settings_button" style="margin:0px 10px 0px 5px">Cookie Settings</a><a role='button' data-cli_action="accept" id="cookie_action_close_header" class="medium cli-plugin-button cli-plugin-main-button cookie_action_close_header cli_action_button">Accept</a></div></div></span></div><div id="cookie-law-info-again" data-nosnippet="true"><span id="cookie_hdr_showagain">Manage consent</span></div><div class="cli-modal" data-nosnippet="true" id="cliSettingsPopup" tabindex="-1" role="dialog" aria-labelledby="cliSettingsPopup" aria-hidden="true">
  <div class="cli-modal-dialog" role="document">
	<div class="cli-modal-content cli-bar-popup">
		  <button type="button" class="cli-modal-close" id="cliModalClose">
			<svg class="" viewBox="0 0 24 24"><path d="M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg>
			<span class="wt-cli-sr-only">Close</span>
		  </button>
		  <div class="cli-modal-body">
			<div class="cli-container-fluid cli-tab-container">
	<div class="cli-row">
		<div class="cli-col-12 cli-align-items-stretch cli-px-0">
			<div class="cli-privacy-overview">
				<h4>Privacy Overview</h4>				<div class="cli-privacy-content">
					<div class="cli-privacy-content-text">This website uses cookies to improve your experience while you navigate through the website. Out of these, the cookies that are categorized as necessary are stored on your browser as they are essential for the working of basic functionalities of the website. We also use third-party cookies that help us analyze and understand how you use this website. These cookies will be stored in your browser only with your consent. You also have the option to opt-out of these cookies. But opting out of some of these cookies may affect your browsing experience.</div>
				</div>
				<a class="cli-privacy-readmore" aria-label="Show more" role="button" data-readmore-text="Show more" data-readless-text="Show less"></a>			</div>
		</div>
		<div class="cli-col-12 cli-align-items-stretch cli-px-0 cli-tab-section-container">
												<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="necessary" data-toggle="cli-toggle-tab">
								Necessary							</a>
															<div class="wt-cli-necessary-checkbox">
									<input type="checkbox" class="cli-user-preference-checkbox"  id="wt-cli-checkbox-necessary" data-id="checkbox-necessary" checked="checked"  />
									<label class="form-check-label" for="wt-cli-checkbox-necessary">Necessary</label>
								</div>
								<span class="cli-necessary-caption">Always Enabled</span>
													</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="necessary">
								<div class="wt-cli-cookie-description">
									Necessary cookies are absolutely essential for the website to function properly. These cookies ensure basic functionalities and security features of the website, anonymously.
<table class="cookielawinfo-row-cat-table cookielawinfo-winter"><thead><tr><th class="cookielawinfo-column-1">Cookie</th><th class="cookielawinfo-column-3">Duration</th><th class="cookielawinfo-column-4">Description</th></tr></thead><tbody><tr class="cookielawinfo-row"><td class="cookielawinfo-column-1">cookielawinfo-checkbox-analytics</td><td class="cookielawinfo-column-3">11 months</td><td class="cookielawinfo-column-4">This cookie is set by GDPR Cookie Consent plugin. The cookie is used to store the user consent for the cookies in the category "Analytics".</td></tr><tr class="cookielawinfo-row"><td class="cookielawinfo-column-1">cookielawinfo-checkbox-functional</td><td class="cookielawinfo-column-3">11 months</td><td class="cookielawinfo-column-4">The cookie is set by GDPR cookie consent to record the user consent for the cookies in the category "Functional".</td></tr><tr class="cookielawinfo-row"><td class="cookielawinfo-column-1">cookielawinfo-checkbox-necessary</td><td class="cookielawinfo-column-3">11 months</td><td class="cookielawinfo-column-4">This cookie is set by GDPR Cookie Consent plugin. The cookies is used to store the user consent for the cookies in the category "Necessary".</td></tr><tr class="cookielawinfo-row"><td class="cookielawinfo-column-1">cookielawinfo-checkbox-others</td><td class="cookielawinfo-column-3">11 months</td><td class="cookielawinfo-column-4">This cookie is set by GDPR Cookie Consent plugin. The cookie is used to store the user consent for the cookies in the category "Other.</td></tr><tr class="cookielawinfo-row"><td class="cookielawinfo-column-1">cookielawinfo-checkbox-performance</td><td class="cookielawinfo-column-3">11 months</td><td class="cookielawinfo-column-4">This cookie is set by GDPR Cookie Consent plugin. The cookie is used to store the user consent for the cookies in the category "Performance".</td></tr><tr class="cookielawinfo-row"><td class="cookielawinfo-column-1">viewed_cookie_policy</td><td class="cookielawinfo-column-3">11 months</td><td class="cookielawinfo-column-4">The cookie is set by the GDPR Cookie Consent plugin and is used to store whether or not user has consented to the use of cookies. It does not store any personal data.</td></tr></tbody></table>								</div>
							</div>
						</div>
					</div>
																	<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="functional" data-toggle="cli-toggle-tab">
								Functional							</a>
															<div class="cli-switch">
									<input type="checkbox" id="wt-cli-checkbox-functional" class="cli-user-preference-checkbox"  data-id="checkbox-functional" />
									<label for="wt-cli-checkbox-functional" class="cli-slider" data-cli-enable="Enabled" data-cli-disable="Disabled"><span class="wt-cli-sr-only">Functional</span></label>
								</div>
													</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="functional">
								<div class="wt-cli-cookie-description">
									Functional cookies help to perform certain functionalities like sharing the content of the website on social media platforms, collect feedbacks, and other third-party features.
								</div>
							</div>
						</div>
					</div>
																	<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="performance" data-toggle="cli-toggle-tab">
								Performance							</a>
															<div class="cli-switch">
									<input type="checkbox" id="wt-cli-checkbox-performance" class="cli-user-preference-checkbox"  data-id="checkbox-performance" />
									<label for="wt-cli-checkbox-performance" class="cli-slider" data-cli-enable="Enabled" data-cli-disable="Disabled"><span class="wt-cli-sr-only">Performance</span></label>
								</div>
													</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="performance">
								<div class="wt-cli-cookie-description">
									Performance cookies are used to understand and analyze the key performance indexes of the website which helps in delivering a better user experience for the visitors.
								</div>
							</div>
						</div>
					</div>
																	<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="analytics" data-toggle="cli-toggle-tab">
								Analytics							</a>
															<div class="cli-switch">
									<input type="checkbox" id="wt-cli-checkbox-analytics" class="cli-user-preference-checkbox"  data-id="checkbox-analytics" />
									<label for="wt-cli-checkbox-analytics" class="cli-slider" data-cli-enable="Enabled" data-cli-disable="Disabled"><span class="wt-cli-sr-only">Analytics</span></label>
								</div>
													</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="analytics">
								<div class="wt-cli-cookie-description">
									Analytical cookies are used to understand how visitors interact with the website. These cookies help provide information on metrics the number of visitors, bounce rate, traffic source, etc.
								</div>
							</div>
						</div>
					</div>
																	<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="advertisement" data-toggle="cli-toggle-tab">
								Advertisement							</a>
															<div class="cli-switch">
									<input type="checkbox" id="wt-cli-checkbox-advertisement" class="cli-user-preference-checkbox"  data-id="checkbox-advertisement" />
									<label for="wt-cli-checkbox-advertisement" class="cli-slider" data-cli-enable="Enabled" data-cli-disable="Disabled"><span class="wt-cli-sr-only">Advertisement</span></label>
								</div>
													</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="advertisement">
								<div class="wt-cli-cookie-description">
									Advertisement cookies are used to provide visitors with relevant ads and marketing campaigns. These cookies track visitors across websites and collect information to provide customized ads.
								</div>
							</div>
						</div>
					</div>
																	<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="others" data-toggle="cli-toggle-tab">
								Others							</a>
															<div class="cli-switch">
									<input type="checkbox" id="wt-cli-checkbox-others" class="cli-user-preference-checkbox"  data-id="checkbox-others" />
									<label for="wt-cli-checkbox-others" class="cli-slider" data-cli-enable="Enabled" data-cli-disable="Disabled"><span class="wt-cli-sr-only">Others</span></label>
								</div>
													</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="others">
								<div class="wt-cli-cookie-description">
									Other uncategorized cookies are those that are being analyzed and have not been classified into a category as yet.
								</div>
							</div>
						</div>
					</div>
										</div>
	</div>
</div>
		  </div>
		  <div class="cli-modal-footer">
			<div class="wt-cli-element cli-container-fluid cli-tab-container">
				<div class="cli-row">
					<div class="cli-col-12 cli-align-items-stretch cli-px-0">
						<div class="cli-tab-footer wt-cli-privacy-overview-actions">
						
															<a id="wt-cli-privacy-save-btn" role="button" tabindex="0" data-cli-action="accept" class="wt-cli-privacy-btn cli_setting_save_button wt-cli-privacy-accept-btn cli-btn">SAVE &amp; ACCEPT</a>
													</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>
  </div>
</div>
<div class="cli-modal-backdrop cli-fade cli-settings-overlay"></div>
<div class="cli-modal-backdrop cli-fade cli-popupbar-overlay"></div>
<!--googleon: all--><script src='../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js' id='syntaxhighlighter-core-js'></script>
<script src='../../wp-content/plugins/syntaxhighlighter-brush-verilog/shBrushVerilog.js' id='syntaxhighlighter-brush-verilog-js'></script>
<script src='../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js' id='syntaxhighlighter-brush-plain-js'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://coertvonk.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://coertvonk.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<link rel='stylesheet' id='cookie-law-info-table-css'  href='../../wp-content/plugins/cookie-law-info/public/css/cookie-law-info-table.css' media='all' />
<script id='twentyseventeen-skip-link-focus-fix-js-extra'>
var twentyseventeenScreenReaderText = {"quote":"<svg class=\"icon icon-quote-right\" aria-hidden=\"true\" role=\"img\"> <use href=\"#icon-quote-right\" xlink:href=\"#icon-quote-right\"><\/use> <\/svg>","expand":"Expand child menu","collapse":"Collapse child menu","icon":"<svg class=\"icon icon-angle-down\" aria-hidden=\"true\" role=\"img\"> <use href=\"#icon-angle-down\" xlink:href=\"#icon-angle-down\"><\/use> <span class=\"svg-fallback icon-angle-down\"><\/span><\/svg>"};
</script>
<script src='../../wp-content/themes/twentyseventeen/assets/js/skip-link-focus-fix.js' id='twentyseventeen-skip-link-focus-fix-js'></script>
<script src='../../wp-content/themes/twentyseventeen/assets/js/navigation.js' id='twentyseventeen-navigation-js'></script>
<script src='../../wp-content/themes/twentyseventeen-child-cvonk/assets/js/global.js' id='twentyseventeen-global-js'></script>
<script src='../../wp-content/themes/twentyseventeen/assets/js/jquery.scrollTo.js' id='jquery-scrollto-js'></script>
<script src='../../wp-content/plugins/easy-fancybox/js/jquery.fancybox.min.js' id='jquery-fancybox-js'></script>
<script id='jquery-fancybox-js-after'>
var fb_timeout, fb_opts={'overlayShow':true,'hideOnOverlayClick':true,'showCloseButton':true,'width':'100%','height':'100%','margin':20,'centerOnScroll':true,'enableEscapeButton':true,'autoScale':true };
if(typeof easy_fancybox_handler==='undefined'){
var easy_fancybox_handler=function(){
jQuery('.nofancybox,a.wp-block-file__button,a.pin-it-button,a[href*="pinterest.com/pin/create"],a[href*="facebook.com/share"],a[href*="twitter.com/share"]').addClass('nolightbox');
/* IMG */
var fb_IMG_select='a[href*=".jpg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpg"]:not(.nolightbox),a[href*=".jpeg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpeg"]:not(.nolightbox),a[href*=".png"]:not(.nolightbox,li.nolightbox>a),area[href*=".png"]:not(.nolightbox),a[href*=".svg"]:not(.nolightbox,li.nolightbox>a),area[href*=".svg"]:not(.nolightbox)';
jQuery(fb_IMG_select).addClass('fancybox image').attr('rel','gallery');
jQuery('a.fancybox,area.fancybox,li.fancybox a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'type':'image','easingIn':'easeOutBack','easingOut':'easeInBack','opacity':false,'hideOnContentClick':true,'titleShow':false,'titlePosition':'inside','titleFromAlt':true,'showNavArrows':true,'enableKeyboardNav':true,'cyclic':false}))});
/* SVG */
jQuery('a[href*=".svg"],area[href*=".svg"],a[href*=".SVG"],area[href*=".SVG"]').not('.nolightbox,li.nolightbox>a').addClass('fancybox-svg');
jQuery('a.fancybox-svg,area.fancybox-svg,li.fancybox-svg a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'type':'svg','titleShow':false,'titlePosition':'float','titleFromAlt':true,'svg':{'wmode':'opaque','allowfullscreen':true}}))});
/* iFrame */
jQuery('a.fancybox-iframe,area.fancybox-iframe,li.fancybox-iframe a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'type':'iframe','width':'80%','height':'5%','titleShow':true,'titlePosition':'float','titleFromAlt':true,'allowfullscreen':true}))});};
jQuery('a.fancybox-close').on('click',function(e){e.preventDefault();jQuery.fancybox.close()});
};
jQuery(easy_fancybox_handler);jQuery(document).on('post-load',easy_fancybox_handler);
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.min.js?config=default&#038;ver=1.3.11' id='mathjax-js'></script>
<svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<symbol id="icon-behance" viewBox="0 0 37 32">
<path class="path1" d="M33 6.054h-9.125v2.214h9.125v-2.214zM28.5 13.661q-1.607 0-2.607 0.938t-1.107 2.545h7.286q-0.321-3.482-3.571-3.482zM28.786 24.107q1.125 0 2.179-0.571t1.357-1.554h3.946q-1.786 5.482-7.625 5.482-3.821 0-6.080-2.357t-2.259-6.196q0-3.714 2.33-6.17t6.009-2.455q2.464 0 4.295 1.214t2.732 3.196 0.902 4.429q0 0.304-0.036 0.839h-11.75q0 1.982 1.027 3.063t2.973 1.080zM4.946 23.214h5.286q3.661 0 3.661-2.982 0-3.214-3.554-3.214h-5.393v6.196zM4.946 13.625h5.018q1.393 0 2.205-0.652t0.813-2.027q0-2.571-3.393-2.571h-4.643v5.25zM0 4.536h10.607q1.554 0 2.768 0.25t2.259 0.848 1.607 1.723 0.563 2.75q0 3.232-3.071 4.696 2.036 0.571 3.071 2.054t1.036 3.643q0 1.339-0.438 2.438t-1.179 1.848-1.759 1.268-2.161 0.75-2.393 0.232h-10.911v-22.5z"></path>
</symbol>
<symbol id="icon-deviantart" viewBox="0 0 18 32">
<path class="path1" d="M18.286 5.411l-5.411 10.393 0.429 0.554h4.982v7.411h-9.054l-0.786 0.536-2.536 4.875-0.536 0.536h-5.375v-5.411l5.411-10.411-0.429-0.536h-4.982v-7.411h9.054l0.786-0.536 2.536-4.875 0.536-0.536h5.375v5.411z"></path>
</symbol>
<symbol id="icon-medium" viewBox="0 0 32 32">
<path class="path1" d="M10.661 7.518v20.946q0 0.446-0.223 0.759t-0.652 0.313q-0.304 0-0.589-0.143l-8.304-4.161q-0.375-0.179-0.634-0.598t-0.259-0.83v-20.357q0-0.357 0.179-0.607t0.518-0.25q0.25 0 0.786 0.268l9.125 4.571q0.054 0.054 0.054 0.089zM11.804 9.321l9.536 15.464-9.536-4.75v-10.714zM32 9.643v18.821q0 0.446-0.25 0.723t-0.679 0.277-0.839-0.232l-7.875-3.929zM31.946 7.5q0 0.054-4.58 7.491t-5.366 8.705l-6.964-11.321 5.786-9.411q0.304-0.5 0.929-0.5 0.25 0 0.464 0.107l9.661 4.821q0.071 0.036 0.071 0.107z"></path>
</symbol>
<symbol id="icon-slideshare" viewBox="0 0 32 32">
<path class="path1" d="M15.589 13.214q0 1.482-1.134 2.545t-2.723 1.063-2.723-1.063-1.134-2.545q0-1.5 1.134-2.554t2.723-1.054 2.723 1.054 1.134 2.554zM24.554 13.214q0 1.482-1.125 2.545t-2.732 1.063q-1.589 0-2.723-1.063t-1.134-2.545q0-1.5 1.134-2.554t2.723-1.054q1.607 0 2.732 1.054t1.125 2.554zM28.571 16.429v-11.911q0-1.554-0.571-2.205t-1.982-0.652h-19.857q-1.482 0-2.009 0.607t-0.527 2.25v12.018q0.768 0.411 1.58 0.714t1.446 0.5 1.446 0.33 1.268 0.196 1.25 0.071 1.045 0.009 1.009-0.036 0.795-0.036q1.214-0.018 1.696 0.482 0.107 0.107 0.179 0.161 0.464 0.446 1.089 0.911 0.125-1.625 2.107-1.554 0.089 0 0.652 0.027t0.768 0.036 0.813 0.018 0.946-0.018 0.973-0.080 1.089-0.152 1.107-0.241 1.196-0.348 1.205-0.482 1.286-0.616zM31.482 16.339q-2.161 2.661-6.643 4.5 1.5 5.089-0.411 8.304-1.179 2.018-3.268 2.643-1.857 0.571-3.25-0.268-1.536-0.911-1.464-2.929l-0.018-5.821v-0.018q-0.143-0.036-0.438-0.107t-0.42-0.089l-0.018 6.036q0.071 2.036-1.482 2.929-1.411 0.839-3.268 0.268-2.089-0.643-3.25-2.679-1.875-3.214-0.393-8.268-4.482-1.839-6.643-4.5-0.446-0.661-0.071-1.125t1.071 0.018q0.054 0.036 0.196 0.125t0.196 0.143v-12.393q0-1.286 0.839-2.196t2.036-0.911h22.446q1.196 0 2.036 0.911t0.839 2.196v12.393l0.375-0.268q0.696-0.482 1.071-0.018t-0.071 1.125z"></path>
</symbol>
<symbol id="icon-snapchat-ghost" viewBox="0 0 30 32">
<path class="path1" d="M15.143 2.286q2.393-0.018 4.295 1.223t2.92 3.438q0.482 1.036 0.482 3.196 0 0.839-0.161 3.411 0.25 0.125 0.5 0.125 0.321 0 0.911-0.241t0.911-0.241q0.518 0 1 0.321t0.482 0.821q0 0.571-0.563 0.964t-1.232 0.563-1.232 0.518-0.563 0.848q0 0.268 0.214 0.768 0.661 1.464 1.83 2.679t2.58 1.804q0.5 0.214 1.429 0.411 0.5 0.107 0.5 0.625 0 1.25-3.911 1.839-0.125 0.196-0.196 0.696t-0.25 0.83-0.589 0.33q-0.357 0-1.107-0.116t-1.143-0.116q-0.661 0-1.107 0.089-0.571 0.089-1.125 0.402t-1.036 0.679-1.036 0.723-1.357 0.598-1.768 0.241q-0.929 0-1.723-0.241t-1.339-0.598-1.027-0.723-1.036-0.679-1.107-0.402q-0.464-0.089-1.125-0.089-0.429 0-1.17 0.134t-1.045 0.134q-0.446 0-0.625-0.33t-0.25-0.848-0.196-0.714q-3.911-0.589-3.911-1.839 0-0.518 0.5-0.625 0.929-0.196 1.429-0.411 1.393-0.571 2.58-1.804t1.83-2.679q0.214-0.5 0.214-0.768 0-0.5-0.563-0.848t-1.241-0.527-1.241-0.563-0.563-0.938q0-0.482 0.464-0.813t0.982-0.33q0.268 0 0.857 0.232t0.946 0.232q0.321 0 0.571-0.125-0.161-2.536-0.161-3.393 0-2.179 0.482-3.214 1.143-2.446 3.071-3.536t4.714-1.125z"></path>
</symbol>
<symbol id="icon-yelp" viewBox="0 0 27 32">
<path class="path1" d="M13.804 23.554v2.268q-0.018 5.214-0.107 5.446-0.214 0.571-0.911 0.714-0.964 0.161-3.241-0.679t-2.902-1.589q-0.232-0.268-0.304-0.643-0.018-0.214 0.071-0.464 0.071-0.179 0.607-0.839t3.232-3.857q0.018 0 1.071-1.25 0.268-0.339 0.705-0.438t0.884 0.063q0.429 0.179 0.67 0.518t0.223 0.75zM11.143 19.071q-0.054 0.982-0.929 1.25l-2.143 0.696q-4.911 1.571-5.214 1.571-0.625-0.036-0.964-0.643-0.214-0.446-0.304-1.339-0.143-1.357 0.018-2.973t0.536-2.223 1-0.571q0.232 0 3.607 1.375 1.25 0.518 2.054 0.839l1.5 0.607q0.411 0.161 0.634 0.545t0.205 0.866zM25.893 24.375q-0.125 0.964-1.634 2.875t-2.42 2.268q-0.661 0.25-1.125-0.125-0.25-0.179-3.286-5.125l-0.839-1.375q-0.25-0.375-0.205-0.821t0.348-0.821q0.625-0.768 1.482-0.464 0.018 0.018 2.125 0.714 3.625 1.179 4.321 1.42t0.839 0.366q0.5 0.393 0.393 1.089zM13.893 13.089q0.089 1.821-0.964 2.179-1.036 0.304-2.036-1.268l-6.75-10.679q-0.143-0.625 0.339-1.107 0.732-0.768 3.705-1.598t4.009-0.563q0.714 0.179 0.875 0.804 0.054 0.321 0.393 5.455t0.429 6.777zM25.714 15.018q0.054 0.696-0.464 1.054-0.268 0.179-5.875 1.536-1.196 0.268-1.625 0.411l0.018-0.036q-0.411 0.107-0.821-0.071t-0.661-0.571q-0.536-0.839 0-1.554 0.018-0.018 1.339-1.821 2.232-3.054 2.679-3.643t0.607-0.696q0.5-0.339 1.161-0.036 0.857 0.411 2.196 2.384t1.446 2.991v0.054z"></path>
</symbol>
<symbol id="icon-vine" viewBox="0 0 27 32">
<path class="path1" d="M26.732 14.768v3.536q-1.804 0.411-3.536 0.411-1.161 2.429-2.955 4.839t-3.241 3.848-2.286 1.902q-1.429 0.804-2.893-0.054-0.5-0.304-1.080-0.777t-1.518-1.491-1.83-2.295-1.92-3.286-1.884-4.357-1.634-5.616-1.259-6.964h5.054q0.464 3.893 1.25 7.116t1.866 5.661 2.17 4.205 2.5 3.482q3.018-3.018 5.125-7.25-2.536-1.286-3.982-3.929t-1.446-5.946q0-3.429 1.857-5.616t5.071-2.188q3.179 0 4.875 1.884t1.696 5.313q0 2.839-1.036 5.107-0.125 0.018-0.348 0.054t-0.821 0.036-1.125-0.107-1.107-0.455-0.902-0.92q0.554-1.839 0.554-3.286 0-1.554-0.518-2.357t-1.411-0.804q-0.946 0-1.518 0.884t-0.571 2.509q0 3.321 1.875 5.241t4.768 1.92q1.107 0 2.161-0.25z"></path>
</symbol>
<symbol id="icon-vk" viewBox="0 0 35 32">
<path class="path1" d="M34.232 9.286q0.411 1.143-2.679 5.25-0.429 0.571-1.161 1.518-1.393 1.786-1.607 2.339-0.304 0.732 0.25 1.446 0.304 0.375 1.446 1.464h0.018l0.071 0.071q2.518 2.339 3.411 3.946 0.054 0.089 0.116 0.223t0.125 0.473-0.009 0.607-0.446 0.491-1.054 0.223l-4.571 0.071q-0.429 0.089-1-0.089t-0.929-0.393l-0.357-0.214q-0.536-0.375-1.25-1.143t-1.223-1.384-1.089-1.036-1.009-0.277q-0.054 0.018-0.143 0.063t-0.304 0.259-0.384 0.527-0.304 0.929-0.116 1.384q0 0.268-0.063 0.491t-0.134 0.33l-0.071 0.089q-0.321 0.339-0.946 0.393h-2.054q-1.268 0.071-2.607-0.295t-2.348-0.946-1.839-1.179-1.259-1.027l-0.446-0.429q-0.179-0.179-0.491-0.536t-1.277-1.625-1.893-2.696-2.188-3.768-2.33-4.857q-0.107-0.286-0.107-0.482t0.054-0.286l0.071-0.107q0.268-0.339 1.018-0.339l4.893-0.036q0.214 0.036 0.411 0.116t0.286 0.152l0.089 0.054q0.286 0.196 0.429 0.571 0.357 0.893 0.821 1.848t0.732 1.455l0.286 0.518q0.518 1.071 1 1.857t0.866 1.223 0.741 0.688 0.607 0.25 0.482-0.089q0.036-0.018 0.089-0.089t0.214-0.393 0.241-0.839 0.17-1.446 0-2.232q-0.036-0.714-0.161-1.304t-0.25-0.821l-0.107-0.214q-0.446-0.607-1.518-0.768-0.232-0.036 0.089-0.429 0.304-0.339 0.679-0.536 0.946-0.464 4.268-0.429 1.464 0.018 2.411 0.232 0.357 0.089 0.598 0.241t0.366 0.429 0.188 0.571 0.063 0.813-0.018 0.982-0.045 1.259-0.027 1.473q0 0.196-0.018 0.75t-0.009 0.857 0.063 0.723 0.205 0.696 0.402 0.438q0.143 0.036 0.304 0.071t0.464-0.196 0.679-0.616 0.929-1.196 1.214-1.92q1.071-1.857 1.911-4.018 0.071-0.179 0.179-0.313t0.196-0.188l0.071-0.054 0.089-0.045t0.232-0.054 0.357-0.009l5.143-0.036q0.696-0.089 1.143 0.045t0.554 0.295z"></path>
</symbol>
<symbol id="icon-search" viewBox="0 0 30 32">
<path class="path1" d="M20.571 14.857q0-3.304-2.348-5.652t-5.652-2.348-5.652 2.348-2.348 5.652 2.348 5.652 5.652 2.348 5.652-2.348 2.348-5.652zM29.714 29.714q0 0.929-0.679 1.607t-1.607 0.679q-0.964 0-1.607-0.679l-6.125-6.107q-3.196 2.214-7.125 2.214-2.554 0-4.884-0.991t-4.018-2.679-2.679-4.018-0.991-4.884 0.991-4.884 2.679-4.018 4.018-2.679 4.884-0.991 4.884 0.991 4.018 2.679 2.679 4.018 0.991 4.884q0 3.929-2.214 7.125l6.125 6.125q0.661 0.661 0.661 1.607z"></path>
</symbol>
<symbol id="icon-envelope-o" viewBox="0 0 32 32">
<path class="path1" d="M29.714 26.857v-13.714q-0.571 0.643-1.232 1.179-4.786 3.679-7.607 6.036-0.911 0.768-1.482 1.196t-1.545 0.866-1.83 0.438h-0.036q-0.857 0-1.83-0.438t-1.545-0.866-1.482-1.196q-2.821-2.357-7.607-6.036-0.661-0.536-1.232-1.179v13.714q0 0.232 0.17 0.402t0.402 0.17h26.286q0.232 0 0.402-0.17t0.17-0.402zM29.714 8.089v-0.438t-0.009-0.232-0.054-0.223-0.098-0.161-0.161-0.134-0.25-0.045h-26.286q-0.232 0-0.402 0.17t-0.17 0.402q0 3 2.625 5.071 3.446 2.714 7.161 5.661 0.107 0.089 0.625 0.527t0.821 0.67 0.795 0.563 0.902 0.491 0.768 0.161h0.036q0.357 0 0.768-0.161t0.902-0.491 0.795-0.563 0.821-0.67 0.625-0.527q3.714-2.946 7.161-5.661 0.964-0.768 1.795-2.063t0.83-2.348zM32 7.429v19.429q0 1.179-0.839 2.018t-2.018 0.839h-26.286q-1.179 0-2.018-0.839t-0.839-2.018v-19.429q0-1.179 0.839-2.018t2.018-0.839h26.286q1.179 0 2.018 0.839t0.839 2.018z"></path>
</symbol>
<symbol id="icon-close" viewBox="0 0 25 32">
<path class="path1" d="M23.179 23.607q0 0.714-0.5 1.214l-2.429 2.429q-0.5 0.5-1.214 0.5t-1.214-0.5l-5.25-5.25-5.25 5.25q-0.5 0.5-1.214 0.5t-1.214-0.5l-2.429-2.429q-0.5-0.5-0.5-1.214t0.5-1.214l5.25-5.25-5.25-5.25q-0.5-0.5-0.5-1.214t0.5-1.214l2.429-2.429q0.5-0.5 1.214-0.5t1.214 0.5l5.25 5.25 5.25-5.25q0.5-0.5 1.214-0.5t1.214 0.5l2.429 2.429q0.5 0.5 0.5 1.214t-0.5 1.214l-5.25 5.25 5.25 5.25q0.5 0.5 0.5 1.214z"></path>
</symbol>
<symbol id="icon-angle-down" viewBox="0 0 21 32">
<path class="path1" d="M19.196 13.143q0 0.232-0.179 0.411l-8.321 8.321q-0.179 0.179-0.411 0.179t-0.411-0.179l-8.321-8.321q-0.179-0.179-0.179-0.411t0.179-0.411l0.893-0.893q0.179-0.179 0.411-0.179t0.411 0.179l7.018 7.018 7.018-7.018q0.179-0.179 0.411-0.179t0.411 0.179l0.893 0.893q0.179 0.179 0.179 0.411z"></path>
</symbol>
<symbol id="icon-folder-open" viewBox="0 0 34 32">
<path class="path1" d="M33.554 17q0 0.554-0.554 1.179l-6 7.071q-0.768 0.911-2.152 1.545t-2.563 0.634h-19.429q-0.607 0-1.080-0.232t-0.473-0.768q0-0.554 0.554-1.179l6-7.071q0.768-0.911 2.152-1.545t2.563-0.634h19.429q0.607 0 1.080 0.232t0.473 0.768zM27.429 10.857v2.857h-14.857q-1.679 0-3.518 0.848t-2.929 2.134l-6.107 7.179q0-0.071-0.009-0.223t-0.009-0.223v-17.143q0-1.643 1.179-2.821t2.821-1.179h5.714q1.643 0 2.821 1.179t1.179 2.821v0.571h9.714q1.643 0 2.821 1.179t1.179 2.821z"></path>
</symbol>
<symbol id="icon-twitter" viewBox="0 0 30 32">
<path class="path1" d="M28.929 7.286q-1.196 1.75-2.893 2.982 0.018 0.25 0.018 0.75 0 2.321-0.679 4.634t-2.063 4.437-3.295 3.759-4.607 2.607-5.768 0.973q-4.839 0-8.857-2.589 0.625 0.071 1.393 0.071 4.018 0 7.161-2.464-1.875-0.036-3.357-1.152t-2.036-2.848q0.589 0.089 1.089 0.089 0.768 0 1.518-0.196-2-0.411-3.313-1.991t-1.313-3.67v-0.071q1.214 0.679 2.607 0.732-1.179-0.786-1.875-2.054t-0.696-2.75q0-1.571 0.786-2.911 2.161 2.661 5.259 4.259t6.634 1.777q-0.143-0.679-0.143-1.321 0-2.393 1.688-4.080t4.080-1.688q2.5 0 4.214 1.821 1.946-0.375 3.661-1.393-0.661 2.054-2.536 3.179 1.661-0.179 3.321-0.893z"></path>
</symbol>
<symbol id="icon-facebook" viewBox="0 0 19 32">
<path class="path1" d="M17.125 0.214v4.714h-2.804q-1.536 0-2.071 0.643t-0.536 1.929v3.375h5.232l-0.696 5.286h-4.536v13.554h-5.464v-13.554h-4.554v-5.286h4.554v-3.893q0-3.321 1.857-5.152t4.946-1.83q2.625 0 4.071 0.214z"></path>
</symbol>
<symbol id="icon-github" viewBox="0 0 27 32">
<path class="path1" d="M13.714 2.286q3.732 0 6.884 1.839t4.991 4.991 1.839 6.884q0 4.482-2.616 8.063t-6.759 4.955q-0.482 0.089-0.714-0.125t-0.232-0.536q0-0.054 0.009-1.366t0.009-2.402q0-1.732-0.929-2.536 1.018-0.107 1.83-0.321t1.679-0.696 1.446-1.188 0.946-1.875 0.366-2.688q0-2.125-1.411-3.679 0.661-1.625-0.143-3.643-0.5-0.161-1.446 0.196t-1.643 0.786l-0.679 0.429q-1.661-0.464-3.429-0.464t-3.429 0.464q-0.286-0.196-0.759-0.482t-1.491-0.688-1.518-0.241q-0.804 2.018-0.143 3.643-1.411 1.554-1.411 3.679 0 1.518 0.366 2.679t0.938 1.875 1.438 1.196 1.679 0.696 1.83 0.321q-0.696 0.643-0.875 1.839-0.375 0.179-0.804 0.268t-1.018 0.089-1.17-0.384-0.991-1.116q-0.339-0.571-0.866-0.929t-0.884-0.429l-0.357-0.054q-0.375 0-0.518 0.080t-0.089 0.205 0.161 0.25 0.232 0.214l0.125 0.089q0.393 0.179 0.777 0.679t0.563 0.911l0.179 0.411q0.232 0.679 0.786 1.098t1.196 0.536 1.241 0.125 0.991-0.063l0.411-0.071q0 0.679 0.009 1.58t0.009 0.973q0 0.321-0.232 0.536t-0.714 0.125q-4.143-1.375-6.759-4.955t-2.616-8.063q0-3.732 1.839-6.884t4.991-4.991 6.884-1.839zM5.196 21.982q0.054-0.125-0.125-0.214-0.179-0.054-0.232 0.036-0.054 0.125 0.125 0.214 0.161 0.107 0.232-0.036zM5.75 22.589q0.125-0.089-0.036-0.286-0.179-0.161-0.286-0.054-0.125 0.089 0.036 0.286 0.179 0.179 0.286 0.054zM6.286 23.393q0.161-0.125 0-0.339-0.143-0.232-0.304-0.107-0.161 0.089 0 0.321t0.304 0.125zM7.036 24.143q0.143-0.143-0.071-0.339-0.214-0.214-0.357-0.054-0.161 0.143 0.071 0.339 0.214 0.214 0.357 0.054zM8.054 24.589q0.054-0.196-0.232-0.286-0.268-0.071-0.339 0.125t0.232 0.268q0.268 0.107 0.339-0.107zM9.179 24.679q0-0.232-0.304-0.196-0.286 0-0.286 0.196 0 0.232 0.304 0.196 0.286 0 0.286-0.196zM10.214 24.5q-0.036-0.196-0.321-0.161-0.286 0.054-0.25 0.268t0.321 0.143 0.25-0.25z"></path>
</symbol>
<symbol id="icon-bars" viewBox="0 0 27 32">
<path class="path1" d="M27.429 24v2.286q0 0.464-0.339 0.804t-0.804 0.339h-25.143q-0.464 0-0.804-0.339t-0.339-0.804v-2.286q0-0.464 0.339-0.804t0.804-0.339h25.143q0.464 0 0.804 0.339t0.339 0.804zM27.429 14.857v2.286q0 0.464-0.339 0.804t-0.804 0.339h-25.143q-0.464 0-0.804-0.339t-0.339-0.804v-2.286q0-0.464 0.339-0.804t0.804-0.339h25.143q0.464 0 0.804 0.339t0.339 0.804zM27.429 5.714v2.286q0 0.464-0.339 0.804t-0.804 0.339h-25.143q-0.464 0-0.804-0.339t-0.339-0.804v-2.286q0-0.464 0.339-0.804t0.804-0.339h25.143q0.464 0 0.804 0.339t0.339 0.804z"></path>
</symbol>
<symbol id="icon-google-plus" viewBox="0 0 41 32">
<path class="path1" d="M25.661 16.304q0 3.714-1.554 6.616t-4.429 4.536-6.589 1.634q-2.661 0-5.089-1.036t-4.179-2.786-2.786-4.179-1.036-5.089 1.036-5.089 2.786-4.179 4.179-2.786 5.089-1.036q5.107 0 8.768 3.429l-3.554 3.411q-2.089-2.018-5.214-2.018-2.196 0-4.063 1.107t-2.955 3.009-1.089 4.152 1.089 4.152 2.955 3.009 4.063 1.107q1.482 0 2.723-0.411t2.045-1.027 1.402-1.402 0.875-1.482 0.384-1.321h-7.429v-4.5h12.357q0.214 1.125 0.214 2.179zM41.143 14.125v3.75h-3.732v3.732h-3.75v-3.732h-3.732v-3.75h3.732v-3.732h3.75v3.732h3.732z"></path>
</symbol>
<symbol id="icon-linkedin" viewBox="0 0 27 32">
<path class="path1" d="M6.232 11.161v17.696h-5.893v-17.696h5.893zM6.607 5.696q0.018 1.304-0.902 2.179t-2.42 0.875h-0.036q-1.464 0-2.357-0.875t-0.893-2.179q0-1.321 0.92-2.188t2.402-0.866 2.375 0.866 0.911 2.188zM27.429 18.714v10.143h-5.875v-9.464q0-1.875-0.723-2.938t-2.259-1.063q-1.125 0-1.884 0.616t-1.134 1.527q-0.196 0.536-0.196 1.446v9.875h-5.875q0.036-7.125 0.036-11.554t-0.018-5.286l-0.018-0.857h5.875v2.571h-0.036q0.357-0.571 0.732-1t1.009-0.929 1.554-0.777 2.045-0.277q3.054 0 4.911 2.027t1.857 5.938z"></path>
</symbol>
<symbol id="icon-quote-right" viewBox="0 0 30 32">
<path class="path1" d="M13.714 5.714v12.571q0 1.857-0.723 3.545t-1.955 2.92-2.92 1.955-3.545 0.723h-1.143q-0.464 0-0.804-0.339t-0.339-0.804v-2.286q0-0.464 0.339-0.804t0.804-0.339h1.143q1.893 0 3.232-1.339t1.339-3.232v-0.571q0-0.714-0.5-1.214t-1.214-0.5h-4q-1.429 0-2.429-1t-1-2.429v-6.857q0-1.429 1-2.429t2.429-1h6.857q1.429 0 2.429 1t1 2.429zM29.714 5.714v12.571q0 1.857-0.723 3.545t-1.955 2.92-2.92 1.955-3.545 0.723h-1.143q-0.464 0-0.804-0.339t-0.339-0.804v-2.286q0-0.464 0.339-0.804t0.804-0.339h1.143q1.893 0 3.232-1.339t1.339-3.232v-0.571q0-0.714-0.5-1.214t-1.214-0.5h-4q-1.429 0-2.429-1t-1-2.429v-6.857q0-1.429 1-2.429t2.429-1h6.857q1.429 0 2.429 1t1 2.429z"></path>
</symbol>
<symbol id="icon-mail-reply" viewBox="0 0 32 32">
<path class="path1" d="M32 20q0 2.964-2.268 8.054-0.054 0.125-0.188 0.429t-0.241 0.536-0.232 0.393q-0.214 0.304-0.5 0.304-0.268 0-0.42-0.179t-0.152-0.446q0-0.161 0.045-0.473t0.045-0.42q0.089-1.214 0.089-2.196 0-1.804-0.313-3.232t-0.866-2.473-1.429-1.804-1.884-1.241-2.375-0.759-2.75-0.384-3.134-0.107h-4v4.571q0 0.464-0.339 0.804t-0.804 0.339-0.804-0.339l-9.143-9.143q-0.339-0.339-0.339-0.804t0.339-0.804l9.143-9.143q0.339-0.339 0.804-0.339t0.804 0.339 0.339 0.804v4.571h4q12.732 0 15.625 7.196 0.946 2.393 0.946 5.946z"></path>
</symbol>
<symbol id="icon-youtube" viewBox="0 0 27 32">
<path class="path1" d="M17.339 22.214v3.768q0 1.196-0.696 1.196-0.411 0-0.804-0.393v-5.375q0.393-0.393 0.804-0.393 0.696 0 0.696 1.196zM23.375 22.232v0.821h-1.607v-0.821q0-1.214 0.804-1.214t0.804 1.214zM6.125 18.339h1.911v-1.679h-5.571v1.679h1.875v10.161h1.786v-10.161zM11.268 28.5h1.589v-8.821h-1.589v6.75q-0.536 0.75-1.018 0.75-0.321 0-0.375-0.375-0.018-0.054-0.018-0.625v-6.5h-1.589v6.982q0 0.875 0.143 1.304 0.214 0.661 1.036 0.661 0.857 0 1.821-1.089v0.964zM18.929 25.857v-3.518q0-1.304-0.161-1.768-0.304-1-1.268-1-0.893 0-1.661 0.964v-3.875h-1.589v11.839h1.589v-0.857q0.804 0.982 1.661 0.982 0.964 0 1.268-0.982 0.161-0.482 0.161-1.786zM24.964 25.679v-0.232h-1.625q0 0.911-0.036 1.089-0.125 0.643-0.714 0.643-0.821 0-0.821-1.232v-1.554h3.196v-1.839q0-1.411-0.482-2.071-0.696-0.911-1.893-0.911-1.214 0-1.911 0.911-0.5 0.661-0.5 2.071v3.089q0 1.411 0.518 2.071 0.696 0.911 1.929 0.911 1.286 0 1.929-0.946 0.321-0.482 0.375-0.964 0.036-0.161 0.036-1.036zM14.107 9.375v-3.75q0-1.232-0.768-1.232t-0.768 1.232v3.75q0 1.25 0.768 1.25t0.768-1.25zM26.946 22.786q0 4.179-0.464 6.25-0.25 1.054-1.036 1.768t-1.821 0.821q-3.286 0.375-9.911 0.375t-9.911-0.375q-1.036-0.107-1.83-0.821t-1.027-1.768q-0.464-2-0.464-6.25 0-4.179 0.464-6.25 0.25-1.054 1.036-1.768t1.839-0.839q3.268-0.357 9.893-0.357t9.911 0.357q1.036 0.125 1.83 0.839t1.027 1.768q0.464 2 0.464 6.25zM9.125 0h1.821l-2.161 7.125v4.839h-1.786v-4.839q-0.25-1.321-1.089-3.786-0.661-1.839-1.161-3.339h1.893l1.268 4.696zM15.732 5.946v3.125q0 1.446-0.5 2.107-0.661 0.911-1.893 0.911-1.196 0-1.875-0.911-0.5-0.679-0.5-2.107v-3.125q0-1.429 0.5-2.089 0.679-0.911 1.875-0.911 1.232 0 1.893 0.911 0.5 0.661 0.5 2.089zM21.714 3.054v8.911h-1.625v-0.982q-0.946 1.107-1.839 1.107-0.821 0-1.054-0.661-0.143-0.429-0.143-1.339v-7.036h1.625v6.554q0 0.589 0.018 0.625 0.054 0.393 0.375 0.393 0.482 0 1.018-0.768v-6.804h1.625z"></path>
</symbol>
<symbol id="icon-dropbox" viewBox="0 0 32 32">
<path class="path1" d="M7.179 12.625l8.821 5.446-6.107 5.089-8.75-5.696zM24.786 22.536v1.929l-8.75 5.232v0.018l-0.018-0.018-0.018 0.018v-0.018l-8.732-5.232v-1.929l2.625 1.714 6.107-5.071v-0.036l0.018 0.018 0.018-0.018v0.036l6.125 5.071zM9.893 2.107l6.107 5.089-8.821 5.429-6.036-4.821zM24.821 12.625l6.036 4.839-8.732 5.696-6.125-5.089zM22.125 2.107l8.732 5.696-6.036 4.821-8.821-5.429z"></path>
</symbol>
<symbol id="icon-instagram" viewBox="0 0 27 32">
<path class="path1" d="M18.286 16q0-1.893-1.339-3.232t-3.232-1.339-3.232 1.339-1.339 3.232 1.339 3.232 3.232 1.339 3.232-1.339 1.339-3.232zM20.75 16q0 2.929-2.054 4.982t-4.982 2.054-4.982-2.054-2.054-4.982 2.054-4.982 4.982-2.054 4.982 2.054 2.054 4.982zM22.679 8.679q0 0.679-0.482 1.161t-1.161 0.482-1.161-0.482-0.482-1.161 0.482-1.161 1.161-0.482 1.161 0.482 0.482 1.161zM13.714 4.75q-0.125 0-1.366-0.009t-1.884 0-1.723 0.054-1.839 0.179-1.277 0.33q-0.893 0.357-1.571 1.036t-1.036 1.571q-0.196 0.518-0.33 1.277t-0.179 1.839-0.054 1.723 0 1.884 0.009 1.366-0.009 1.366 0 1.884 0.054 1.723 0.179 1.839 0.33 1.277q0.357 0.893 1.036 1.571t1.571 1.036q0.518 0.196 1.277 0.33t1.839 0.179 1.723 0.054 1.884 0 1.366-0.009 1.366 0.009 1.884 0 1.723-0.054 1.839-0.179 1.277-0.33q0.893-0.357 1.571-1.036t1.036-1.571q0.196-0.518 0.33-1.277t0.179-1.839 0.054-1.723 0-1.884-0.009-1.366 0.009-1.366 0-1.884-0.054-1.723-0.179-1.839-0.33-1.277q-0.357-0.893-1.036-1.571t-1.571-1.036q-0.518-0.196-1.277-0.33t-1.839-0.179-1.723-0.054-1.884 0-1.366 0.009zM27.429 16q0 4.089-0.089 5.661-0.179 3.714-2.214 5.75t-5.75 2.214q-1.571 0.089-5.661 0.089t-5.661-0.089q-3.714-0.179-5.75-2.214t-2.214-5.75q-0.089-1.571-0.089-5.661t0.089-5.661q0.179-3.714 2.214-5.75t5.75-2.214q1.571-0.089 5.661-0.089t5.661 0.089q3.714 0.179 5.75 2.214t2.214 5.75q0.089 1.571 0.089 5.661z"></path>
</symbol>
<symbol id="icon-flickr" viewBox="0 0 27 32">
<path class="path1" d="M22.286 2.286q2.125 0 3.634 1.509t1.509 3.634v17.143q0 2.125-1.509 3.634t-3.634 1.509h-17.143q-2.125 0-3.634-1.509t-1.509-3.634v-17.143q0-2.125 1.509-3.634t3.634-1.509h17.143zM12.464 16q0-1.571-1.107-2.679t-2.679-1.107-2.679 1.107-1.107 2.679 1.107 2.679 2.679 1.107 2.679-1.107 1.107-2.679zM22.536 16q0-1.571-1.107-2.679t-2.679-1.107-2.679 1.107-1.107 2.679 1.107 2.679 2.679 1.107 2.679-1.107 1.107-2.679z"></path>
</symbol>
<symbol id="icon-tumblr" viewBox="0 0 19 32">
<path class="path1" d="M16.857 23.732l1.429 4.232q-0.411 0.625-1.982 1.179t-3.161 0.571q-1.857 0.036-3.402-0.464t-2.545-1.321-1.696-1.893-0.991-2.143-0.295-2.107v-9.714h-3v-3.839q1.286-0.464 2.304-1.241t1.625-1.607 1.036-1.821 0.607-1.768 0.268-1.58q0.018-0.089 0.080-0.152t0.134-0.063h4.357v7.571h5.946v4.5h-5.964v9.25q0 0.536 0.116 1t0.402 0.938 0.884 0.741 1.455 0.25q1.393-0.036 2.393-0.518z"></path>
</symbol>
<symbol id="icon-dockerhub" viewBox="0 0 24 28">
<path class="path1" d="M1.597 10.257h2.911v2.83H1.597v-2.83zm3.573 0h2.91v2.83H5.17v-2.83zm0-3.627h2.91v2.829H5.17V6.63zm3.57 3.627h2.912v2.83H8.74v-2.83zm0-3.627h2.912v2.829H8.74V6.63zm3.573 3.627h2.911v2.83h-2.911v-2.83zm0-3.627h2.911v2.829h-2.911V6.63zm3.572 3.627h2.911v2.83h-2.911v-2.83zM12.313 3h2.911v2.83h-2.911V3zm-6.65 14.173c-.449 0-.812.354-.812.788 0 .435.364.788.812.788.447 0 .811-.353.811-.788 0-.434-.363-.788-.811-.788"></path>
<path class="path2" d="M28.172 11.721c-.978-.549-2.278-.624-3.388-.306-.136-1.146-.91-2.149-1.83-2.869l-.366-.286-.307.345c-.618.692-.8 1.845-.718 2.73.063.651.273 1.312.685 1.834-.313.183-.668.328-.985.434-.646.212-1.347.33-2.028.33H.083l-.042.429c-.137 1.432.065 2.866.674 4.173l.262.519.03.048c1.8 2.973 4.963 4.225 8.41 4.225 6.672 0 12.174-2.896 14.702-9.015 1.689.085 3.417-.4 4.243-1.968l.211-.4-.401-.223zM5.664 19.458c-.85 0-1.542-.671-1.542-1.497 0-.825.691-1.498 1.541-1.498.849 0 1.54.672 1.54 1.497s-.69 1.498-1.539 1.498z"></path>
</symbol>
<symbol id="icon-dribbble" viewBox="0 0 27 32">
<path class="path1" d="M18.286 26.786q-0.75-4.304-2.5-8.893h-0.036l-0.036 0.018q-0.286 0.107-0.768 0.295t-1.804 0.875-2.446 1.464-2.339 2.045-1.839 2.643l-0.268-0.196q3.286 2.679 7.464 2.679 2.357 0 4.571-0.929zM14.982 15.946q-0.375-0.875-0.946-1.982-5.554 1.661-12.018 1.661-0.018 0.125-0.018 0.375 0 2.214 0.786 4.223t2.214 3.598q0.893-1.589 2.205-2.973t2.545-2.223 2.33-1.446 1.777-0.857l0.661-0.232q0.071-0.018 0.232-0.063t0.232-0.080zM13.071 12.161q-2.143-3.804-4.357-6.75-2.464 1.161-4.179 3.321t-2.286 4.857q5.393 0 10.821-1.429zM25.286 17.857q-3.75-1.071-7.304-0.518 1.554 4.268 2.286 8.375 1.982-1.339 3.304-3.384t1.714-4.473zM10.911 4.625q-0.018 0-0.036 0.018 0.018-0.018 0.036-0.018zM21.446 7.214q-3.304-2.929-7.732-2.929-1.357 0-2.768 0.339 2.339 3.036 4.393 6.821 1.232-0.464 2.321-1.080t1.723-1.098 1.17-1.018 0.67-0.723zM25.429 15.875q-0.054-4.143-2.661-7.321l-0.018 0.018q-0.161 0.214-0.339 0.438t-0.777 0.795-1.268 1.080-1.786 1.161-2.348 1.152q0.446 0.946 0.786 1.696 0.036 0.107 0.116 0.313t0.134 0.295q0.643-0.089 1.33-0.125t1.313-0.036 1.232 0.027 1.143 0.071 1.009 0.098 0.857 0.116 0.652 0.107 0.446 0.080zM27.429 16q0 3.732-1.839 6.884t-4.991 4.991-6.884 1.839-6.884-1.839-4.991-4.991-1.839-6.884 1.839-6.884 4.991-4.991 6.884-1.839 6.884 1.839 4.991 4.991 1.839 6.884z"></path>
</symbol>
<symbol id="icon-skype" viewBox="0 0 27 32">
<path class="path1" d="M20.946 18.982q0-0.893-0.348-1.634t-0.866-1.223-1.304-0.875-1.473-0.607-1.563-0.411l-1.857-0.429q-0.536-0.125-0.786-0.188t-0.625-0.205-0.536-0.286-0.295-0.375-0.134-0.536q0-1.375 2.571-1.375 0.768 0 1.375 0.214t0.964 0.509 0.679 0.598 0.714 0.518 0.857 0.214q0.839 0 1.348-0.571t0.509-1.375q0-0.982-1-1.777t-2.536-1.205-3.25-0.411q-1.214 0-2.357 0.277t-2.134 0.839-1.589 1.554-0.598 2.295q0 1.089 0.339 1.902t1 1.348 1.429 0.866 1.839 0.58l2.607 0.643q1.607 0.393 2 0.643 0.571 0.357 0.571 1.071 0 0.696-0.714 1.152t-1.875 0.455q-0.911 0-1.634-0.286t-1.161-0.688-0.813-0.804-0.821-0.688-0.964-0.286q-0.893 0-1.348 0.536t-0.455 1.339q0 1.643 2.179 2.813t5.196 1.17q1.304 0 2.5-0.33t2.188-0.955 1.58-1.67 0.589-2.348zM27.429 22.857q0 2.839-2.009 4.848t-4.848 2.009q-2.321 0-4.179-1.429-1.375 0.286-2.679 0.286-2.554 0-4.884-0.991t-4.018-2.679-2.679-4.018-0.991-4.884q0-1.304 0.286-2.679-1.429-1.857-1.429-4.179 0-2.839 2.009-4.848t4.848-2.009q2.321 0 4.179 1.429 1.375-0.286 2.679-0.286 2.554 0 4.884 0.991t4.018 2.679 2.679 4.018 0.991 4.884q0 1.304-0.286 2.679 1.429 1.857 1.429 4.179z"></path>
</symbol>
<symbol id="icon-foursquare" viewBox="0 0 23 32">
<path class="path1" d="M17.857 7.75l0.661-3.464q0.089-0.411-0.161-0.714t-0.625-0.304h-12.714q-0.411 0-0.688 0.304t-0.277 0.661v19.661q0 0.125 0.107 0.018l5.196-6.286q0.411-0.464 0.679-0.598t0.857-0.134h4.268q0.393 0 0.661-0.259t0.321-0.527q0.429-2.321 0.661-3.411 0.071-0.375-0.205-0.714t-0.652-0.339h-5.25q-0.518 0-0.857-0.339t-0.339-0.857v-0.75q0-0.518 0.339-0.848t0.857-0.33h6.179q0.321 0 0.625-0.241t0.357-0.527zM21.911 3.786q-0.268 1.304-0.955 4.759t-1.241 6.25-0.625 3.098q-0.107 0.393-0.161 0.58t-0.25 0.58-0.438 0.589-0.688 0.375-1.036 0.179h-4.839q-0.232 0-0.393 0.179-0.143 0.161-7.607 8.821-0.393 0.446-1.045 0.509t-0.866-0.098q-0.982-0.393-0.982-1.75v-25.179q0-0.982 0.679-1.83t2.143-0.848h15.857q1.696 0 2.268 0.946t0.179 2.839zM21.911 3.786l-2.821 14.107q0.071-0.304 0.625-3.098t1.241-6.25 0.955-4.759z"></path>
</symbol>
<symbol id="icon-wordpress" viewBox="0 0 32 32">
<path class="path1" d="M2.268 16q0-2.911 1.196-5.589l6.554 17.946q-3.5-1.696-5.625-5.018t-2.125-7.339zM25.268 15.304q0 0.339-0.045 0.688t-0.179 0.884-0.205 0.786-0.313 1.054-0.313 1.036l-1.357 4.571-4.964-14.75q0.821-0.054 1.571-0.143 0.339-0.036 0.464-0.33t-0.045-0.554-0.509-0.241l-3.661 0.179q-1.339-0.018-3.607-0.179-0.214-0.018-0.366 0.089t-0.205 0.268-0.027 0.33 0.161 0.295 0.348 0.143l1.429 0.143 2.143 5.857-3 9-5-14.857q0.821-0.054 1.571-0.143 0.339-0.036 0.464-0.33t-0.045-0.554-0.509-0.241l-3.661 0.179q-0.125 0-0.411-0.009t-0.464-0.009q1.875-2.857 4.902-4.527t6.563-1.67q2.625 0 5.009 0.946t4.259 2.661h-0.179q-0.982 0-1.643 0.723t-0.661 1.705q0 0.214 0.036 0.429t0.071 0.384 0.143 0.411 0.161 0.375 0.214 0.402 0.223 0.375 0.259 0.429 0.25 0.411q1.125 1.911 1.125 3.786zM16.232 17.196l4.232 11.554q0.018 0.107 0.089 0.196-2.25 0.786-4.554 0.786-2 0-3.875-0.571zM28.036 9.411q1.696 3.107 1.696 6.589 0 3.732-1.857 6.884t-4.982 4.973l4.196-12.107q1.054-3.018 1.054-4.929 0-0.75-0.107-1.411zM16 0q3.25 0 6.214 1.268t5.107 3.411 3.411 5.107 1.268 6.214-1.268 6.214-3.411 5.107-5.107 3.411-6.214 1.268-6.214-1.268-5.107-3.411-3.411-5.107-1.268-6.214 1.268-6.214 3.411-5.107 5.107-3.411 6.214-1.268zM16 31.268q3.089 0 5.92-1.214t4.875-3.259 3.259-4.875 1.214-5.92-1.214-5.92-3.259-4.875-4.875-3.259-5.92-1.214-5.92 1.214-4.875 3.259-3.259 4.875-1.214 5.92 1.214 5.92 3.259 4.875 4.875 3.259 5.92 1.214z"></path>
</symbol>
<symbol id="icon-stumbleupon" viewBox="0 0 34 32">
<path class="path1" d="M18.964 12.714v-2.107q0-0.75-0.536-1.286t-1.286-0.536-1.286 0.536-0.536 1.286v10.929q0 3.125-2.25 5.339t-5.411 2.214q-3.179 0-5.42-2.241t-2.241-5.42v-4.75h5.857v4.679q0 0.768 0.536 1.295t1.286 0.527 1.286-0.527 0.536-1.295v-11.071q0-3.054 2.259-5.214t5.384-2.161q3.143 0 5.393 2.179t2.25 5.25v2.429l-3.482 1.036zM28.429 16.679h5.857v4.75q0 3.179-2.241 5.42t-5.42 2.241q-3.161 0-5.411-2.223t-2.25-5.366v-4.786l2.339 1.089 3.482-1.036v4.821q0 0.75 0.536 1.277t1.286 0.527 1.286-0.527 0.536-1.277v-4.911z"></path>
</symbol>
<symbol id="icon-digg" viewBox="0 0 37 32">
<path class="path1" d="M5.857 5.036h3.643v17.554h-9.5v-12.446h5.857v-5.107zM5.857 19.661v-6.589h-2.196v6.589h2.196zM10.964 10.143v12.446h3.661v-12.446h-3.661zM10.964 5.036v3.643h3.661v-3.643h-3.661zM16.089 10.143h9.518v16.821h-9.518v-2.911h5.857v-1.464h-5.857v-12.446zM21.946 19.661v-6.589h-2.196v6.589h2.196zM27.071 10.143h9.5v16.821h-9.5v-2.911h5.839v-1.464h-5.839v-12.446zM32.911 19.661v-6.589h-2.196v6.589h2.196z"></path>
</symbol>
<symbol id="icon-spotify" viewBox="0 0 27 32">
<path class="path1" d="M20.125 21.607q0-0.571-0.536-0.911-3.446-2.054-7.982-2.054-2.375 0-5.125 0.607-0.75 0.161-0.75 0.929 0 0.357 0.241 0.616t0.634 0.259q0.089 0 0.661-0.143 2.357-0.482 4.339-0.482 4.036 0 7.089 1.839 0.339 0.196 0.589 0.196 0.339 0 0.589-0.241t0.25-0.616zM21.839 17.768q0-0.714-0.625-1.089-4.232-2.518-9.786-2.518-2.732 0-5.411 0.75-0.857 0.232-0.857 1.143 0 0.446 0.313 0.759t0.759 0.313q0.125 0 0.661-0.143 2.179-0.589 4.482-0.589 4.982 0 8.714 2.214 0.429 0.232 0.679 0.232 0.446 0 0.759-0.313t0.313-0.759zM23.768 13.339q0-0.839-0.714-1.25-2.25-1.304-5.232-1.973t-6.125-0.67q-3.643 0-6.5 0.839-0.411 0.125-0.688 0.455t-0.277 0.866q0 0.554 0.366 0.929t0.92 0.375q0.196 0 0.714-0.143 2.375-0.661 5.482-0.661 2.839 0 5.527 0.607t4.527 1.696q0.375 0.214 0.714 0.214 0.518 0 0.902-0.366t0.384-0.92zM27.429 16q0 3.732-1.839 6.884t-4.991 4.991-6.884 1.839-6.884-1.839-4.991-4.991-1.839-6.884 1.839-6.884 4.991-4.991 6.884-1.839 6.884 1.839 4.991 4.991 1.839 6.884z"></path>
</symbol>
<symbol id="icon-soundcloud" viewBox="0 0 41 32">
<path class="path1" d="M14 24.5l0.286-4.304-0.286-9.339q-0.018-0.179-0.134-0.304t-0.295-0.125q-0.161 0-0.286 0.125t-0.125 0.304l-0.25 9.339 0.25 4.304q0.018 0.179 0.134 0.295t0.277 0.116q0.393 0 0.429-0.411zM19.286 23.982l0.196-3.768-0.214-10.464q0-0.286-0.232-0.429-0.143-0.089-0.286-0.089t-0.286 0.089q-0.232 0.143-0.232 0.429l-0.018 0.107-0.179 10.339q0 0.018 0.196 4.214v0.018q0 0.179 0.107 0.304 0.161 0.196 0.411 0.196 0.196 0 0.357-0.161 0.161-0.125 0.161-0.357zM0.625 17.911l0.357 2.286-0.357 2.25q-0.036 0.161-0.161 0.161t-0.161-0.161l-0.304-2.25 0.304-2.286q0.036-0.161 0.161-0.161t0.161 0.161zM2.161 16.5l0.464 3.696-0.464 3.625q-0.036 0.161-0.179 0.161-0.161 0-0.161-0.179l-0.411-3.607 0.411-3.696q0-0.161 0.161-0.161 0.143 0 0.179 0.161zM3.804 15.821l0.446 4.375-0.446 4.232q0 0.196-0.196 0.196-0.179 0-0.214-0.196l-0.375-4.232 0.375-4.375q0.036-0.214 0.214-0.214 0.196 0 0.196 0.214zM5.482 15.696l0.411 4.5-0.411 4.357q-0.036 0.232-0.25 0.232-0.232 0-0.232-0.232l-0.375-4.357 0.375-4.5q0-0.232 0.232-0.232 0.214 0 0.25 0.232zM7.161 16.018l0.375 4.179-0.375 4.393q-0.036 0.286-0.286 0.286-0.107 0-0.188-0.080t-0.080-0.205l-0.357-4.393 0.357-4.179q0-0.107 0.080-0.188t0.188-0.080q0.25 0 0.286 0.268zM8.839 13.411l0.375 6.786-0.375 4.393q0 0.125-0.089 0.223t-0.214 0.098q-0.286 0-0.321-0.321l-0.321-4.393 0.321-6.786q0.036-0.321 0.321-0.321 0.125 0 0.214 0.098t0.089 0.223zM10.518 11.875l0.339 8.357-0.339 4.357q0 0.143-0.098 0.241t-0.241 0.098q-0.321 0-0.357-0.339l-0.286-4.357 0.286-8.357q0.036-0.339 0.357-0.339 0.143 0 0.241 0.098t0.098 0.241zM12.268 11.161l0.321 9.036-0.321 4.321q-0.036 0.375-0.393 0.375-0.339 0-0.375-0.375l-0.286-4.321 0.286-9.036q0-0.161 0.116-0.277t0.259-0.116q0.161 0 0.268 0.116t0.125 0.277zM19.268 24.411v0 0zM15.732 11.089l0.268 9.107-0.268 4.268q0 0.179-0.134 0.313t-0.313 0.134-0.304-0.125-0.143-0.321l-0.25-4.268 0.25-9.107q0-0.196 0.134-0.321t0.313-0.125 0.313 0.125 0.134 0.321zM17.5 11.429l0.25 8.786-0.25 4.214q0 0.196-0.143 0.339t-0.339 0.143-0.339-0.143-0.161-0.339l-0.214-4.214 0.214-8.786q0.018-0.214 0.161-0.357t0.339-0.143 0.33 0.143 0.152 0.357zM21.286 20.214l-0.25 4.125q0 0.232-0.161 0.393t-0.393 0.161-0.393-0.161-0.179-0.393l-0.107-2.036-0.107-2.089 0.214-11.357v-0.054q0.036-0.268 0.214-0.429 0.161-0.125 0.357-0.125 0.143 0 0.268 0.089 0.25 0.143 0.286 0.464zM41.143 19.875q0 2.089-1.482 3.563t-3.571 1.473h-14.036q-0.232-0.036-0.393-0.196t-0.161-0.393v-16.054q0-0.411 0.5-0.589 1.518-0.607 3.232-0.607 3.482 0 6.036 2.348t2.857 5.777q0.946-0.393 1.964-0.393 2.089 0 3.571 1.482t1.482 3.589z"></path>
</symbol>
<symbol id="icon-codepen" viewBox="0 0 32 32">
<path class="path1" d="M3.857 20.875l10.768 7.179v-6.411l-5.964-3.982zM2.75 18.304l3.446-2.304-3.446-2.304v4.607zM17.375 28.054l10.768-7.179-4.804-3.214-5.964 3.982v6.411zM16 19.25l4.857-3.25-4.857-3.25-4.857 3.25zM8.661 14.339l5.964-3.982v-6.411l-10.768 7.179zM25.804 16l3.446 2.304v-4.607zM23.339 14.339l4.804-3.214-10.768-7.179v6.411zM32 11.125v9.75q0 0.732-0.607 1.143l-14.625 9.75q-0.375 0.232-0.768 0.232t-0.768-0.232l-14.625-9.75q-0.607-0.411-0.607-1.143v-9.75q0-0.732 0.607-1.143l14.625-9.75q0.375-0.232 0.768-0.232t0.768 0.232l14.625 9.75q0.607 0.411 0.607 1.143z"></path>
</symbol>
<symbol id="icon-twitch" viewBox="0 0 32 32">
<path class="path1" d="M16 7.75v7.75h-2.589v-7.75h2.589zM23.107 7.75v7.75h-2.589v-7.75h2.589zM23.107 21.321l4.518-4.536v-14.196h-21.321v18.732h5.821v3.875l3.875-3.875h7.107zM30.214 0v18.089l-7.75 7.75h-5.821l-3.875 3.875h-3.875v-3.875h-7.107v-20.679l1.946-5.161h26.482z"></path>
</symbol>
<symbol id="icon-meanpath" viewBox="0 0 27 32">
<path class="path1" d="M23.411 15.036v2.036q0 0.429-0.241 0.679t-0.67 0.25h-3.607q-0.429 0-0.679-0.25t-0.25-0.679v-2.036q0-0.429 0.25-0.679t0.679-0.25h3.607q0.429 0 0.67 0.25t0.241 0.679zM14.661 19.143v-4.464q0-0.946-0.58-1.527t-1.527-0.58h-2.375q-1.214 0-1.714 0.929-0.5-0.929-1.714-0.929h-2.321q-0.946 0-1.527 0.58t-0.58 1.527v4.464q0 0.393 0.375 0.393h0.982q0.393 0 0.393-0.393v-4.107q0-0.429 0.241-0.679t0.688-0.25h1.679q0.429 0 0.679 0.25t0.25 0.679v4.107q0 0.393 0.375 0.393h0.964q0.393 0 0.393-0.393v-4.107q0-0.429 0.25-0.679t0.679-0.25h1.732q0.429 0 0.67 0.25t0.241 0.679v4.107q0 0.393 0.393 0.393h0.982q0.375 0 0.375-0.393zM25.179 17.429v-2.75q0-0.946-0.589-1.527t-1.536-0.58h-4.714q-0.946 0-1.536 0.58t-0.589 1.527v7.321q0 0.375 0.393 0.375h0.982q0.375 0 0.375-0.375v-3.214q0.554 0.75 1.679 0.75h3.411q0.946 0 1.536-0.58t0.589-1.527zM27.429 6.429v19.143q0 1.714-1.214 2.929t-2.929 1.214h-19.143q-1.714 0-2.929-1.214t-1.214-2.929v-19.143q0-1.714 1.214-2.929t2.929-1.214h19.143q1.714 0 2.929 1.214t1.214 2.929z"></path>
</symbol>
<symbol id="icon-pinterest-p" viewBox="0 0 23 32">
<path class="path1" d="M0 10.661q0-1.929 0.67-3.634t1.848-2.973 2.714-2.196 3.304-1.393 3.607-0.464q2.821 0 5.25 1.188t3.946 3.455 1.518 5.125q0 1.714-0.339 3.357t-1.071 3.161-1.786 2.67-2.589 1.839-3.375 0.688q-1.214 0-2.411-0.571t-1.714-1.571q-0.179 0.696-0.5 2.009t-0.42 1.696-0.366 1.268-0.464 1.268-0.571 1.116-0.821 1.384-1.107 1.545l-0.25 0.089-0.161-0.179q-0.268-2.804-0.268-3.357 0-1.643 0.384-3.688t1.188-5.134 0.929-3.625q-0.571-1.161-0.571-3.018 0-1.482 0.929-2.786t2.357-1.304q1.089 0 1.696 0.723t0.607 1.83q0 1.179-0.786 3.411t-0.786 3.339q0 1.125 0.804 1.866t1.946 0.741q0.982 0 1.821-0.446t1.402-1.214 1-1.696 0.679-1.973 0.357-1.982 0.116-1.777q0-3.089-1.955-4.813t-5.098-1.723q-3.571 0-5.964 2.313t-2.393 5.866q0 0.786 0.223 1.518t0.482 1.161 0.482 0.813 0.223 0.545q0 0.5-0.268 1.304t-0.661 0.804q-0.036 0-0.304-0.054-0.911-0.268-1.616-1t-1.089-1.688-0.58-1.929-0.196-1.902z"></path>
</symbol>
<symbol id="icon-periscope" viewBox="0 0 24 28">
<path class="path1" d="M12.285,1C6.696,1,2.277,5.643,2.277,11.243c0,5.851,7.77,14.578,10.007,14.578c1.959,0,9.729-8.728,9.729-14.578 C22.015,5.643,17.596,1,12.285,1z M12.317,16.551c-3.473,0-6.152-2.611-6.152-5.664c0-1.292,0.39-2.472,1.065-3.438 c0.206,1.084,1.18,1.906,2.352,1.906c1.322,0,2.393-1.043,2.393-2.333c0-0.832-0.447-1.561-1.119-1.975 c0.467-0.105,0.955-0.161,1.46-0.161c3.133,0,5.81,2.611,5.81,5.998C18.126,13.94,15.449,16.551,12.317,16.551z"></path>
</symbol>
<symbol id="icon-get-pocket" viewBox="0 0 31 32">
<path class="path1" d="M27.946 2.286q1.161 0 1.964 0.813t0.804 1.973v9.268q0 3.143-1.214 6t-3.259 4.911-4.893 3.259-5.973 1.205q-3.143 0-5.991-1.205t-4.902-3.259-3.268-4.911-1.214-6v-9.268q0-1.143 0.821-1.964t1.964-0.821h25.161zM15.375 21.286q0.839 0 1.464-0.589l7.214-6.929q0.661-0.625 0.661-1.518 0-0.875-0.616-1.491t-1.491-0.616q-0.839 0-1.464 0.589l-5.768 5.536-5.768-5.536q-0.625-0.589-1.446-0.589-0.875 0-1.491 0.616t-0.616 1.491q0 0.911 0.643 1.518l7.232 6.929q0.589 0.589 1.446 0.589z"></path>
</symbol>
<symbol id="icon-vimeo" viewBox="0 0 32 32">
<path class="path1" d="M30.518 9.25q-0.179 4.214-5.929 11.625-5.946 7.696-10.036 7.696-2.536 0-4.286-4.696-0.786-2.857-2.357-8.607-1.286-4.679-2.804-4.679-0.321 0-2.268 1.357l-1.375-1.75q0.429-0.375 1.929-1.723t2.321-2.063q2.786-2.464 4.304-2.607 1.696-0.161 2.732 0.991t1.446 3.634q0.786 5.125 1.179 6.661 0.982 4.446 2.143 4.446 0.911 0 2.75-2.875 1.804-2.875 1.946-4.393 0.232-2.482-1.946-2.482-1.018 0-2.161 0.464 2.143-7.018 8.196-6.821 4.482 0.143 4.214 5.821z"></path>
</symbol>
<symbol id="icon-reddit-alien" viewBox="0 0 32 32">
<path class="path1" d="M32 15.107q0 1.036-0.527 1.884t-1.42 1.295q0.214 0.821 0.214 1.714 0 2.768-1.902 5.125t-5.188 3.723-7.143 1.366-7.134-1.366-5.179-3.723-1.902-5.125q0-0.839 0.196-1.679-0.911-0.446-1.464-1.313t-0.554-1.902q0-1.464 1.036-2.509t2.518-1.045q1.518 0 2.589 1.125 3.893-2.714 9.196-2.893l2.071-9.304q0.054-0.232 0.268-0.375t0.464-0.089l6.589 1.446q0.321-0.661 0.964-1.063t1.411-0.402q1.107 0 1.893 0.777t0.786 1.884-0.786 1.893-1.893 0.786-1.884-0.777-0.777-1.884l-5.964-1.321-1.857 8.429q5.357 0.161 9.268 2.857 1.036-1.089 2.554-1.089 1.482 0 2.518 1.045t1.036 2.509zM7.464 18.661q0 1.107 0.777 1.893t1.884 0.786 1.893-0.786 0.786-1.893-0.786-1.884-1.893-0.777q-1.089 0-1.875 0.786t-0.786 1.875zM21.929 25q0.196-0.196 0.196-0.464t-0.196-0.464q-0.179-0.179-0.446-0.179t-0.464 0.179q-0.732 0.75-2.161 1.107t-2.857 0.357-2.857-0.357-2.161-1.107q-0.196-0.179-0.464-0.179t-0.446 0.179q-0.196 0.179-0.196 0.455t0.196 0.473q0.768 0.768 2.116 1.214t2.188 0.527 1.625 0.080 1.625-0.080 2.188-0.527 2.116-1.214zM21.875 21.339q1.107 0 1.884-0.786t0.777-1.893q0-1.089-0.786-1.875t-1.875-0.786q-1.107 0-1.893 0.777t-0.786 1.884 0.786 1.893 1.893 0.786z"></path>
</symbol>
<symbol id="icon-whatsapp" viewBox="0 0 32 32">
<path d="M15.968 2.003a14.03 13.978 0 0 0-14.03 13.978 14.03 13.978 0 0 0 2.132 7.391L1.938 29.96l6.745-2.052a14.03 13.978 0 0 0 7.285 2.052 14.03 13.978 0 0 0 14.03-13.978 14.03 13.978 0 0 0-14.03-13.978z" stroke-width=".2000562"/>
<path d="M10.454 8.236a2.57 3.401 51.533 0 0-1.475 3.184v.015c.01 2.04 4.045 10.076 10.017 12.688l.017-.013a2.57 3.401 51.533 0 0 3.454-.706 2.57 3.401 51.533 0 0 1.064-4.129 2.57 3.401 51.533 0 0-4.262.103 2.57 3.401 51.533 0 0-.505.473c-1.346-.639-2.952-1.463-4.168-2.98-.771-.962-1.257-2.732-1.549-4.206a2.57 3.401 51.533 0 0 .605-.403 2.57 3.401 51.533 0 0 1.064-4.129 2.57 3.401 51.533 0 0-4.262.103z" stroke-width=".372"/>
</symbol>
<symbol id="icon-telegram" viewBox="0 0 32 32">
<path d="M30.8,2.2L0.6,13.9c-0.8,0.3-0.7,1.3,0,1.6l7.4,2.8l2.9,9.2c0.2,0.6,0.9,0.8,1.4,0.4l4.1-3.4 c0.4-0.4,1-0.4,1.5,0l7.4,5.4c0.5,0.4,1.2,0.1,1.4-0.5L32,3.2C32.1,2.5,31.4,1.9,30.8,2.2z M25,8.3l-11.9,11 c-0.4,0.4-0.7,0.9-0.8,1.5l-0.4,3c-0.1,0.4-0.6,0.4-0.7,0.1l-1.6-5.5c-0.2-0.6,0.1-1.3,0.6-1.6l14.4-8.9C25,7.7,25.3,8.1,25,8.3z"/>
</symbol>
<symbol id="icon-hashtag" viewBox="0 0 32 32">
<path class="path1" d="M17.696 18.286l1.143-4.571h-4.536l-1.143 4.571h4.536zM31.411 9.286l-1 4q-0.125 0.429-0.554 0.429h-5.839l-1.143 4.571h5.554q0.268 0 0.446 0.214 0.179 0.25 0.107 0.5l-1 4q-0.089 0.429-0.554 0.429h-5.839l-1.446 5.857q-0.125 0.429-0.554 0.429h-4q-0.286 0-0.464-0.214-0.161-0.214-0.107-0.5l1.393-5.571h-4.536l-1.446 5.857q-0.125 0.429-0.554 0.429h-4.018q-0.268 0-0.446-0.214-0.161-0.214-0.107-0.5l1.393-5.571h-5.554q-0.268 0-0.446-0.214-0.161-0.214-0.107-0.5l1-4q0.125-0.429 0.554-0.429h5.839l1.143-4.571h-5.554q-0.268 0-0.446-0.214-0.179-0.25-0.107-0.5l1-4q0.089-0.429 0.554-0.429h5.839l1.446-5.857q0.125-0.429 0.571-0.429h4q0.268 0 0.446 0.214 0.161 0.214 0.107 0.5l-1.393 5.571h4.536l1.446-5.857q0.125-0.429 0.571-0.429h4q0.268 0 0.446 0.214 0.161 0.214 0.107 0.5l-1.393 5.571h5.554q0.268 0 0.446 0.214 0.161 0.214 0.107 0.5z"></path>
</symbol>
<symbol id="icon-chain" viewBox="0 0 30 32">
<path class="path1" d="M26 21.714q0-0.714-0.5-1.214l-3.714-3.714q-0.5-0.5-1.214-0.5-0.75 0-1.286 0.571 0.054 0.054 0.339 0.33t0.384 0.384 0.268 0.339 0.232 0.455 0.063 0.491q0 0.714-0.5 1.214t-1.214 0.5q-0.268 0-0.491-0.063t-0.455-0.232-0.339-0.268-0.384-0.384-0.33-0.339q-0.589 0.554-0.589 1.304 0 0.714 0.5 1.214l3.679 3.696q0.482 0.482 1.214 0.482 0.714 0 1.214-0.464l2.625-2.607q0.5-0.5 0.5-1.196zM13.446 9.125q0-0.714-0.5-1.214l-3.679-3.696q-0.5-0.5-1.214-0.5-0.696 0-1.214 0.482l-2.625 2.607q-0.5 0.5-0.5 1.196 0 0.714 0.5 1.214l3.714 3.714q0.482 0.482 1.214 0.482 0.75 0 1.286-0.554-0.054-0.054-0.339-0.33t-0.384-0.384-0.268-0.339-0.232-0.455-0.063-0.491q0-0.714 0.5-1.214t1.214-0.5q0.268 0 0.491 0.063t0.455 0.232 0.339 0.268 0.384 0.384 0.33 0.339q0.589-0.554 0.589-1.304zM29.429 21.714q0 2.143-1.518 3.625l-2.625 2.607q-1.482 1.482-3.625 1.482-2.161 0-3.643-1.518l-3.679-3.696q-1.482-1.482-1.482-3.625 0-2.196 1.571-3.732l-1.571-1.571q-1.536 1.571-3.714 1.571-2.143 0-3.643-1.5l-3.714-3.714q-1.5-1.5-1.5-3.643t1.518-3.625l2.625-2.607q1.482-1.482 3.625-1.482 2.161 0 3.643 1.518l3.679 3.696q1.482 1.482 1.482 3.625 0 2.196-1.571 3.732l1.571 1.571q1.536-1.571 3.714-1.571 2.143 0 3.643 1.5l3.714 3.714q1.5 1.5 1.5 3.643z"></path>
</symbol>
<symbol id="icon-thumb-tack" viewBox="0 0 21 32">
<path class="path1" d="M8.571 15.429v-8q0-0.25-0.161-0.411t-0.411-0.161-0.411 0.161-0.161 0.411v8q0 0.25 0.161 0.411t0.411 0.161 0.411-0.161 0.161-0.411zM20.571 21.714q0 0.464-0.339 0.804t-0.804 0.339h-7.661l-0.911 8.625q-0.036 0.214-0.188 0.366t-0.366 0.152h-0.018q-0.482 0-0.571-0.482l-1.357-8.661h-7.214q-0.464 0-0.804-0.339t-0.339-0.804q0-2.196 1.402-3.955t3.17-1.759v-9.143q-0.929 0-1.607-0.679t-0.679-1.607 0.679-1.607 1.607-0.679h11.429q0.929 0 1.607 0.679t0.679 1.607-0.679 1.607-1.607 0.679v9.143q1.768 0 3.17 1.759t1.402 3.955z"></path>
</symbol>
<symbol id="icon-arrow-left" viewBox="0 0 43 32">
<path class="path1" d="M42.311 14.044c-0.178-0.178-0.533-0.356-0.711-0.356h-33.778l10.311-10.489c0.178-0.178 0.356-0.533 0.356-0.711 0-0.356-0.178-0.533-0.356-0.711l-1.6-1.422c-0.356-0.178-0.533-0.356-0.889-0.356s-0.533 0.178-0.711 0.356l-14.578 14.933c-0.178 0.178-0.356 0.533-0.356 0.711s0.178 0.533 0.356 0.711l14.756 14.933c0 0.178 0.356 0.356 0.533 0.356s0.533-0.178 0.711-0.356l1.6-1.6c0.178-0.178 0.356-0.533 0.356-0.711s-0.178-0.533-0.356-0.711l-10.311-10.489h33.778c0.178 0 0.533-0.178 0.711-0.356 0.356-0.178 0.533-0.356 0.533-0.711v-2.133c0-0.356-0.178-0.711-0.356-0.889z"></path>
</symbol>
<symbol id="icon-arrow-right" viewBox="0 0 43 32">
<path class="path1" d="M0.356 17.956c0.178 0.178 0.533 0.356 0.711 0.356h33.778l-10.311 10.489c-0.178 0.178-0.356 0.533-0.356 0.711 0 0.356 0.178 0.533 0.356 0.711l1.6 1.6c0.178 0.178 0.533 0.356 0.711 0.356s0.533-0.178 0.711-0.356l14.756-14.933c0.178-0.356 0.356-0.711 0.356-0.889s-0.178-0.533-0.356-0.711l-14.756-14.933c0-0.178-0.356-0.356-0.533-0.356s-0.533 0.178-0.711 0.356l-1.6 1.6c-0.178 0.178-0.356 0.533-0.356 0.711s0.178 0.533 0.356 0.711l10.311 10.489h-33.778c-0.178 0-0.533 0.178-0.711 0.356-0.356 0.178-0.533 0.356-0.533 0.711v2.311c0 0.178 0.178 0.533 0.356 0.711z"></path>
</symbol>
<symbol id="icon-play" viewBox="0 0 22 28">
<path d="M21.625 14.484l-20.75 11.531c-0.484 0.266-0.875 0.031-0.875-0.516v-23c0-0.547 0.391-0.781 0.875-0.516l20.75 11.531c0.484 0.266 0.484 0.703 0 0.969z"></path>
</symbol>
<symbol id="icon-pause" viewBox="0 0 24 28">
<path d="M24 3v22c0 0.547-0.453 1-1 1h-8c-0.547 0-1-0.453-1-1v-22c0-0.547 0.453-1 1-1h8c0.547 0 1 0.453 1 1zM10 3v22c0 0.547-0.453 1-1 1h-8c-0.547 0-1-0.453-1-1v-22c0-0.547 0.453-1 1-1h8c0.547 0 1 0.453 1 1z"></path>
</symbol>
</defs>
</svg>

</body>
</html>
