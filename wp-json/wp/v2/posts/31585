{"id":31585,"date":"2015-10-19T23:49:02","date_gmt":"2015-10-20T06:49:02","guid":{"rendered":"https:\/\/coertvonk.com\/?p=31585"},"modified":"2022-02-13T16:56:24","modified_gmt":"2022-02-14T00:56:24","slug":"conclusion","status":"publish","type":"post","link":"http:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585","title":{"rendered":"Conclusion"},"content":{"rendered":"<p>\r\n    Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned. Part of the project <a href=\"\/category\/sw\/pitch-detector\">Arduino Pitch Detector<\/a>.\\(\\)\r\n<\/p>\r\n<p>\r\n    I found that a <em>sample rate of 9615 Hz<\/em> and a <em>window size of 200 samples<\/em> combined with interpolation produce correct results for clarinet and piano from 155.6 Hz (Eb3) to 1568 Hz (G6).\r\n<\/p>\r\n<p>\r\n    On the clarinet, it misses the far lowest note (D3) and the very highest notes that only select musician can play (Ab6-B6) as shown in the visual. For clarinet, normalization only adds one low note to the range, while causing the frequency to be less accurate for high notes. As a result, I decided to not use normalization for clarinet.\r\n<\/p>\r\n<p>\r\n    For piano, I would use normalization because it adds an extra 7 low notes that would otherwise not be recognized. Things brings the piano range to 98 Hz (G2) to 1568 Hz (G6).\r\n<\/p>\r\n<p>\r\n    Segmentation works well at the cost of a slight delay which is noticeable but acceptable. Overall, I found that this project pushed the Arduino to its limits in both processing power and available memory.\r\n<\/p>\r\n<p>\r\n    To simplify things, I have undone the effect of transposing in processing the test results. The graph below illustrates this\r\n\r\n    <div class=\"align-center\">\r\n        <figure>\r\n                <a class=\"hide-anchor fancybox\" href=\"\/wp-content\/uploads\/pitch-result.png\">\r\n                    <img  title=\"\" class=\"wp-image-14730 size-large\" src=\"https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-1024x741.png\" alt=\"own work\" width=\"640\" srcset=\"https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-1024x741.png 1024w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-400x289.png 400w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-768x555.png 768w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-250x181.png 250w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-300x217.png 300w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-350x253.png 350w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-500x362.png 500w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result-750x542.png 750w, https:\/\/coertvonk.com\/wp-content\/uploads\/pitch-result.png 1886w\" sizes=\"(max-width: 706px) 89vw, (max-width: 767px) 82vw, 740px\" \/>\r\n                <\/a>\r\n            <figcaption>\r\n                Clarinet, fs=9615Hz, N=200, with interpolation\r\n            <\/figcaption>\r\n        <\/figure>\r\n    <\/div>\r\n<\/p>\r\n\r\n<h2>\r\n    Questions and problems that arose\r\n<\/h2>\r\n<p>\r\n    The Arduino did not have enough memory to store the audio samples. Using fewer samples would cause low notes to be missed. Instead, I lowered the sampling rate so that there were fewer audio samples to store but caused the device to miss high notes. To improve the accuracy of these high notes, I used quadratic interpolation.\r\n<\/p>\r\n<p>\r\n    I minimized the delay by sampling the audio asynchronously and by limiting the autocorrelation algorithm to frequencies corresponding to the lowest and highest notes of the instrument.\r\n<\/p>\r\n<p>\r\n    To improve the range of notes recognized, I tried normalizing the autocorrelation for the zeroes introduced by the lag while shifting the waveform. For clarinet, normalization only added one low note while causing the frequency to be less accurate. As a result, I decided to not use normalization for clarinet. For piano on the other hand it would adds seven extra low notes.\r\n<\/p>\r\n\r\n<h2>\r\n    Lessons learned\r\n<\/h2>\r\n<p>\r\n    This was my first big project. It took many iterations to build something that I could be proud of. While some iterations made improvements, many were discouraging. However, reviewing these failures gave me valuable insights. I foremost learned to chose a project that I am truly passionate which made it easier to stick with. When problems arose, it helped to be patient.\r\n<\/p>\r\n<p>\r\n    In presenting my project, it worked best to start with a simple introduction and then answer questions. This allowed me to adjust to each person\u2019s interests and background. I met judges who used the same algorithms as that I used in my project. Sharing insights with the judges at the Synopsis Silicon Valley and Technology Championship and the California State Science Fair was memorable.\r\n<\/p>\r\n<p>\r\n    In the future, I would make my project smaller and easier to handle. I would create an 1-inch round printed circuit board and would also use the Intel Curie SoC. This SoC can be programmed in a similar manner to the Arduino and includes a Bluetooth interface. This interface would allow me to eliminate wires. I also considered porting the code to Java to run on an Android phone, but I prefer to have a small device that can be clipped to the instrument.\r\n<\/p>\r\n<p>\r\n    <div class=\"continue-container no-print\">\r\n        <div class=\"continue-content\">\r\n            <div class=\"continue-text\">\r\n                Want to learn about other software projects?  Refer to our other <a href=\"https:\/\/coertvonk.com\/category\/sw\/embedded\">Embedded C projects<\/a>\r\n        <\/div>\r\n    <\/div>    \r\n<\/p>\r\n","protected":false},"excerpt":{"rendered":"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.","protected":false},"author":41,"featured_media":18417,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"inline_featured_image":false,"_mi_skip_tracking":false},"categories":[433],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v18.6 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Conclusion for pitch detection on Arduino - Johan Vonk<\/title>\n<meta name=\"description\" content=\"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Conclusion for pitch detection on Arduino - Johan Vonk\" \/>\n<meta property=\"og:description\" content=\"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585\" \/>\n<meta property=\"og:site_name\" content=\"Coert Vonk\" \/>\n<meta property=\"article:published_time\" content=\"2015-10-20T06:49:02+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-02-14T00:56:24+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png\" \/>\n\t<meta property=\"og:image:width\" content=\"300\" \/>\n\t<meta property=\"og:image:height\" content=\"300\" \/>\n\t<meta property=\"og:image:type\" content=\"image\/png\" \/>\n<meta name=\"twitter:card\" content=\"summary\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"Coert Vonk\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"3 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebSite\",\"@id\":\"http:\/\/coertvonk.com\/#website\",\"url\":\"http:\/\/coertvonk.com\/\",\"name\":\"Coert Vonk\",\"description\":\"Embedded Software Engineer\",\"publisher\":{\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"http:\/\/coertvonk.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png\",\"contentUrl\":\"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png\",\"width\":300,\"height\":300},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#webpage\",\"url\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585\",\"name\":\"Conclusion for pitch detection on Arduino - Johan Vonk\",\"isPartOf\":{\"@id\":\"http:\/\/coertvonk.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#primaryimage\"},\"datePublished\":\"2015-10-20T06:49:02+00:00\",\"dateModified\":\"2022-02-14T00:56:24+00:00\",\"description\":\"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.\",\"breadcrumb\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Vonk Family\",\"item\":\"https:\/\/coertvonk.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Software\",\"item\":\"https:\/\/coertvonk.com\/category\/sw\"},{\"@type\":\"ListItem\",\"position\":3,\"name\":\"Arduino\",\"item\":\"https:\/\/coertvonk.com\/category\/sw\/arduino\"},{\"@type\":\"ListItem\",\"position\":4,\"name\":\"Pitch detection\",\"item\":\"https:\/\/coertvonk.com\/category\/sw\/arduino\/pitch-detector\"},{\"@type\":\"ListItem\",\"position\":5,\"name\":\"Conclusion\"}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#article\",\"isPartOf\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#webpage\"},\"author\":{\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\"},\"headline\":\"Conclusion\",\"datePublished\":\"2015-10-20T06:49:02+00:00\",\"dateModified\":\"2022-02-14T00:56:24+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#webpage\"},\"wordCount\":586,\"commentCount\":0,\"publisher\":{\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\"},\"image\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#primaryimage\"},\"thumbnailUrl\":\"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png\",\"articleSection\":[\"Pitch detection\"],\"inLanguage\":\"en-US\"},{\"@type\":[\"Person\",\"Organization\"],\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\",\"name\":\"Coert Vonk\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/coertvonk.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g\",\"contentUrl\":\"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g\",\"caption\":\"Coert Vonk\"},\"logo\":{\"@id\":\"http:\/\/coertvonk.com\/#personlogo\"},\"description\":\"Passionately curious and stubbornly persistent. Enjoys to inspire and consult with others to exchange the poetry of logical ideas.\",\"sameAs\":[\"https:\/\/coertvonk.com\"],\"url\":\"http:\/\/coertvonk.com\/author\/cvonk\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Conclusion for pitch detection on Arduino - Johan Vonk","description":"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585","og_locale":"en_US","og_type":"article","og_title":"Conclusion for pitch detection on Arduino - Johan Vonk","og_description":"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.","og_url":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585","og_site_name":"Coert Vonk","article_published_time":"2015-10-20T06:49:02+00:00","article_modified_time":"2022-02-14T00:56:24+00:00","og_image":[{"width":300,"height":300,"url":"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png","type":"image\/png"}],"twitter_card":"summary","twitter_misc":{"Written by":"Coert Vonk","Est. reading time":"3 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebSite","@id":"http:\/\/coertvonk.com\/#website","url":"http:\/\/coertvonk.com\/","name":"Coert Vonk","description":"Embedded Software Engineer","publisher":{"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"http:\/\/coertvonk.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#primaryimage","inLanguage":"en-US","url":"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png","contentUrl":"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png","width":300,"height":300},{"@type":"WebPage","@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#webpage","url":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585","name":"Conclusion for pitch detection on Arduino - Johan Vonk","isPartOf":{"@id":"http:\/\/coertvonk.com\/#website"},"primaryImageOfPage":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#primaryimage"},"datePublished":"2015-10-20T06:49:02+00:00","dateModified":"2022-02-14T00:56:24+00:00","description":"Describes the conclusion for pitch detection on Arduino. Questions and problems that arose and lessons learned.","breadcrumb":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Vonk Family","item":"https:\/\/coertvonk.com\/"},{"@type":"ListItem","position":2,"name":"Software","item":"https:\/\/coertvonk.com\/category\/sw"},{"@type":"ListItem","position":3,"name":"Arduino","item":"https:\/\/coertvonk.com\/category\/sw\/arduino"},{"@type":"ListItem","position":4,"name":"Pitch detection","item":"https:\/\/coertvonk.com\/category\/sw\/arduino\/pitch-detector"},{"@type":"ListItem","position":5,"name":"Conclusion"}]},{"@type":"Article","@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#article","isPartOf":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#webpage"},"author":{"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e"},"headline":"Conclusion","datePublished":"2015-10-20T06:49:02+00:00","dateModified":"2022-02-14T00:56:24+00:00","mainEntityOfPage":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#webpage"},"wordCount":586,"commentCount":0,"publisher":{"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e"},"image":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/pitch-detector\/conclusion-31585#primaryimage"},"thumbnailUrl":"https:\/\/coertvonk.com\/wp-content\/uploads\/johan-pitch-detector-logo4.png","articleSection":["Pitch detection"],"inLanguage":"en-US"},{"@type":["Person","Organization"],"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e","name":"Coert Vonk","image":{"@type":"ImageObject","@id":"http:\/\/coertvonk.com\/#personlogo","inLanguage":"en-US","url":"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g","contentUrl":"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g","caption":"Coert Vonk"},"logo":{"@id":"http:\/\/coertvonk.com\/#personlogo"},"description":"Passionately curious and stubbornly persistent. Enjoys to inspire and consult with others to exchange the poetry of logical ideas.","sameAs":["https:\/\/coertvonk.com"],"url":"http:\/\/coertvonk.com\/author\/cvonk"}]}},"_links":{"self":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts\/31585"}],"collection":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/users\/41"}],"replies":[{"embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/comments?post=31585"}],"version-history":[{"count":4,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts\/31585\/revisions"}],"predecessor-version":[{"id":31619,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts\/31585\/revisions\/31619"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/media\/18417"}],"wp:attachment":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/media?parent=31585"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/categories?post=31585"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/tags?post=31585"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}