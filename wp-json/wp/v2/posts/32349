{"id":32349,"date":"2015-11-05T20:12:51","date_gmt":"2015-11-06T04:12:51","guid":{"rendered":"https:\/\/coertvonk.com\/?p=32349"},"modified":"2022-04-26T14:17:42","modified_gmt":"2022-04-26T21:17:42","slug":"making-it-dance","status":"publish","type":"post","link":"http:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349","title":{"rendered":"Making it dance"},"content":{"rendered":"<p>\r\n    We were inspired by the Dancing robot and noticed that <a href=\"http:\/\/monket.net\/dancing-monkeys-v2\/Main_Page\/\">Dancing monkey<\/a> does a great beat detection (octave\/matlab).\r\n<\/p>\r\n<p>\r\n    http:\/\/www.instructables.com\/id\/Musical-Robot\/\r\n<\/p>\r\n<p>\r\n    http:\/\/www.mathworks.com\/matlabcentral\/fileexchange\/32374-legacy-matlab-and-simulink-support-for-arduino\r\n<\/p>\r\n\r\n<h2>\r\n    Input\r\n<\/h2>\r\n<p>\r\n    The MSGEQ7 gives the volume envelopes for 7 frequency bands.\r\n<\/p>\r\n\r\n<h2>\r\n    Smoothing\r\n<\/h2>\r\n<p>\r\n    Apply a low pass filter, maybe an exponential moving average [<a href=\"https:\/\/learn.sparkfun.com\/tutorials\/hackers-in-residence---sound-and-motion-reactivity-for-wearables\">mpinner<\/a>, <a href=\"https:\/\/github.com\/mpinner\/SoundMotions\/blob\/master\/Arduino\/SmoothSoundAndMotion\/SmoothSoundAndMotion.ino#L177\">code<\/a>]\r\n<\/p>\r\n<p>\r\n    https:\/\/learn.sparkfun.com\/tutorials\/hackers-in-residence&#8212;sound-and-motion-reactivity-for-wearables\r\n<\/p>\r\n\r\n<h3>\r\n    Beat detection\r\n<\/h2>\r\n<p>\r\n    Goal is to determine the periodicity of the note onset pulses. These can be seen as a quasi-periodic and noisy pulse-train that exhibits large peaks at note attacks.\r\n<\/p>\r\n<p>\r\n    The volume envelope can be used to find the music measure period auto correlation.\r\n<\/p>\r\n<p>\r\n    Use autocorrelation to estimate tempo [audiograins] [<a href=\"https:\/\/www.cstr.ed.ac.uk\/downloads\/publications\/2002\/Takeda2002MMSP12.pdf\">Takeda<\/a>] [urakawa] [Alonson]\r\n<\/p>\r\n<p>\r\n    http:\/\/dpeckett.com\/beat-detection-on-the-arduino\r\n<\/p>\r\n<p>\r\n    http:\/\/blog.hzldv.com\/beat_detection\r\n\r\n    uses <a href=\"https:\/\/processing.org\/\">Processing<\/a> based\r\n    libraries: sound, minim\r\n<\/p>\r\n<p>\r\n    https:\/\/www.clear.rice.edu\/elec301\/Projects01\/beat_sync\/beatalgo.html\r\n<\/p>\r\n<p>\r\n    http:\/\/archive.gamedev.net\/archive\/reference\/programming\/features\/beatdetection\/index.html\r\n<\/p>\r\n<p>\r\n    http:\/\/stackoverflow.com\/questions\/657073\/how-to-detect-the-bpm-of-a-song-in-php (beatroot)\r\n<\/p>\r\n<p>\r\n    https:\/\/github.com\/marsyas\/marsyas\r\n<\/p>\r\n<p>\r\n    http:\/\/aubio.org\/\r\n<\/p>\r\n \r\n<h2>\r\n    Single pole low pass filter\r\n<\/h2>\r\n<p>\r\n    <img  title=\"\" loading=\"lazy\" class=\"wp-image-13552 alignright\" src=\"\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-filter-rc-schematic.png\" alt=\"from http:\/\/s.eeweb.com\/articles\/2012\/03\/14\/Single-Pole-Infinite-Impulse-Response-1331734603.pdf\" width=\"130\" height=\"63\" \/>Low-pass filters are used whenever high frequency components must be removed from a signal. A single-pole passive RC filter consists of a resistor and capacitor in series [<a href=\"https:\/\/en.wikipedia.org\/wiki\/RC_circuit#Series_circuit\">RC Circuit<\/a>]. The low-pass output is the voltage over the capacitor (<em>V<sub>c<\/sub><\/em>). It is called an Infinite-Impulse Response (IIR) filter, because if you give it an impulse input, the output takes an infinite time to go down to zero.\r\n<\/p>\r\n\r\n<h3>\r\n    Capacitor complex impedance\r\n<\/h3>\r\n<p>\r\n    A capacitor stores energy in an electric field. Its capacitance (<em>C<\/em>) in Farad is defined as a function of the charge (q) and potential voltage difference (<em>u<\/em>).\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>C \u2261 q(t) \/ u(t)<\/em>\r\n<\/p>\r\n<p>\r\n    The charge (<em>q<\/em>) is a function of the current accumulated over time (assuming no initial charge)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>q = \u222b i(\u03c4)\/d\u03c4<\/em>   (from <em>0<\/em> to <em>t<\/em>)\r\n<\/p>\r\n<p>\r\n    Combining these equations [<a href=\"https:\/\/en.wikipedia.org\/wiki\/Capacitor#Current.E2.80.93voltage_relation\">wiki<\/a>]\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>u(t) = q(t) \/ C = 1\/C * \u222b i(\u03c4)\/d\u03c4<\/em>\r\n<\/p>\r\n<p>\r\n    Solving for the current\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u222b i(\u03c4)\/d\u03c4 = C . u(t)      <\/em>for <em>\u03c4<\/em> from 0 to<em> t<\/em>\r\n<\/p>\r\n<p>\r\n    Taking the derivative on both sides, gives the current as a function of the voltage [<a href=\"https:\/\/en.wikipedia.org\/wiki\/Laplace_transform#Example_2:_Deriving_the_complex_impedance_for_a_capacitor\">wiki<\/a>]\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>i(t) = C . du(t) \/ dt<\/em>, or abbreviated to <em>i = C. du\/dt<\/em>\r\n<\/p>\r\n<p>\r\n    To avoid working with differential equations, we use the Laplace transform. This way we can use the complex frequency domain instead <a href=\"https:\/\/en.wikipedia.org\/wiki\/Laplace_transform#Example_2:_Deriving_the_complex_impedance_for_a_capacitor\">[wiki]<\/a>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em> \u2112{ i(t) } = \u2112{ C . du(t) \/ dt }<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>I(s) = C . s . U(s)<\/em>, where <em>I(s) = \u2112{ i(t) }<\/em> and <em>U(s) = \u2112{ v(t) }<\/em>\r\n<\/p>\r\n<p>\r\n    The complex impedance is defined as\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>Z(s) \u2261 U(s) \/ I(s)<\/em>\r\n<\/p>\r\n<p>\r\n    Using this definition and solving the previous equation for the complex impedance <em>Z(s)<\/em> we get\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>Z(s) = 1 \/ sC <\/em>\r\n<\/p>\r\n\r\n<h3>\r\n    Transfer function\r\n<\/h3>\r\n<p>\r\n    The output voltage (<em>V<sub>c<\/sub><\/em>) is a function of the current flowing into the capacitor (<em>V<sub>in<\/sub>-V<sub>c<\/sub><\/em>)\/R. This represents a negative feedback [Cypress].\r\n<\/p>\r\n<p>\r\n    The transfer function defines the filter&#8217;s response to any arbitrary input signal.\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>H(s) \u2261 V<sub>c<\/sub>\/V<sub>in<\/sub><\/em>\r\n<\/p>\r\n<p>\r\n    The voltage across the capacitor can be calculated by using the voltage divider equation.\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>H(s) = Z<sub>c<\/sub> \/ (Z<sub>c<\/sub> + Z<sub>r<\/sub>) = <em>1\/sC \/ ( 1\/sC + R )<\/em><\/em>\r\n<\/p>\r\n<p>\r\n    Multiplying the numerator and denomerator with sC yields\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <strong><em>H(s) = 1 \/ (1 + sRC )<\/em><\/strong>\r\n<\/p>\r\n<p>\r\n    This is a 1<sup>st<\/sup> order system, because the order of a filter is the highest power of the variable <em>s<\/em> in its transfer function. The order of a filter is usually equal to the total number of capacitors and inductors in the circuit.\r\n<\/p>\r\n\r\n<h3>\r\n    Poles\r\n<\/h3>\r\n<p>\r\n    This transfer function has a single pole at\r\n<\/p>    \r\n<p style=\"padding-left: 30px;\">\r\n    <em>1 + sRC = 0<\/em>  \u21d2  <em><strong>s = -1\/RC<\/strong><\/em>\r\n<\/p>\r\n\r\n<h3>\r\n    Gain\r\n<\/h3>\r\nKnowing the transfer function magnitude (or gain) at each frequency allows us to determine how well the filter can distinguish between signals at different frequencies. The transfer function magnitude versus frequency is called the amplitude response.\r\n\r\nBy replacing the variable <em>s<\/em> with <em>j\u03c9<\/em>, where j is equal to <em>\u221a-<\/em>1 , and <em>\u03c9<\/em> is the radian frequency,  we can find the effect on the magnitude and phase of the input signal.\r\n<p style=\"padding-left: 30px;\"><em>H(\u03c9) = 1 \/ (1 + j\u03c9RC )<\/em><\/p>\r\nThe gain is defined as\r\n<p style=\"padding-left: 30px;\"><em>G(\u03c9) \u2261 |H(j\u03c9)|<\/em><\/p>\r\nSubstituting H(j<em>\u03c9<\/em>)\r\n<p style=\"padding-left: 30px;\"><em><strong>G(\u03c9) <\/strong>= |1 \/ (1+ sRC)| = <strong>1\/\u221a(1<sup>2<\/sup>+ (\u03c9RC)<sup>2<\/sup>)<\/strong><\/em><\/p>\r\n\r\n<h3>\r\n    Phase\r\n<\/h3>\r\n<p>\r\n    The phase response of the filter gives the amount of phase shift introduced in sinusoidal signals as a function of frequency. A change in phase of a signal also represents a change in time. [Lacanette]\r\n<\/p>\r\n<p>\r\n    The phase is defined as\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u03c6<\/em><em>(\u03c9) = \u2220H(j\u03c9) = atan( Im{H(j\u03c9)} \/ Re{H(j\u03c9)} )<\/em>\r\n<\/p>\r\n<p>\r\n    Split the transfer function in Real and Imaginary and parts by multiplying with the complex conjugate of the denominator.\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>H(\u03c9) = 1 \/ (1 + j\u03c9RC ) = (1 &#8211; j\u03c9RC ) \/ ((1 &#8211; j\u03c9RC )(1 + j\u03c9RC )) = (1 &#8211; j\u03c9RC ) \/ (1 &#8211; (j\u03c9RC)<sup>2<\/sup>) = (1 &#8211; j\u03c9RC ) \/ (1 + (\u03c9RC)<sup>2<\/sup>)<\/em>\r\n<\/p>\r\n<p>\r\n    Therefore\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <strong><em>\u03c6<\/em><\/strong><em><strong>(\u03c9)<\/strong> = atan( -\u03c9RC \/ 1 ) = <\/em><strong><em>atan(-\u03c9RC)<\/em><\/strong>\r\n<\/p>\r\n<p>\r\n    Using Euler theorem, we can express the output (<em>U<sub>c<\/sub><\/em>) as a phasor\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>U<sub>c<\/sub> = U<sub>in<\/sub> . G . e<sup>j\u03c6<\/sup><\/em>\r\n<\/p>\r\n\r\n<h3>\r\n    Cutoff frequency\r\n<\/h3>\r\n<p>\r\n    The cutoff frequencies (<em>f<sub>c<\/sub><\/em>) is usually assumed to be the frequency where the gain has dropped by 3 decibels (<em>1<\/em><em>\/\u221a2)<\/em>.\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>1\/\u221a2 = 1\/\u221a(1<sup>2<\/sup>+ (\u03c9<sub>c<\/sub>RC)<sup>2<\/sup>)  \u21d2  1<sup>2<\/sup> + (\u03c9<sub>c<\/sub>RC)<sup>2<\/sup> = 2  \u21d2   \u03c9<sub>c<\/sub>CR = <em>1  \u21d2   \u03c9<sub>c<\/sub> = 1 \/ RC<\/em><\/em>\r\n<\/p>\r\n<p>\r\n    To get the center frequency and phase in Hz, substitute <em><em>\u03c9=2\u03c0f<\/em><\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <strong><em>f<sub>c<\/sub> = 1 \/ 2\u03c0RC<\/em><\/strong>\r\n<\/p>\r\n<p>\r\n    The corresponding phase shift is\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em><strong>\u03c6<sub>c<\/sub><\/strong> = atan(-\u03c9<sub>c<\/sub>RC) = atan(-1\/RC * RC) = atan(-1) = -\u03c0\/4 \u223c<strong> -45\u00b0<\/strong><\/em>\r\n<\/p>\r\n\r\n<h3>\r\n    Measuring the quality\r\n<\/h3>\r\n<p>\r\n    The center frequency is equal to the geometric mean of the -3 dB frequencies ( <em>f<sub>c<\/sub>=\u221a(f<sub>c1<\/sub>.f<sub>c2<\/sub>) <\/em>).\r\n<\/p>\r\n<p>\r\n    Another quantity used to describe the performance of a filter is the filter&#8217;s &#8220;Q&#8221;. This is a measure of the &#8220;sharpness&#8221; of the amplitude response. The Q of a band-pass filter is the ratio of the center frequency to the difference between the -3 dB frequencies (also known as the -3 dB bandwidth). Q=f<sub>c<\/sub> \/ (f<sub>2<\/sub>-f<sub>1<\/sub>)\r\n<\/p>\r\n\r\n<h3>\r\n    Roll-off\r\n<\/h3>\r\n<p>\r\n    The rate of change of attenuation between the passband and the stopband also differs from one filter to the next. The slope of the curve in this region depends strongly on the order of the filter, with higher-order filters having steeper cutoff slopes. The attenuation slope is usually expressed in dB\/octave (an octave is a factor of 2 in frequency).\r\n<\/p>\r\n<p>\r\n    Earlier, we found the gain (<em>G<\/em>) and cutoff frequency <em>(\u03c9<sub>c<\/sub>)<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>G(\u03c9) = 1\/\u221a(1<sup>2<\/sup>+ (\u03c9RC)<sup>2<\/sup>)<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u03c9<sub>c<\/sub> = 1 \/ RC<\/em>\r\n<\/p>\r\n<p>\r\n    Combining these\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>G(\u03c9) = 1\/\u221a(1<sup>2<\/sup>+ (\u03c9\/\u03c9<sub>c<\/sub>)<sup>2<\/sup>) = 1 \/ \u221a(1+(\u03c9\/\u03c9<sub>c<\/sub>)<sup>2<\/sup><\/em>)\r\n<\/p>\r\n<p>\r\n    Since the range of amplitudes may also be large, the amplitude scale is usually expressed in decibels (20.loglH(<em>\u03c9<\/em>)l)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>G<sub>dB<\/sub>(\u03c9) = 10.log(G(j\u03c9)) = 10.log( 1 \/ \u221a(1+(\u03c9\/\u03c9<sub>c<\/sub>)<sup>2<\/sup><\/em>) )\r\n<\/p>\r\n<p>\r\n    At <em>\u03c9 &gt;&gt; \u03c9<sub>c<\/sub>, <\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>G<sub>dB<\/sub>(\u03c9) = 10.log( 1 \/ \u03c9\/\u03c9<sub>c <\/sub><\/em>) = 10.log(<em>\u03c9<sub>c<\/sub><\/em>\/<em>\u03c9<\/em>)\r\n<\/p>\r\n<p>\r\n    One octave higher at <em>\u03c9 = 2.\u03c9<sub>c<\/sub><\/em>, we get\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <strong>\u0394<\/strong><em><strong>G<sub>dB<\/sub>(\u03c9)<\/strong> = 10.log( \u03c9<sub>c <\/sub>\/ 2\u03c9<sub>c <\/sub>) = 10.log( 1\/2 ) \u2245 <strong>-6 dB\/octav<\/strong>e <\/em>\r\n<\/p>\r\n<p>\r\n    This single-pole arrangement gives us a roll-off slope of -6 dB\/octave (-20dB\/decade) attenuation of frequencies above the cut-off point at <span class=\"ntxt\">\u0192<sub>c<\/sub><\/span> [<a href=\"https:\/\/en.wikipedia.org\/wiki\/Roll-off\">wiki<\/a>]. An Octave is a doubling (multiply by 2) or halving (divide by 2) of the frequency scale.\r\n\r\n    \\(\\frac{1}{\\sqrt{{\\left(\\frac{{\\omega}^{2}}{{\\omega_n}^{2}} &#8211; 1\\right)}^{2} + \\frac{{\\omega}^{2}}{Q^{2} {\\omega_n}^{2}}}}\\)\r\n<\/p>\r\n<p>\r\n    It is also usually desirable to have amplitude and phase response curves that cover a wide range of frequencies. A logarithmic frequency scale is very useful in such cases, as it gives equal weight to equal ratios of frequencies. Those interested in other filters such as band-reject or band-pass filters, refer to Nat&#8217;l Semi App Note 779.\r\n<\/p>\r\n\r\n<h2>\r\n    Two pole low pass filter\r\n<\/h2>\r\n<p>\r\n    Higher order filters improve the roll-off slope, but even passive filters may introduce oscillation. The 2nd order low-pass filter on page 5 is of special interest [AN779].\r\n<\/p>\r\n<p>\r\n    exhibit a resonant peak in the vicinity of the cut-off frequency\r\n<\/p>\r\n<p>\r\n    A unity gain 2nd order low pass transfer function is of the form [<a href=\"https:\/\/moodle.cecs.pdx.edu\/login\/index.php\">McNames<\/a>]\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>H(s) = \u03c9<sub>n<\/sub><sup>2<\/sup> \/ (s<sup>2 <\/sup>+ 2\u03b6\u03c9<sub>n<\/sub>s + \u03c9<sub>n<\/sub><sup>2<\/sup>)<\/em>\r\n<\/p>\r\n<p>\r\n    <em>\u03c9<sub>c<\/sub><\/em> is the undampened natural frequency, \u03b6 is the dampening ratio\r\n<\/p>\r\n<p>\r\n    If \u03b6 \u2265 1, the poles are real \u2022 If 0 &lt; \u03b6 &lt; 1, the poles are complex \u2022 If \u03b6 = 0, the poles are imaginary: p1,2 = \u00b1j\u03c9n \u2022 If \u03b6 &lt; 0, the poles are in the right half plane (Re{p} &gt; 0) and the system is unstable\r\n<\/p>\r\n<p>\r\n    Can also be expressed as\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>H(s) = 1 \/ ( (s\/\u03c9<sub>n<\/sub><\/em>)<em><sup>2 <\/sup>+ s\/Q\u03c9<sub>n<\/sub> + 1) <\/em>\r\n<\/p>\r\n<p>\r\n    where Q \u2261 1 \/ 2<em>\u03b6.<\/em>  Substituting <em>s=j\u03c9<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>H(\u03c9) = 1 \/ ( (j\u03c9\/\u03c9<sub>n<\/sub><\/em>)<em><sup>2 <\/sup>+ j\u03c9\/Q\u03c9<sub>n<\/sub> + 1) = 1 \/ ( 1 &#8211; (\u03c9\/\u03c9<sub>n<\/sub>)<em><sup>2 <\/sup><\/em><\/em><em>+ j\u03c9\/Q\u03c9<sub>n<\/sub>)<\/em>\r\n<\/p>\r\n<p>\r\n    Unity gain and phase low pass magnitude response\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    20.log<em>|H(\u03c9)| = 20.log| 1 &#8211; (\u03c9\/\u03c9<sub>n<\/sub>)<sup>2 <\/sup><em>+ j\u03c9\/Q\u03c9<sub>n <\/sub>|<sup>-1<\/sup><\/em><\/em> = -20.log<sub>10<\/sub>( \u221a( (<em>1 &#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>)<sup>2 <\/sup><\/em>+ (<em>\u03c9\/Q\u03c9<sub>n<\/sub>)<sup>2 <\/sup><\/em>)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u2220H(\u03c9) = \u2220 ( 1 \/ ( 1 &#8211;  (\u03c9\/\u03c9<sub>n<\/sub>)<sup>2 <\/sup>+ j\u03c9\/Q\u03c9<sub>n <\/sub>) ) = atan ( \u03c9\/Q\u03c9<sub>n <\/sub><\/em>\/ (<em>1 &#8211;  (\u03c9\/\u03c9<sub>n<\/sub>)<sup>2 <\/sup><\/em>) =\r\n<\/p>\r\n<p>\r\n    for <em>\u03c9 &lt;&lt; \u03c9<sub>n<\/sub><\/em>\r\n<\/p>    \r\n<p style=\"padding-left: 30px;\">\r\n    20.log|H<em>(\u03c9)|<\/em> \u2248 -20.log|1| = 0 [dB]\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u2220H(\u03c9) = atan(1) = 0\u00b0<\/em>\r\n<\/p>\r\n<p>\r\n    for <em>\u03c9 &gt;&gt; \u03c9<sub>n<\/sub><\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    20.log|H<em>(\u03c9)|<\/em> \u2248 -20.log(<em>\u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup><\/em>) = -40.log(<em>\u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup><\/em>) [dB]\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u2220H(\u03c9) = atan(-1) = -180\u00b0<\/em>\r\n<\/p>\r\n<p>\r\n    for <em>\u03c9 = \u03c9<sub>n<\/sub><\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    20.log|H<em>(\u03c9)|<\/em> \u2248 -20.log(1\/Q) = -20.log(Q) [dB]\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u2220H(\u03c9) = atan(-j) = -90\u00b0<\/em>\r\n<\/p>\r\n<p>\r\n    for high values of Q, the maximum |H<em>(\u03c9)| &gt; 1<\/em>. This is called peaking.\r\n<\/p>\r\n<p>\r\n    Frequency where |H<em>(\u03c9)|<\/em> is maximum\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    d(|H<em>(\u03c9)|)\/d\u03c9 = 0<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    \u21d2|H<em>(\u03c9)|&#8217; = d\/d\u03c9 [ 1 \/ ( \u221a( (<em>1 &#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>)<sup>2 <\/sup><\/em>+ (<em>\u03c9\/Q\u03c9<sub>n<\/sub>)<sup>2 <\/sup><\/em>) ]<\/em>\r\n<\/p>\r\n<p>\r\n    feeding &#8220;1 \/ ( sqrt( (1 &#8211; (w^2)\/(n^2))^2 + (w\/(Q*n))^2 ) )&#8221; to the <a href=\"https:\/\/www.derivative-calculator.net\/\">derivative calculator<\/a>,  returns\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <img loading=\"lazy\" class=\"alignnone wp-image-13574\" src=\"\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-maxabs.png\" alt=\"using http:\/\/www.derivative-calculator.net\/\" width=\"196\" height=\"104\" srcset=\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-maxabs.png 318w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-maxabs-250x133.png 250w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-maxabs-300x159.png 300w\" sizes=\"(max-width: 196px) 100vw, 196px\" \/>\r\n<\/p>\r\n<p>\r\n    or maybe\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    w = var(&#8216;w&#8217;, latex_name=r&#8217;\\omega&#8217;)<br \/>\r\n    n = var(&#8216;w_n&#8217;, latex_name=r&#8217;\\omega_n&#8217;)<br \/>\r\n    Q = var(&#8216;Q&#8217;)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    H = 1 \/ ( 1 &#8211; (w\/n)^2 + i*w\/(Q*n) )<br \/>\r\n    G = abs(H))<br \/>\r\n    show(G)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    G2 = 1 \/ ( sqrt( (1 &#8211; (w^2)\/(n^2))^2 + (w\/(Q*n))^2 ) )<br \/>\r\n    show(G2)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    show(solve(diff(G,w)==0,w))\r\n<\/p>\r\n<p>\r\n    numerator must be 0\r\n<\/p>    \r\n<p style=\"padding-left: 30px;\">\r\n    \u21d22<em>\u03c9 \/ \u03c9<sub>n<\/sub><sup>2<\/sup> Q<sup>2 <\/sup>&#8211; 4<em>\u03c9(1 &#8211; \u03c9<sup>2<\/sup><\/em>\/\u03c9<sub>n<\/sub><sup>2<\/sup>)\/\u03c9<sub>n<\/sub><sup>2 <\/sup>= 0<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    \u21d2 2<em>\u03c9 = 4\u03c9(1 &#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>).Q<sup>2 <\/sup><\/em>\u21d21<em> = 2(1 &#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>).Q<sup>2<\/sup><\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    \u21d2<em>(1 &#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>).Q<sup>2 <\/sup><\/em>= 1\/2 \u21d2 <em>1 &#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup><sup> <\/sup><\/em>= 1 \/ 2Q<sup>2<\/sup>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    \u21d2<em>&#8211; \u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>.<sup> <\/sup><\/em>= 1 \/ 2Q<sup>2 <\/sup>&#8211; 1 \u21d2<em>\u03c9<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup><sup> <\/sup><\/em>= 1 &#8211; 1 \/ 2Q<sup>2<\/sup>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    \u21d2<em>\u03c9<sup>2<\/sup><sup> <\/sup><\/em>= \u03c9<sub>n<\/sub><sup>2<\/sup>(1 &#8211; 1 \/ 2Q<sup>2<\/sup>) \u21d2<em>\u03c9<sup> <\/sup><\/em>= \u03c9<sub>n<\/sub>\u221a(1 &#8211; 1 \/ 2Q<sup>2<\/sup>)\r\n<\/p>\r\n<p>\r\n    Or using <a href=\"https:\/\/sagecell.sagemath.org\/\">sagemath<\/a>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    w = var(&#8216;w&#8217;, latex_name=r&#8217;\\omega&#8217;)<br \/>\r\nn = var(&#8216;w_n&#8217;, latex_name=r&#8217;\\omega_n&#8217;)<br \/>\r\nQ = var(&#8216;Q&#8217;)<br \/>\r\nG = 1 \/ ( sqrt( (1 &#8211; (w^2)\/(n^2))^2 + (w\/(Q*n))^2 ) )<br \/>\r\nshow(solve(diff(G,w) == 0, w))\r\n<\/p>\r\n<p>\r\n    For <em>Q&gt;\u221a2<\/em>, the maximum magnitude is at\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>\u03c9<sup> <\/sup><\/em>= \u03c9<sub>n<\/sub>\u221a(1 &#8211; 1 \/ 2Q<sup>2<\/sup>) \u2261 <em>\u03c9<sub>r<\/sub><\/em>\r\n<\/p>\r\n<p>\r\n    The magnitude is found by substituting this back in the <em>|H(\u03c9)|<\/em> equation\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>|H<sub>\u03c9r<\/sub>| = 1 \/ ( \u221a( (1 &#8211; (\u03c9<sub>n<\/sub>\u221a(1 &#8211; 1 \/ 2Q<sup>2<\/sup>))<sup>2<\/sup>\/\u03c9<sub>n<\/sub><sup>2<\/sup>)<sup>2 <\/sup>+ ((\u03c9<sub>n<\/sub>\u221a(1 &#8211; 1 \/ 2Q<sup>2<\/sup>))\/Q\u03c9<sub>n<\/sub>)<sup>2 <\/sup>)<\/em>\r\n<\/p>\r\n<p>\r\n    Sagemath to the rescue\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    w = var(&#8216;w&#8217;, latex_name=r&#8217;\\omega&#8217;)<br \/>\r\n    n = var(&#8216;w_n&#8217;, latex_name=r&#8217;\\omega_n&#8217;)<br \/>\r\n    Q = var(&#8216;Q&#8217;)\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    G = 1 \/ ( sqrt( (1 &#8211; (w^2)\/(n^2))^2 + (w\/(Q*n))^2 ) )\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    C = G.substitute(w == n * sqrt(1 &#8211; 1\/(2*Q^2)))<br \/>\r\n    show( simplify(C) )\r\n<\/p>\r\n<p>\r\n    Feeding this to <a href=\"https:\/\/www.wolframalpha.com\/widget\/widgetPopup.jsp?p=v&amp;id=7014d9722bc42de3f621eaad1da2615e&amp;title=Simplifying+Algebraic+Expressions+Calculator&amp;theme=blue&amp;i0=9x-9y%5E3&amp;podSelect\">wolframalpha<\/a> yields\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>|H<sub>\u03c9r<\/sub>| = 2 \/ sqrt( (4Q<sup>2 <\/sup>&#8211; 1) \/ Q<sup>4 <\/sup>)<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>|H<sub>\u03c9r<\/sub>| = 2.Q<sup>2<\/sup> \/ sqrt( (4Q<sup>2 <\/sup>&#8211; 1)<sup> <\/sup>)<\/em>\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    <em>|H<sub>\u03c9r<\/sub>| = Q \/ ( 1 &#8211; 1 \/ 4Q<sup>2<\/sup> )<\/em>\r\n<\/p>\r\n<p>\r\n    The largest Q before the onset of peaking is Q=1\/\u221a2. Said to be maximally flat. Commonly known as a Butterworth response. In this case |H<em>(\u03c9<sub>n<\/sub>)| = -3 dB<\/em>, and<em> \u03c9<sub>n<\/sub><\/em> is the cutoff frequency.\r\n<\/p>\r\n<p>\r\n    Comments\r\n    <ul>\r\n        <li>The second-order response attenuates twice as fast as a first-order response (40 dB\/decade)<\/li>\r\n        <li>Generally better than the cascade of two first-order filters<\/li>\r\n        <li>Offers additional degree of freedom (Q), which is the gain near \u03c9 = \u03c9n<\/li>\r\n        <li>Q may range from 0.5 to 100 (is usually near Q=1)<\/li>\r\n    <\/ul>\r\n<\/p>\r\n\r\n<h3>\r\n    RLC low-pass filter\r\n<\/h3>\r\n<p>\r\n    Higher order filters may have the Amplitude and phase response curves are calculated in GNU\/Octave using\r\n\r\n    <pre>\r\n        % 1H in series with 1Ohm\/\/1F, output over the 1Ohm\/\/1F\r\n        H = tf([1], [ 1 1 1]);\r\n        [mag, phi, w] = bode(H);\r\n\r\n        figure(1), bode(H)\r\n        figure(2), polar(phi*pi\/180, mag)\r\n        figure(3), nyquist(H)\r\n    <\/pre>\r\n<\/p>\r\n<p>\r\n    Note the ripple in the pass-band where the G become &gt;1. The higher the Q, the bigger the ripple.\r\n<\/p>\r\n<p>\r\n    The higher the R the higher the Q, and the less dampening for the resonation\r\n    <iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" title=\"RLC low-pass filter\" src=\"https:\/\/www.circuitlab.com\/circuit\/6uf4n2\/embed_target\/?width=525#?secret=wuQYft2bKi\" data-secret=\"wuQYft2bKi\" scrolling=\"no\" frameborder=\"0\" width=\"525\" height=\"393\"><\/iframe>\r\n    and http:\/\/sim.okawa-denshi.jp\/en\/RLClowkeisan.htm\r\n<\/p>\r\n\r\n<h2>\r\n    Two pole low pass filter\r\n<\/h2>\r\n<p>\r\n    If this -6dB\/octave is not enough to remove an unwanted signal then two stages can be cascaded together to form a second-order (two-pole) filter and get -12 dB\/octave [<a href=\"https:\/\/www.electronics-tutorials.ws\/filter\/filter_2.html\">Storr<\/a>]\r\n<\/p>\r\n<p>\r\n    Higher order can cause oscillation\r\n<\/p>\r\n<p style=\"padding-left: 30px;\">\r\n    f<sub>c<\/sub> = 1\/(2\u03c0\u221a(R<sub>1<\/sub>C<sub>1<\/sub>R<sub>2<\/sub>C<sub>2<\/sub>))\r\n<\/p>\r\n<p>\r\n    The load impedance affects the filters characteristics. To reduce the loading effect we can make the impedance of each following stage 10\u00d7 the previous stage.\r\n<\/p>\r\n\r\n<h3>\r\n    Butterworth\r\n<\/h3>\r\n<p>\r\n    [<a href=\"https:\/\/en.wikipedia.org\/wiki\/Butterworth_filter\">wikibutterworth<\/a>]\r\n<\/p>\r\n<p>\r\n    a nice description by [Lacanette] overview\r\n<\/p>\r\n<p>\r\n    laplace\r\n<\/p>\r\n<p>\r\n    [<a href=\"https:\/\/en.wikipedia.org\/wiki\/RC_circuit\">wiki<\/a>]\r\n<\/p>\r\n<p>\r\n    We use two pole Infinite-Impulse Response (IIR) filters to create high and low pass filters. The IIR filter uses feedback, so if you put in an impulse (a <em>1<\/em> followed by <em>0<\/em>&#8216;s), an infinite number of non-zero values will come out.\r\n<\/p>\r\n<p>\r\n    IIR filters use less memory and clock cycles than a similar Finite-Impulse Response filter (FIR). The disadvantage is that IIR filters introduce a phase distortion. This however doesn&#8217;t affect our implementation.\r\n<\/p>\r\n<p>\r\n    [Cypress]\r\n<\/p>\r\n<p>\r\n    The AVR core includes a hardware multiplier for integers, but not for floating point numbers.\r\n<\/p>\r\n<p>\r\n    Digital Filters are very demanding\r\n<\/p>\r\n<p>\r\n    The 8-bit AVR core\r\n<\/p>\r\n<p>\r\n    his page concentrates on DSP applicaitons of <em><a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/Math\/index.html\">8:8 fixed point<\/a><\/em> in which there are 8 bits of integer and 8 bits of fraction stored for each number. The emphasis of these implementations is on speed, but accuracy considerations are addressed.\r\n<\/p>\r\n<p>\r\n    <a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/Math\/avrDSP_GCC_asm.htm\">AVR DSP using GNU C\/Asm<\/a>,\r\n<\/p>\r\n<p>\r\n    <a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/Math\/avrDSP.htm\">AVR DSP at Cornell<\/a>, <a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/\">math operations<\/a>, <a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/Math\/DigitalFiltersVersion2.pdf\">article<\/a>, <a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/Math\/GCC644\/IIRfilters\/mergedIIR\/IIRfilterScaledGCC644_macro.c\">multfix<\/a>\/macfix, <a href=\"http:\/\/people.ece.cornell.edu\/land\/courses\/ece4760\/\">using macfix<\/a>\r\n<\/p>\r\n<p>\r\n    <a href=\"http:\/\/gcc.gnu.org\/onlinedocs\/gcc-4.5.3\/gcc\/Fixed_002dPoint.html\">gnu fixed point math<\/a> or <a href=\"https:\/\/sourceforge.net\/p\/fixedptc\/code\/ci\/default\/tree\/fixedptc.h\">header file<\/a>\r\n<\/p>\r\n\r\n<h2>\r\n    Envelope detection\r\n<\/h2>\r\n<p>\r\n    Analyze the signal envelope, calculating attack-sustain-decay-release times.\r\n<\/p>\r\n<p>\r\n    Or .. have the user tick the tempo and analyze that in a way similar to Wayne and Layne&#8217;s tapper [<a href=\"https:\/\/www.wayneandlayne.com\/projects\/metronome\/design\/\">Wayne<\/a>, pic code]\r\n<\/p>\r\n\r\n<h2>\r\n    Other\r\n<\/h2>\r\n<p>\r\n    <ul>\r\n        <li>http:\/\/www.terasoft.com.tw\/conf\/ismir2014\/proceedings\/T008_121_Paper.pdf<\/li>\r\n        <li>http:\/\/www.researchgate.net\/publication\/228746428_Monophonic_transcription_with_autocorrelation<\/li>\r\n        <li data-wpview-marker=\"http%3A%2F%2Fwww.terasoft.com.tw%2Fconf%2Fismir2014%2Fproceedings%2FT008_121_Paper.pdf\">http:\/\/www.terasoft.com.tw\/conf\/ismir2014\/proceedings\/T008_121_Paper.pdf<\/li>\r\n        <li data-wpview-marker=\"http%3A%2F%2Fscorecloud.com%2Fcnn-google-translate-music%2F%3Cbr%3E%3Cbr%3E\">http:\/\/scorecloud.com\/cnn-google-translate-music\/<\/li>\r\n    <\/ul>\r\n<\/p> \r\n<p>\r\n    On the <a href=\"https:\/\/github.com\/cvonk\/android-dancing_droid\">last page<\/a> of this article, we draw some conclusions.\r\n<\/p>\r\n\r\n<h2>\r\n    Conclusion\r\n<\/h2>\r\n<p>\r\n    2BD\r\n<\/p> \r\n\r\n<h1>\r\n    Appendix\r\n<\/h1>\r\n<p>\r\n    The capacitor equation. Voltage is charge over capacitance. Charge is the integral of &#8230; [<a href=\"https:\/\/en.wikipedia.org\/wiki\/Capacitor#Current.E2.80.93voltage_relation\">wiki<\/a>]\r\n\r\n    <img loading=\"lazy\" class=\"alignnone size-full wp-image-13560\" src=\"\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-1.png\" alt=\"from https:\/\/en.wikipedia.org\/wiki\/Capacitor#Current.E2.80.93voltage_relation\" width=\"309\" height=\"51\" srcset=\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-1.png 309w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-1-250x41.png 250w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-1-300x50.png 300w\" sizes=\"(max-width: 309px) 100vw, 309px\" \/>\r\n<\/p>\r\n<p>\r\n    Taking the derivative of this and multiplying by <i>C<\/i> yields the current as a function of the voltage\r\n\r\n    <img loading=\"lazy\" class=\"alignnone size-full wp-image-13561\" src=\"\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-2.png\" alt=\"from https:\/\/en.wikipedia.org\/wiki\/Capacitor#Current.E2.80.93voltage_relation\" width=\"204\" height=\"43\" srcset=\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-2.png 204w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancing-droid-capacitor-2-200x43.png 200w\" sizes=\"(max-width: 204px) 100vw, 204px\" \/>, or <img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/d\/0\/7\/d074af5f53c518ee607539d2018210e5.png\" alt=\"i = C { dv \\over dt}\" \/>\r\n<\/p>\r\n<p>\r\n    Where <i>C<\/i> is the capacitance (in <a title=\"Farad\" href=\"https:\/\/en.wikipedia.org\/wiki\/Farad\">farads<\/a>) of the capacitor, <i>i<\/i> = <i>i<\/i>(<i>t<\/i>) is the <a title=\"Electric current\" href=\"https:\/\/en.wikipedia.org\/wiki\/Electric_current\">electric current<\/a> (in <a title=\"Ampere\" href=\"https:\/\/en.wikipedia.org\/wiki\/Ampere\">amperes<\/a>) through the capacitor as a function of time, and <i>v<\/i> = <i>v<\/i>(<i>t<\/i>) is the <a class=\"mw-redirect\" title=\"Electrostatic potential\" href=\"https:\/\/en.wikipedia.org\/wiki\/Electrostatic_potential\">voltage<\/a> (in <a title=\"Volt\" href=\"https:\/\/en.wikipedia.org\/wiki\/Volt\">volts<\/a>) across the terminals of the capacitor, also as a function of time. [<a href=\"https:\/\/en.wikipedia.org\/wiki\/Laplace_transform#Example_2:_Deriving_the_complex_impedance_for_a_capacitor\">wiki<\/a>]\r\n<\/p>\r\n<p>\r\n    Taking the Laplace transform of this equation, we obtain\r\n    <dl>\r\n        <dd><img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/5\/5\/1\/55111f5445ee3a81b8ccffb6776d7666.png\" alt=\" I(s) = C(s V(s) - V_o),\" \/><\/dd>\r\n    <\/dl>\r\n<\/p>\r\n<p>\r\n    where\r\n    <dl>\r\n        <dd><img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/b\/7\/5\/b75e3eace8e141ab947e7178b9dcd31c.png\" alt=\"\\begin{align} I(s) &amp;= \\mathcal{L} \\{ i(t) \\},\\\\ V(s) &amp;= \\mathcal{L} \\{ v(t) \\}, \\end{align}\" \/>  and  <img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/e\/d\/d\/edd97b12a70df477783fc9195083157f.png\" alt=\" V_o = v(t)|_{t=0}. \\, \" \/><\/dd>\r\n    <\/dl>\r\n<\/p> \r\n<p>\r\n    Solving for <i>V<\/i>(<i>s<\/i>) we have\r\n    <dl>\r\n        <dd><img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/6\/c\/4\/6c444d3842131e2d23f723210f95aa10.png\" alt=\" V(s) = { I(s) \\over sC } + { V_o \\over s }. \" \/><\/dd>\r\n    <\/dl>\r\n<\/p>\r\n<p>\r\n    The definition of the <a title=\"Complex number\" href=\"https:\/\/en.wikipedia.org\/wiki\/Complex_number\">complex<\/a> <a title=\"Electrical impedance\" href=\"https:\/\/en.wikipedia.org\/wiki\/Electrical_impedance\">impedance<\/a> <i>Z<\/i> (in <a title=\"Ohm\" href=\"https:\/\/en.wikipedia.org\/wiki\/Ohm\">ohms<\/a>) is the ratio of the complex voltage <i>V<\/i> divided by the complex current <i>I<\/i> while holding the initial state <i>V<\/i><sub>o<\/sub> at zero:\r\n    \r\n    <dl>\r\n        <dd><img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/d\/1\/a\/d1aa04d9d08d562a9e95f4ae7ce0fd1c.png\" alt=\"Z(s) = { V(s) \\over I(s) } \\bigg|_{V_o = 0}.\" \/><\/dd>\r\n    <\/dl>\r\n<\/p>\r\n<p>\r\n    Using this definition and the previous equation, we find:\r\n\r\n    <dl>\r\n        <dd><img class=\"mwe-math-fallback-image-inline tex\" src=\"https:\/\/upload.wikimedia.org\/math\/6\/0\/7\/60768213334c1ed61f3991d2f9c5ee98.png\" alt=\"Z(s) = \\frac{1}{sC}, \" \/><\/dd>\r\n    <\/dl>\r\n\r\n    <img loading=\"lazy\" class=\"alignright wp-image-13553 \" src=\"\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-filter-rc-control.png\" alt=\"from http:\/\/s.eeweb.com\/articles\/2012\/03\/14\/Single-Pole-Infinite-Impulse-Response-1331734603.pdf\" width=\"208\" height=\"80\" srcset=\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-filter-rc-control.png 314w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-filter-rc-control-250x96.png 250w, https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-filter-rc-control-300x116.png 300w\" sizes=\"(max-width: 208px) 100vw, 208px\" \/>\r\n<\/p>\r\n<p>\r\n    <div class=\"continue-container no-print\">\r\n        <div class=\"continue-content\">\r\n            <div class=\"continue-text\">\r\n                Learn about <a href=\"https:\/\/coertvonk.com\/category\/sw\/embedded\">other embedded projects<\/a>.\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>    \r\n<\/p>\r\n","protected":false},"excerpt":{"rendered":"In this part it all comes together to make the Droid dance.","protected":false},"author":41,"featured_media":13501,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"inline_featured_image":false,"_mi_skip_tracking":false},"categories":[438],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v18.6 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Making it dance - Dancing droid<\/title>\n<meta name=\"description\" content=\"Describes how it all comes together to make the Droid dance.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Making it dance - Dancing droid\" \/>\n<meta property=\"og:description\" content=\"Describes how it all comes together to make the Droid dance.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349\" \/>\n<meta property=\"og:site_name\" content=\"Coert Vonk\" \/>\n<meta property=\"article:published_time\" content=\"2015-11-06T04:12:51+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-04-26T21:17:42+00:00\" \/>\n<meta name=\"twitter:card\" content=\"summary\" \/>\n<meta name=\"twitter:image\" content=\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg\" \/>\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"Coert Vonk\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"11 minutes\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebSite\",\"@id\":\"http:\/\/coertvonk.com\/#website\",\"url\":\"http:\/\/coertvonk.com\/\",\"name\":\"Coert Vonk\",\"description\":\"Embedded Software Engineer\",\"publisher\":{\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"http:\/\/coertvonk.com\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg\",\"contentUrl\":\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg\",\"caption\":\"own work, requires svg enabled browser\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#webpage\",\"url\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349\",\"name\":\"Making it dance - Dancing droid\",\"isPartOf\":{\"@id\":\"http:\/\/coertvonk.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#primaryimage\"},\"datePublished\":\"2015-11-06T04:12:51+00:00\",\"dateModified\":\"2022-04-26T21:17:42+00:00\",\"description\":\"Describes how it all comes together to make the Droid dance.\",\"breadcrumb\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Vonk Family\",\"item\":\"https:\/\/coertvonk.com\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Software\",\"item\":\"https:\/\/coertvonk.com\/category\/sw\"},{\"@type\":\"ListItem\",\"position\":3,\"name\":\"Arduino\",\"item\":\"https:\/\/coertvonk.com\/category\/sw\/arduino\"},{\"@type\":\"ListItem\",\"position\":4,\"name\":\"Dancing droid\",\"item\":\"https:\/\/coertvonk.com\/category\/sw\/arduino\/dancing-droid\"},{\"@type\":\"ListItem\",\"position\":5,\"name\":\"Making it dance\"}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#article\",\"isPartOf\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#webpage\"},\"author\":{\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\"},\"headline\":\"Making it dance\",\"datePublished\":\"2015-11-06T04:12:51+00:00\",\"dateModified\":\"2022-04-26T21:17:42+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#webpage\"},\"wordCount\":2218,\"commentCount\":0,\"publisher\":{\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\"},\"image\":{\"@id\":\"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#primaryimage\"},\"thumbnailUrl\":\"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg\",\"articleSection\":[\"Dancing droid\"],\"inLanguage\":\"en-US\"},{\"@type\":[\"Person\",\"Organization\"],\"@id\":\"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e\",\"name\":\"Coert Vonk\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/coertvonk.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g\",\"contentUrl\":\"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g\",\"caption\":\"Coert Vonk\"},\"logo\":{\"@id\":\"http:\/\/coertvonk.com\/#personlogo\"},\"description\":\"Passionately curious and stubbornly persistent. Enjoys to inspire and consult with others to exchange the poetry of logical ideas.\",\"sameAs\":[\"https:\/\/coertvonk.com\"],\"url\":\"http:\/\/coertvonk.com\/author\/cvonk\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Making it dance - Dancing droid","description":"Describes how it all comes together to make the Droid dance.","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349","og_locale":"en_US","og_type":"article","og_title":"Making it dance - Dancing droid","og_description":"Describes how it all comes together to make the Droid dance.","og_url":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349","og_site_name":"Coert Vonk","article_published_time":"2015-11-06T04:12:51+00:00","article_modified_time":"2022-04-26T21:17:42+00:00","twitter_card":"summary","twitter_image":"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg","twitter_misc":{"Written by":"Coert Vonk","Est. reading time":"11 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebSite","@id":"http:\/\/coertvonk.com\/#website","url":"http:\/\/coertvonk.com\/","name":"Coert Vonk","description":"Embedded Software Engineer","publisher":{"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"http:\/\/coertvonk.com\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#primaryimage","inLanguage":"en-US","url":"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg","contentUrl":"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg","caption":"own work, requires svg enabled browser"},{"@type":"WebPage","@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#webpage","url":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349","name":"Making it dance - Dancing droid","isPartOf":{"@id":"http:\/\/coertvonk.com\/#website"},"primaryImageOfPage":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#primaryimage"},"datePublished":"2015-11-06T04:12:51+00:00","dateModified":"2022-04-26T21:17:42+00:00","description":"Describes how it all comes together to make the Droid dance.","breadcrumb":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349"]}]},{"@type":"BreadcrumbList","@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Vonk Family","item":"https:\/\/coertvonk.com\/"},{"@type":"ListItem","position":2,"name":"Software","item":"https:\/\/coertvonk.com\/category\/sw"},{"@type":"ListItem","position":3,"name":"Arduino","item":"https:\/\/coertvonk.com\/category\/sw\/arduino"},{"@type":"ListItem","position":4,"name":"Dancing droid","item":"https:\/\/coertvonk.com\/category\/sw\/arduino\/dancing-droid"},{"@type":"ListItem","position":5,"name":"Making it dance"}]},{"@type":"Article","@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#article","isPartOf":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#webpage"},"author":{"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e"},"headline":"Making it dance","datePublished":"2015-11-06T04:12:51+00:00","dateModified":"2022-04-26T21:17:42+00:00","mainEntityOfPage":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#webpage"},"wordCount":2218,"commentCount":0,"publisher":{"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e"},"image":{"@id":"https:\/\/coertvonk.com\/sw\/arduino\/dancing-droid\/making-it-dance-32349#primaryimage"},"thumbnailUrl":"https:\/\/coertvonk.com\/wp-content\/uploads\/dancingdroid-droid.svg","articleSection":["Dancing droid"],"inLanguage":"en-US"},{"@type":["Person","Organization"],"@id":"http:\/\/coertvonk.com\/#\/schema\/person\/5eeda746b43b88312a0621fdc226c70e","name":"Coert Vonk","image":{"@type":"ImageObject","@id":"http:\/\/coertvonk.com\/#personlogo","inLanguage":"en-US","url":"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g","contentUrl":"http:\/\/1.gravatar.com\/avatar\/193315b96c6661985694e2ecd91f2996?s=96&d=mm&r=g","caption":"Coert Vonk"},"logo":{"@id":"http:\/\/coertvonk.com\/#personlogo"},"description":"Passionately curious and stubbornly persistent. Enjoys to inspire and consult with others to exchange the poetry of logical ideas.","sameAs":["https:\/\/coertvonk.com"],"url":"http:\/\/coertvonk.com\/author\/cvonk"}]}},"_links":{"self":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts\/32349"}],"collection":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/users\/41"}],"replies":[{"embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/comments?post=32349"}],"version-history":[{"count":10,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts\/32349\/revisions"}],"predecessor-version":[{"id":32730,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/posts\/32349\/revisions\/32730"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/media\/13501"}],"wp:attachment":[{"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/media?parent=32349"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/categories?post=32349"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/coertvonk.com\/wp-json\/wp\/v2\/tags?post=32349"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}